(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{309:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(14),i=r.n(c),s=r(73),o=r(53),d=r(18),l=r(20),u=r(353),j=r(354),b=r(355),h=r(346),p=r(98),m=r(380),x=r(385),O=r(360),f=r(356),g=r(357),v=r(358),y=r(359),N=r(361),w=r(7),C=r(5),I=r(384),S=r(348),R=r(350),k=r(165),T=r(347),A=r(349),P=r(351),_=r(1),U=Object(C.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return Object(_.jsx)(k.a,Object(w.a)({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),E=Object(C.a)((function(e){return{root:{"&:focus":{backgroundColor:e.palette.primary.main,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(I.a),q=function(){var e=n.a.useState(null),t=Object(l.a)(e,2),r=t[0],a=t[1];return Object(_.jsxs)("div",{children:[Object(_.jsx)(h.a,{style:{color:"white"},onClick:function(e){a(e.currentTarget)},children:Object(_.jsx)(T.a,{style:{fontSize:30,marginTop:5}})}),Object(_.jsxs)(U,{id:"customized-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:function(){a(null)},children:[Object(_.jsx)(o.b,{to:"/account",style:{textDecoration:"none"},children:Object(_.jsxs)(E,{children:[Object(_.jsx)(S.a,{children:Object(_.jsx)(A.a,{fontSize:"small"})}),Object(_.jsx)(R.a,{primary:"Personal info"})]})}),Object(_.jsx)(o.b,{to:"/pastOrders",style:{textDecoration:"none"},children:Object(_.jsxs)(E,{children:[Object(_.jsx)(S.a,{children:Object(_.jsx)(P.a,{fontSize:"small"})}),Object(_.jsx)(R.a,{primary:"Past orders"})]})})]})]})},L="LOG_IN",M=function(e){var t={type:L,data:e};return function(e){e(t)}},D=r(164),B=r(30),F="ADD_PRODUCT",z="GET_PRODUCTS",H="REMOVE_PRODUCT",W={products:[]},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(w.a)(Object(w.a)({},e),{},{products:t.data});case F:return Object(w.a)(Object(w.a)({},e),{},{products:e.products.concat(t.data)});case H:return Object(w.a)(Object(w.a)({},e),{},{products:e.products.filter((function(e){return e!==t.data}))})}return e},G={user:void 0},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(w.a)(Object(w.a)({},e),{},{user:t.data})}return e},Y="SET_NOTIFICATION",J="HIDE_NOTIFICATION",$={message:"",type:"error",visible:!1},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(w.a)(Object(w.a)({},e),{},{message:t.data,type:t.notificationType,visible:!0});case J:return Object(w.a)(Object(w.a)({},e),{},{message:"",type:t.notificationType,visible:!1})}return e},X="INCREASE_QUANTITY",Z="DECREASE_QUANTITY",ee="REMOVE_PRODUCT_FROM_CART",te="CREATE_NEW_SHOPPING_CART",re=function(e){return"INCREASE_QUANTITY"===e.type||"DECREASE_QUANTITY"===e.type||"REMOVE_PRODUCT_FROM_CART"===e.type},ae=function(e){return"CREATE_NEW_SHOPPING_CART"===e.type},ne=function(e){return"RETRIEVE_OLD_SHOPPING_CART"===e.type},ce=function(e){return"CLEAR_SHOPPINGCART"===e.type},ie=function(e){return"firstName"in e&&"lastName"in e&&"userName"in e&&"id"in e&&"userType"in e&&"token"in e&&"timestamp"in e},se={cartId:"",cart:[]},oe=function(e,t){var r=t.find((function(t){return t._id===e._id}));return r?(e.quantity=r.quantity+1,e):e},de=function(e,t){var r=t.find((function(t){return t._id===e._id}));return r?(e.quantity=r.quantity-1,e):e},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;if(re(t))switch(t.type){case X:if(!e.cart.some((function(e){return e._id===t.data._id})))return Object(w.a)(Object(w.a)({},e),{},{cartId:t.cartId,cart:e.cart.concat(t.data)});var r=oe(t.data,e.cart);return Object(w.a)(Object(w.a)({},e),{},{cartId:t.cartId,cart:e.cart.map((function(e){return e._id===r._id?r:e}))});case Z:var a=de(t.data,e.cart);return Object(w.a)(Object(w.a)({},e),{},{cartId:t.cartId,cart:e.cart.map((function(e){return e._id===a._id?a:e}))});case ee:return Object(w.a)(Object(w.a)({},e),{},{cartId:t.cartId,cart:e.cart.filter((function(e){return e._id!==t.data._id}))})}if(ne(t))return{cartId:t.cartId,cart:t.data};if(ae(t))switch(console.log("new shopping cart reducerissa",t),t.type){case te:return Object(w.a)(Object(w.a)({},e),{},{cartId:t.cartId,cart:e.cart})}return ce(t)?(console.log("clear cart reducerissa",t),Object(w.a)(Object(w.a)({},e),{},{cartId:"",cart:[]})):e},ue={createUserModal:!1,logInModal:!1,addProductModal:!1,modifyUserInfoModal:!1},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.modal){case"AddProduct":return Object(w.a)(Object(w.a)({},e),{},{addProductModal:t.data});case"CreateUser":return Object(w.a)(Object(w.a)({},e),{},{createUserModal:t.data});case"LogIn":return Object(w.a)(Object(w.a)({},e),{},{logInModal:t.data});case"ModifyUser":return Object(w.a)(Object(w.a)({},e),{},{modifyUserInfoModal:t.data});default:return e}},be="SET_FILTER",he={productFilter:""},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return{productFilter:t.data}}return e},me=Object(B.c)({productReducer:V,userReducer:Q,notificationReducer:K,shoppingCartReducer:le,modalReducer:je,filterReducer:pe}),xe=Object(D.a)({reducer:me}),Oe=function(){return Object(s.b)()},fe=s.c,ge=xe,ve=function(e,t){if("error"===(a=t)||"info"===a||"success"===a){var r={type:Y,notificationType:t,data:e};return function(e){e(r)}}var a,n={type:Y,notificationType:"error",data:e};return function(e){e(n)}},ye=function(e){var t={type:be,data:e};return function(e){e(t)}},Ne=r(383),we=r(9),Ce=r(311),Ie=r(352),Se=r(13),Re=r(161),ke=r.n(Re),Te=r(97),Ae=r.n(Te),Pe=r(10),_e=r.n(Pe),Ue=r(22),Ee=r(24),qe=r.n(Ee),Le="https://verkkis.herokuapp.com/api",Me={signIn:function(){var e=Object(Ue.a)(_e.a.mark((function e(t,r,a){var n;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.post("".concat(Le,"/login"),{username:t,password:r,platformInfo:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),createUser:function(){var e=Object(Ue.a)(_e.a.mark((function e(t){var r;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.post("".concat(Le,"/users"),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),modifyUser:function(){var e=Object(Ue.a)(_e.a.mark((function e(t){var r;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.put("".concat(Le,"/users/"),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUsersCompletedShoppingcarts:function(){var e=Object(Ue.a)(_e.a.mark((function e(t){var r;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.get("".concat(Le,"/users/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},De=function(e,t){var r={type:"",modal:t,data:e};return function(e){e(r)}},Be=function(e){var t={type:te,cartId:e};return function(e){e(t)}},Fe=function(e,t){var r={type:"RETRIEVE_OLD_SHOPPING_CART",cartId:e,data:t};return function(e){e(r)}},ze=function(e,t){var r=Object(w.a)(Object(w.a)({},e),{},{quantity:1}),a={type:X,cartId:t,data:r};return function(e){e(a)}},He=function(e,t){var r={type:X,cartId:t,data:Object(w.a)(Object(w.a)({},e),{},{quantity:e.quantity+1})};return function(e){e(r)}},We=function(e,t){var r={type:Z,cartId:t,data:Object(w.a)(Object(w.a)({},e),{},{quantity:e.quantity-1})};return function(e){e(r)}},Ve=function(e,t){var r={type:ee,cartId:t,data:e};return function(e){e(r)}},Ge=function(){var e={type:"CLEAR_SHOPPINGCART"};return function(t){t(e)}},Qe="https://verkkis.herokuapp.com/api/shoppingCart",Ye=function(){var e=Object(Ue.a)(_e.a.mark((function e(t){var r;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.post(Qe,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Je=function(){var e=Object(Ue.a)(_e.a.mark((function e(t){var r;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.get("".concat(Qe,"/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(Ue.a)(_e.a.mark((function e(t){var r;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.post("".concat(Qe,"/").concat(t.cartId,"/addProduct"),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(Ue.a)(_e.a.mark((function e(t){var r;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.put("".concat(Qe,"/").concat(t.cartId,"/remove"),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(Ue.a)(_e.a.mark((function e(t){var r;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.put("".concat(Qe,"/").concat(t.cartId,"/increase"),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(Ue.a)(_e.a.mark((function e(t){var r;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.put("".concat(Qe,"/").concat(t.cartId,"/decrease"),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=Object(Ue.a)(_e.a.mark((function e(t,r){var a;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("set shopping cart activity cartid",t),e.next=3,qe.a.put("".concat(Qe,"/").concat(t,"/activity"),{data:r});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),tt=function(){var e=Object(Ue.a)(_e.a.mark((function e(t){var r;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.put("".concat(Qe,"/").concat(t,"/completed"));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rt={createNewShoppingCart:Ye,addProductToShoppingCart:$e,increaseProductQuantity:Xe,decreaseProductQuantity:Ze,removeProductFromShoppingCart:Ke,getUsersShoppingCart:Je,removeShoppingCart:function(){var e=Object(Ue.a)(_e.a.mark((function e(t){var r;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.delete("".concat(Qe,"/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setShoppingCartActivity:et,setShoppingCartCompleted:tt},at=Object(Ce.a)({field:{padding:5,left:10,borderColor:"#124eb0",position:"relative",marginBottom:10,width:"90%"},button:{display:"inline-flex",alignItems:"center",position:"relative",padding:20,paddingRight:5,left:"38%",transform:"translate(-50%, -$50%)",borderWidth:3,borderRadius:35,width:92,height:20,opacity:.95,backgroundColor:"#124eb0",fontSize:16,fontStyle:"bold",color:"white"}}),nt=Se.b().shape({userName:Se.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:Se.c().min(2,"Too Short!").max(50,"Too Long!").required("Required")}),ct=function(){var e,t,r=Oe(),a=fe((function(e){return e.shoppingCartReducer})),n=at(),c=function(e,t,r){var a="";return a+=e?e+" ":"unknown name ",a+=t?t+" ":"unknown os ",a+(r||"unknown version ")}(Ae.a.name,null===(e=Ae.a.os)||void 0===e?void 0:e.family,null===(t=Ae.a.os)||void 0===t?void 0:t.version);return Object(_.jsx)("div",{children:Object(_.jsx)(we.c,{initialValues:{userName:"",password:""},validationSchema:nt,onSubmit:function(e){Me.signIn(e.userName,e.password,c).then((function(e){if(e.token){var t={id:e.id,firstName:e.firstName,lastName:e.lastName,userName:e.userName,email:e.email,userType:e.userType,avatar:e.avatar,token:e.token,recentActivity:e.recentActivity,platformInfo:e.platformInfo},n=Object(w.a)(Object(w.a)({},t),{},{timestamp:new Date});window.localStorage.setItem("loggedUser",JSON.stringify(n)),r(M(t)),r(De(!1,"LogIn")),r(ve("Logged in as: "+t.userName,"success")),rt.getUsersShoppingCart(t.id).then((function(e){e?(console.log("login form",e),function(e){ke()({title:"Use unfinished shopping cart?",text:"Previous unfinished shopping cart found, do you want to use that one or create new one? Old will be removed permanently if new is created",icon:"info",buttons:["Create new!","Use previous!"]}).then((function(t){t?(r(Fe(e.id,e.products)),rt.setShoppingCartActivity(e.id,!0)):rt.createNewShoppingCart({products:a.cart,user:e.user,id:""}).then((function(t){rt.removeShoppingCart(e.user).then((function(e){console.log("loginform",e)})),console.log("LOG IN response",t),r(Be(t.id))}))}))}(e)):(console.log("luodaan uusi karry"),rt.createNewShoppingCart({products:a.cart,user:t.id,id:""}).then((function(e){console.log("login form new shopping cart",e),r(Be(e.id))})))}))}else r(ve("Invalid username / password","error"))}))},children:function(e){var t=e.errors,r=e.touched;return Object(_.jsxs)(we.b,{children:[Object(_.jsxs)(Ie.a,{container:!0,spacing:1,children:[Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsx)("label",{children:"Username: "})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:n.field,placeholder:"Username",type:"text",name:"userName"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:t.userName&&r.userName&&Object(_.jsx)("div",{children:t.userName})})]}),Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsx)("label",{children:"Password: "})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:n.field,placeholder:"Password",type:"password",name:"password"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:t.password&&r.password&&Object(_.jsx)("div",{children:t.password})})]})]}),Object(_.jsx)("button",{className:n.button,type:"submit",children:"Submit"})]})}})})},it=function(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}},st=Object(u.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{position:"absolute",width:450,height:170,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},header:{background:"linear-gradient(45deg, #124eb0 70%, #501573 90%)",border:0,borderRadius:30,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",textAlign:"center",height:30,marginTop:5,padding:"0 30px"}}})),ot=function(){var e=st();return Object(_.jsx)("h2",{className:e.header,children:" Log In"})},dt=function(){var e=st(),t=Object(a.useState)(it),r=Object(l.a)(t,1)[0],n=fe((function(e){return e.modalReducer.logInModal})),c=Oe();return Object(_.jsx)(Ne.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:n,onClose:function(){c(De(!n,"LogIn"))},children:Object(_.jsxs)("div",{style:r,className:e.paper,children:[Object(_.jsx)(ot,{}),Object(_.jsx)(ct,{})]})})},lt="https://verkkis.herokuapp.com/api/products",ut={getAll:function(){return qe.a.get("".concat(lt)).then((function(e){return e.data}))},addProduct:function(){var e=Object(Ue.a)(_e.a.mark((function e(t){var r;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.post("".concat(lt),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteProduct:function(){var e=Object(Ue.a)(_e.a.mark((function e(t){var r;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.delete("".concat(lt,"/").concat(t._id));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},jt=Object(Ce.a)({field:{padding:5,borderColor:"#124eb0",position:"relative",marginBottom:10,width:"90%",maxWidth:700},button:{display:"inline-flex",alignItems:"center",position:"relative",padding:20,paddingRight:75,marginTop:10,left:"38%",transform:"translate(-50%, -$50%)",borderWidth:3,borderRadius:35,width:92,height:20,opacity:.95,backgroundColor:"#124eb0",fontSize:16,fontStyle:"bold",color:"white"}}),bt=Se.b().shape({name:Se.c().required("Required"),description:Se.c(),price:Se.a().required("Required"),stock:Se.a(),image:Se.c()}),ht=function(){var e=Oe(),t=jt();return Object(_.jsx)("div",{children:Object(_.jsx)(we.c,{initialValues:{name:"",description:"",price:0,stock:0,image:""},validationSchema:bt,onSubmit:function(t){var r={name:t.name,description:t.description,price:t.price,stock:t.stock,image:t.image};ut.addProduct(r).then((function(t){var a={name:t.name,description:t.description,price:t.price,stock:t.stock,image:t.image,_id:t._id};e(function(e){var t={type:F,data:e};return function(e){e(t)}}(a));e(ve("Product "+r.name+" added","success"))}))},children:function(e){var r=e.errors,a=e.touched;return Object(_.jsxs)(we.b,{children:[Object(_.jsxs)(Ie.a,{container:!0,spacing:1,children:[Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsxs)("label",{children:["Name: ",Object(_.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:t.field,placeholder:"My New Product",type:"text",name:"name"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:r.name&&a.name&&Object(_.jsx)("div",{children:r.name})})]}),Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsx)("label",{children:"Description: "})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:t.field,placeholder:"So useless product that Wish.com should sell these (optional)",type:"text",name:"description"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:r.description&&a.description&&Object(_.jsx)("div",{children:r.description})})]}),Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsxs)("label",{children:["Price: ",Object(_.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:t.field,placeholder:"Price",type:"number",name:"price"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:r.price&&a.price&&Object(_.jsx)("div",{children:r.price})})]}),Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsx)("label",{children:"Stock: "})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:t.field,placeholder:"Stock (optional)",type:"number",name:"stock"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:r.stock&&a.stock&&Object(_.jsx)("div",{children:r.stock})})]}),Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsx)("label",{children:"Image: "})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:t.field,placeholder:"www.image.com (optional)",type:"text",name:"image"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:r.image&&a.image&&Object(_.jsx)("div",{children:r.image})})]})]}),Object(_.jsx)("button",{className:t.button,type:"submit",children:"Submit"})]})}})})},pt=function(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}},mt=Object(u.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{position:"absolute",width:650,height:350,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},header:{background:"linear-gradient(45deg, #124eb0 70%, #501573 90%)",border:0,borderRadius:30,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",textAlign:"center",height:30,marginTop:5,padding:"0 30px"}}})),xt=function(){var e=mt();return Object(_.jsx)("h2",{className:e.header,children:" Add Product "})},Ot=function(){var e=mt(),t=Object(a.useState)(pt),r=Object(l.a)(t,1)[0],n=fe((function(e){return e.modalReducer.addProductModal})),c=Oe();return Object(_.jsx)(Ne.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:n,onClose:function(){c(De(!n,"AddProduct"))},children:Object(_.jsxs)("div",{style:r,className:e.paper,children:[Object(_.jsx)(xt,{}),Object(_.jsx)(ht,{})]})})},ft=Object(Ce.a)({field:{padding:5,borderColor:"#124eb0",position:"relative",marginBottom:10,width:"90%",maxWidth:700},button:{display:"inline-flex",alignItems:"center",position:"relative",padding:20,paddingRight:75,marginTop:10,left:"42%",transform:"translate(-50%, -$50%)",borderWidth:3,borderRadius:35,width:92,height:20,opacity:.95,backgroundColor:"#124eb0",fontSize:16,fontStyle:"bold",color:"white"}}),gt=Se.b().shape({userName:Se.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),firstName:Se.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),lastName:Se.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:Se.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),email:Se.c().email("Invalid email").required("Required")}),vt=function(){var e=ft(),t=Oe();return Object(_.jsx)("div",{children:Object(_.jsx)(we.c,{initialValues:{userName:"",firstName:"",lastName:"",password:"",email:""},validationSchema:gt,onSubmit:function(e){var r={userName:e.userName,firstName:e.firstName,lastName:e.lastName,password:e.password,email:e.email,userType:"User"};Me.createUser(r).then((function(e){e?(t(De(!1,"CreateUser")),t(ve("Created user: "+r.userName,"success"))):t(ve("User creation failed","error"))})).catch((function(e){return console.log(e)}))},children:function(t){var r=t.errors,a=t.touched;return Object(_.jsxs)(we.b,{children:[Object(_.jsxs)(Ie.a,{container:!0,spacing:1,children:[Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsxs)("label",{children:["Username: ",Object(_.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:e.field,placeholder:"Username",type:"text",name:"userName"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:r.userName&&a.userName&&Object(_.jsx)("div",{children:r.userName})})]}),Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsxs)("label",{children:["Firstname: ",Object(_.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:e.field,placeholder:"Firstname",type:"text",name:"firstName"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:r.firstName&&a.firstName&&Object(_.jsx)("div",{children:r.firstName})})]}),Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsxs)("label",{children:["Lastname: ",Object(_.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:e.field,placeholder:"Lastname",type:"text",name:"lastName"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:r.lastName&&a.lastName&&Object(_.jsx)("div",{children:r.lastName})})]}),Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsxs)("label",{children:["Password: ",Object(_.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:e.field,placeholder:"Password",type:"password",name:"password"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:r.password&&a.password&&Object(_.jsx)("div",{children:r.password})})]}),Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsxs)("label",{children:["Email: ",Object(_.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:e.field,placeholder:"example@gmail.com",type:"text",name:"email"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:r.email&&a.email&&Object(_.jsx)("div",{children:r.email})})]})]}),Object(_.jsx)("button",{className:e.button,type:"submit",children:"Submit"})]})}})})},yt=function(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}},Nt=Object(u.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{position:"absolute",width:650,height:370,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},header:{background:"linear-gradient(45deg, #124eb0 70%, #501573 90%)",border:0,borderRadius:30,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",textAlign:"center",height:30,marginTop:5,padding:10,marginBottom:30}}})),wt=function(){var e=Nt();return Object(_.jsx)("h2",{className:e.header,children:" Create User "})},Ct=function(){var e=Nt(),t=Object(a.useState)(yt),r=Object(l.a)(t,1)[0],n=Oe(),c=fe((function(e){return e.modalReducer.createUserModal}));return Object(_.jsx)(Ne.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:c,onClose:function(){n(De(!1,"CreateUser"))},children:Object(_.jsxs)("div",{style:r,className:e.paper,children:[Object(_.jsx)(wt,{}),Object(_.jsx)(vt,{})]})})},It=Object(u.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},title:{marginRight:e.spacing(10)},buttons:{display:"flex",marginLeft:"auto",marginRight:-12,fontSize:15},login:{margin:e.spacing(2),fontSize:15,flexDirection:"column"},addProductIcon:{height:30,width:30},whiteIcon:{color:"white",fontSize:30},searchIcon:{color:"white"}}})),St=function(e){var t=e.user,r=Object(a.useState)(""),n=Object(l.a)(r,2),c=n[0],i=n[1],s=It(),d=Oe(),u=fe((function(e){return e.shoppingCartReducer.cartId})),w=!!t;return Object(_.jsx)("div",{children:Object(_.jsxs)(j.a,{position:"static",color:"primary",children:[Object(_.jsxs)(b.a,{children:[Object(_.jsx)(o.b,{to:"/",children:Object(_.jsx)(h.a,{edge:"start",className:s.menuButton,color:"inherit","aria-label":"menu",children:Object(_.jsx)(f.a,{})})}),Object(_.jsx)(p.a,{variant:"h6",className:s.title,children:"Verkkokauppa"}),Object(_.jsx)(m.a,{placeholder:"Search products",onChange:function(e){e.preventDefault(),i(e.target.value)},style:{backgroundColor:"#dae1f0"},size:"small",variant:"outlined",value:c}),Object(_.jsx)(h.a,{onClick:function(){d(ye(c))},children:Object(_.jsx)(g.a,{className:s.searchIcon})}),Object(_.jsx)(h.a,{onClick:function(){return i(""),void d(ye(""))},children:Object(_.jsx)(x.a,{title:"Clear searchbar",children:Object(_.jsx)(v.a,{className:s.searchIcon})})}),Object(_.jsxs)("div",{className:s.buttons,children:["Admin"===(null===t||void 0===t?void 0:t.userType)&&Object(_.jsx)(h.a,{onClick:function(){return d(De(!0,"AddProduct"))},color:"inherit",children:Object(_.jsx)(x.a,{title:"Add product",children:Object(_.jsx)(y.a,{className:s.addProductIcon})})}),Object(_.jsx)("div",{children:Object(_.jsx)(O.a,{onClick:function(){return w?(rt.setShoppingCartActivity(u,!1),d(M()),d(Ge()),d(ve("Have a nice day","success")),void window.localStorage.removeItem("loggedUser")):d(De(!0,"LogIn"))},color:"inherit",children:Object(_.jsx)(p.a,{variant:"h6",className:s.login,children:w?"Log out":"Login"})})}),!t&&Object(_.jsx)("div",{children:Object(_.jsx)(O.a,{onClick:function(){return d(De(!0,"CreateUser"))},color:"inherit",children:Object(_.jsx)(p.a,{variant:"h6",className:s.login,children:"Create User"})})}),Object(_.jsx)("div",{children:Object(_.jsx)(o.b,{to:"/shoppingCart",children:Object(_.jsx)(h.a,{className:s.whiteIcon,children:Object(_.jsx)(N.a,{style:{fontSize:30,marginTop:5}})})})}),t&&Object(_.jsx)("div",{children:Object(_.jsx)(q,{})})]})]}),Object(_.jsx)(dt,{}),Object(_.jsx)(Ot,{}),Object(_.jsx)(Ct,{})]})})},Rt=r(362),kt=r(363),Tt=r(366),At=r(365),Pt=r(364),_t=r(163),Ut=r.n(_t),Et=Object(u.a)({root:{width:170,marginRight:20},centerText:{textAlign:"center"},media:{height:160},overflow:{maxWidth:170,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),qt=function(e){var t=e.product,r=Et(),a=Oe(),n=fe((function(e){return e.userReducer.user})),c=fe((function(e){return e.shoppingCartReducer.cartId})),i=fe((function(e){return e.shoppingCartReducer.cart})),s=function(){ut.deleteProduct(t).catch((function(e){return console.log(e)})),a(function(e){var t={type:H,data:e};return function(e){e(t)}}(t)),a(ve("Removed "+t.name,"info"))},o=function(e){if(n)if(c){rt.addProductToShoppingCart({product:e,userId:n.id,cartId:c}).then((function(){a(ze(e,c))})).catch((function(e){return console.log(e)}))}else{console.log("cart id unknown"),a(ze(e,c));var t=[e];rt.createNewShoppingCart({products:t,user:n.id,id:""}).then((function(e){a(Be(e.id))})).catch((function(e){return console.log(e)}))}else a(ze(e,c))},d=function(e){n?rt.increaseProductQuantity({product:e,userId:n.id,cartId:c}).then((function(t){console.log(t),a(He(e,c))})):a(He(e,c))};return Object(_.jsxs)(Rt.a,{className:r.root,children:[Object(_.jsxs)(kt.a,{children:[Object(_.jsx)(Pt.a,{className:r.media,image:t.image}),Object(_.jsxs)(At.a,{children:[Object(_.jsxs)(p.a,{className:"".concat(r.overflow," ").concat(r.centerText),style:{fontSize:16},gutterBottom:!0,variant:"h6",component:"h2",children:[t.name," ",Object(_.jsx)("br",{})," ",t.price,"\u20ac"]}),Object(_.jsx)(p.a,{className:"".concat(r.overflow," ").concat(r.centerText),variant:"body2",color:"textSecondary",component:"p",children:t.description})]})]}),Object(_.jsxs)(Tt.a,{children:[Object(_.jsx)(O.a,{size:"small",color:"primary",onClick:function(){return function(){var e=i.some((function(e){return e._id===t._id}));console.log("shopping cart: ",i);var r=i.find((function(e){return e._id===t._id}));r||(r=Object(w.a)(Object(w.a)({},t),{},{quantity:1})),console.log("cart id (Product.tsx)",c),e?d(r):o(r)}()},children:"Lis\xe4\xe4 ostoskoriin"}),"Admin"===(null===n||void 0===n?void 0:n.userType)&&Object(_.jsx)(h.a,{onClick:function(){return s()},children:Object(_.jsx)(x.a,{title:"Remove product from database",children:Object(_.jsx)(Ut.a,{})})})]})]})},Lt=Object(u.a)({root:{display:"flex",paddingLeft:15}}),Mt=function(){var e=Lt(),t=fe((function(e){return e.productReducer.products})),r=fe((function(e){return e.filterReducer.productFilter}));if(0===t.length)return null;var a=0===r.length?t:t.filter((function(e){return e.name.toLowerCase().includes(r.toLowerCase())}));return 0===a.length?Object(_.jsx)("div",{children:Object(_.jsx)(p.a,{variant:"h5",children:" No results with current filter "})}):Object(_.jsx)("div",{className:e.root,children:a.map((function(e){return Object(_.jsx)(qt,{product:e},e._id)}))})},Dt=r(381),Bt=r(386),Ft=r(367),zt=Object(Ce.a)({field:{padding:5,borderColor:"#124eb0",position:"relative",marginBottom:10,width:"90%",maxWidth:700},button:{display:"inline-flex",alignItems:"center",position:"relative",padding:20,paddingRight:75,marginTop:10,left:"42%",transform:"translate(-50%, -$50%)",borderWidth:3,borderRadius:35,width:92,height:20,opacity:.95,backgroundColor:"#124eb0",fontSize:16,fontStyle:"bold",color:"white"}}),Ht=Se.b().shape({userName:Se.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),firstName:Se.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),lastName:Se.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:Se.c(),email:Se.c().email("Invalid email").required("Required"),avatar:Se.c()}),Wt=function(){var e=zt(),t=Oe(),r=fe((function(e){return e.userReducer.user}));return r?Object(_.jsx)("div",{children:Object(_.jsx)(we.c,{initialValues:{userName:r.userName,firstName:r.firstName,lastName:r.lastName,password:"",email:r.email,avatar:r.avatar},validationSchema:Ht,onSubmit:function(e){var a={userName:e.userName,firstName:e.firstName,lastName:e.lastName,password:e.password,email:e.email,avatar:e.avatar};Me.modifyUser(a).then((function(e){e?(t(De(!1,"ModifyUser")),t(M(Object(w.a)(Object(w.a)({},a),{},{id:r.id,userType:r.userType,token:r.token,recentActivity:r.recentActivity,platformInfo:r.platformInfo}))),window.localStorage.setItem("loggedUser",JSON.stringify(Object(w.a)(Object(w.a)({},a),{},{id:r.id,userType:r.userType,token:r.token})))):t(ve("User modification failed","error"))})).catch((function(e){return console.log(e)}))},children:function(t){var r=t.errors,a=t.touched;return Object(_.jsxs)(we.b,{children:[Object(_.jsxs)(Ie.a,{container:!0,spacing:1,children:[Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsxs)("label",{children:["Username: ",Object(_.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:e.field,placeholder:"Username",type:"text",name:"userName"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:r.userName&&a.userName&&Object(_.jsx)("div",{children:r.userName})})]}),Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsxs)("label",{children:["Firstname: ",Object(_.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:e.field,placeholder:"Firstname",type:"text",name:"firstName"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:r.firstName&&a.firstName&&Object(_.jsx)("div",{children:r.firstName})})]}),Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsxs)("label",{children:["Lastname: ",Object(_.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:e.field,placeholder:"Lastname",type:"text",name:"lastName"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:r.lastName&&a.lastName&&Object(_.jsx)("div",{children:r.lastName})})]}),Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsx)("label",{children:"Password: "})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:e.field,placeholder:"If password field is left empty, it will not be changed",type:"password",name:"password"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:r.password&&a.password&&Object(_.jsx)("div",{children:r.password})})]}),Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsxs)("label",{children:["Email: ",Object(_.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:e.field,placeholder:"example@gmail.com",type:"text",name:"email"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:r.email&&a.email&&Object(_.jsx)("div",{children:r.email})})]}),Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsx)("label",{children:"Avatar: "})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:e.field,placeholder:"www.avatar/org/avatar.png (optional)",type:"text",name:"avatar"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:r.avatar&&a.avatar&&Object(_.jsx)("div",{children:r.avatar})})]})]}),Object(_.jsx)("button",{className:e.button,type:"submit",children:"Submit"})]})}})}):Object(_.jsx)("div",{})},Vt=function(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}},Gt=Object(u.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{position:"absolute",width:650,height:430,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},header:{background:"linear-gradient(45deg, #124eb0 70%, #501573 90%)",border:0,borderRadius:30,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",textAlign:"center",height:30,marginTop:5,padding:10,marginBottom:30}}})),Qt=function(){var e=Gt();return Object(_.jsx)("h2",{className:e.header,children:" Modify user info "})},Yt=function(){var e=Gt(),t=Object(a.useState)(Vt),r=Object(l.a)(t,1)[0],n=fe((function(e){return e.modalReducer.modifyUserInfoModal})),c=Oe();return Object(_.jsx)(Ne.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:n,onClose:function(){c(De(!n,"ModifyUser"))},children:Object(_.jsxs)("div",{style:r,className:e.paper,children:[Object(_.jsx)(Qt,{}),Object(_.jsx)(Wt,{})]})})},Jt=function(e){if(!e)return"";var t=new Date(e),r=t.getDate().toString(),a="".concat(t.getMonth()+1),n=t.getFullYear().toString(),c=t.getHours().toString(),i=t.getMinutes();return r+"."+a+"."+n+"  "+c+":"+(i<10?"0"+i.toString():i.toString())},$t=Object(u.a)({nameAndIcon:{width:"50%",margin:"0 auto",flexGrow:1},column:{display:"flex",flexDirection:"column"},header:{textAlign:"center",height:20,color:"white",borderRadius:"15%",backgroundColor:"#2525b8"}}),Kt={bgcolor:"background.paper",m:1},Xt=function(e){var t=e.user,r=$t(),a=Oe();if(!t)return Object(_.jsx)("div",{});for(var n=function(e){var t=e.text;return Object(_.jsx)(p.a,{className:"".concat(r.header),children:t})},c=[],i=[],s=0,o=t.recentActivity.length-1;o>=0&&(c.push(Jt(t.recentActivity[o])),i.push(t.platformInfo[o]),4!==++s);o--);return Object(_.jsxs)("div",{children:[t&&Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:1,children:[Object(_.jsx)(Ie.a,{item:!0,xs:3,children:Object(_.jsx)(Dt.a,Object(w.a)(Object(w.a)({borderRight:1,borderColor:"primary.main",style:{height:270}},Kt),{},{children:Object(_.jsxs)("div",{className:r.nameAndIcon,children:[t.avatar?Object(_.jsx)(Bt.a,{style:{backgroundColor:"white",marginLeft:15,width:120,height:120},src:t.avatar}):Object(_.jsx)(Bt.a,{style:{backgroundColor:"white",marginLeft:15,width:120,height:120},children:Object(_.jsx)(T.a,{style:{color:"#094ebd",width:120,height:120}})}),Object(_.jsxs)(p.a,{style:{marginLeft:5},variant:"h6",children:[t.firstName," \xa0 ",t.lastName]})]})}))}),Object(_.jsxs)("div",{className:r.column,children:[Object(_.jsx)(Ie.a,{item:!0,xs:12,children:Object(_.jsxs)(Dt.a,Object(w.a)(Object(w.a)({borderBottom:1,borderColor:"primary.main",style:{height:120,width:600}},Kt),{},{children:[Object(_.jsx)(n,{text:"User info"}),Object(_.jsxs)(p.a,{variant:"subtitle1",children:["Email: ",t.email," ",Object(_.jsx)("br",{}),"Firstname: ",t.firstName," ",Object(_.jsx)("br",{}),"Lastname: ",t.lastName,Object(_.jsx)(h.a,{onClick:function(){return a(De(!0,"ModifyUser"))},style:{position:"relative",left:10,marginTop:-10},children:Object(_.jsx)(x.a,{title:"Modify user info",children:Object(_.jsx)(Ft.a,{})})}),Object(_.jsx)("br",{})]})]}))}),Object(_.jsx)(Ie.a,{item:!0,xs:12,children:Object(_.jsxs)(Dt.a,Object(w.a)(Object(w.a)({borderBottom:1,borderColor:"primary.main",style:{height:120,width:600}},Kt),{},{children:[Object(_.jsx)(n,{text:"Recent activity"}),c.map((function(e,t){return Object(_.jsxs)(p.a,{children:[e,": ",i[t]]},t)}))]}))})]})]}),Object(_.jsx)(Yt,{})]})},Zt=r(370),er=r(371),tr=r(94),rr=r(96),ar=r(368),nr=r(369),cr=r(372),ir=r(373),sr=r(374),or=r(375),dr=r(376),lr=r(167),ur=Object(Ce.a)({root:{backgroundColor:tr.a[400],"& > *":{borderBottom:"unset"}},header:{backgroundColor:rr.a[500]},mainRow:{backgroundColor:rr.a[200]},row:{"&:hover":{backgroundColor:rr.a[200]}},body:{backgroundColor:tr.a[200]}}),jr=function(e){var t=e.order,r=Object(a.useState)(),n=Object(l.a)(r,2),c=n[0],i=n[1],s=ur();return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)(ar.a,{className:"".concat(s.root),children:[Object(_.jsx)(nr.a,{children:Object(_.jsx)(h.a,{size:"small",onClick:function(){return i(!c)},children:c?Object(_.jsx)(Zt.a,{}):Object(_.jsx)(er.a,{})})}),Object(_.jsxs)(nr.a,{component:"th",scope:"row",children:[" ",Jt(t.completionDate)," "]}),Object(_.jsx)(nr.a,{}),Object(_.jsx)(nr.a,{}),Object(_.jsx)(nr.a,{}),Object(_.jsx)(nr.a,{})]}),Object(_.jsx)(ar.a,{children:Object(_.jsx)(nr.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:Object(_.jsx)(cr.a,{in:c,timeout:"auto",unmountOnExit:!0,children:Object(_.jsxs)(Dt.a,{margin:1,children:[Object(_.jsxs)(p.a,{variant:"h6",gutterBottom:!0,component:"div",children:["Order total price: \xa0 ",t.products.reduce((function(e,t){return e+t.price*t.quantity}),0)]}),Object(_.jsxs)(ir.a,{size:"small","aria-label":"purchases",children:[Object(_.jsx)(sr.a,{children:Object(_.jsxs)(ar.a,{className:s.body,children:[Object(_.jsx)(nr.a,{children:"Name"}),Object(_.jsx)(nr.a,{children:"Price"}),Object(_.jsx)(nr.a,{align:"right",children:"Amount"}),Object(_.jsx)(nr.a,{align:"right",children:"Total price"})]})}),Object(_.jsx)(or.a,{className:s.body,children:t.products.map((function(e){return Object(_.jsxs)(ar.a,{className:s.row,children:[Object(_.jsx)(nr.a,{component:"th",scope:"row",children:e.name}),Object(_.jsx)(nr.a,{children:e.price}),Object(_.jsx)(nr.a,{align:"right",children:e.quantity}),Object(_.jsx)(nr.a,{align:"right",children:Math.round(e.quantity*e.price*100)/100})]},e._id)}))})]})]})})})})]})},br=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),r=t[0],n=t[1],c=ur(),i=fe((function(e){return e.userReducer.user}));return i?(Object(a.useEffect)((function(){Me.getUsersCompletedShoppingcarts(i.id).then((function(e){n(e)}))}),[]),Object(_.jsx)(dr.a,{component:lr.a,children:Object(_.jsxs)(ir.a,{"aria-label":"collapsible table",children:[Object(_.jsx)(sr.a,{children:Object(_.jsxs)(ar.a,{className:c.header,children:[Object(_.jsx)(nr.a,{}),Object(_.jsx)(nr.a,{children:"Date Of Order"}),Object(_.jsx)(nr.a,{align:"left"}),Object(_.jsx)(nr.a,{align:"right"}),Object(_.jsx)(nr.a,{align:"right"}),Object(_.jsx)(nr.a,{align:"right"})]})}),Object(_.jsx)(or.a,{className:c.body,children:r.map((function(e){return Object(_.jsx)(jr,{order:e},e.id)}))})]})})):Object(_.jsx)("div",{})},hr=r(379),pr=Object(Ce.a)({field:{padding:5,borderColor:"#124eb0",position:"relative",marginBottom:10,width:"90%",maxWidth:700},button:{display:"inline-flex",alignItems:"center",position:"relative",padding:20,paddingRight:75,marginTop:10,paddingBottom:20,transform:"translate(-50%, -$50%)",borderWidth:3,borderRadius:10,width:92,height:20,opacity:.95,backgroundColor:"#124eb0",fontSize:16,fontStyle:"bold",color:"white"},logInText:{position:"relative",marginLeft:20,marginTop:20}}),mr=Se.b().shape({firstName:Se.c().required("Required"),lastName:Se.c().required("Required"),address:Se.c().required("Required")}),xr=function(){var e=Oe(),t=pr(),r=fe((function(e){return e.userReducer.user})),a=fe((function(e){return e.shoppingCartReducer}));return Object(_.jsx)("div",{children:Object(_.jsx)(we.c,{initialValues:{firstName:r?r.firstName:"",lastName:r?r.lastName:"",address:""},validationSchema:mr,onSubmit:function(t){t.firstName,t.lastName;var n=t.address;r&&rt.setShoppingCartCompleted(a.cartId).then((function(t){t?(console.log(t),e(Ge()),e(ve("Delivering products to "+n,"success"))):(console.log(t),e(ve("Unexpected error","error")))}))},children:function(e){var a=e.errors,n=e.touched;return Object(_.jsxs)(we.b,{children:[Object(_.jsxs)(Ie.a,{container:!0,spacing:1,children:[Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsxs)("label",{children:["First name: ",Object(_.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:t.field,placeholder:"First name",type:"text",name:"firstName"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:a.firstName&&n.firstName&&Object(_.jsx)("div",{children:a.firstName})})]}),Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsxs)("label",{children:["Last name: ",Object(_.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:t.field,placeholder:"Last name",type:"text",name:"lastName"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:a.lastName&&n.lastName&&Object(_.jsx)("div",{children:a.lastName})})]}),Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:2,children:Object(_.jsxs)("label",{children:["Address: ",Object(_.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(_.jsx)(Ie.a,{item:!0,xs:9,children:Object(_.jsx)(we.a,{className:t.field,placeholder:"Address",type:"text",name:"address"})}),Object(_.jsx)(Ie.a,{item:!0,xs:1,children:a.address&&n.address&&Object(_.jsx)("div",{children:a.address})})]})]}),Object(_.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(_.jsx)("button",{disabled:!r,className:t.button,type:"submit",children:" Submit "}),!r&&Object(_.jsx)(p.a,{variant:"subtitle1",className:t.logInText,children:" Please sign in first "})]})]})}})})},Or=r(377),fr=r(378),gr=r(95),vr=Object(Ce.a)({container:{display:"flex",flexDirection:"row"},card:{width:380,maxHeight:140,marginBottom:15},details:{display:"flex",flexDirection:"column",height:120},content:{width:190,height:20,flex:"1 0 auto",backgroundColor:tr.a[200]},info:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},image:{width:"100%"},contentAndImage:{display:"flex",maxHeight:120},deleteButton:{display:"flex",backgroundColor:gr.a[400],justifyContent:"center"},iconButtons:{position:"relative",top:50}}),yr=function(e){var t,r=e.product,a=vr(),n=Oe(),c=fe((function(e){return e.shoppingCartReducer.cartId})),i=fe((function(e){return e.userReducer.user}));t=i?i.id:"";return Object(_.jsxs)("div",{className:a.container,children:[Object(_.jsxs)(Rt.a,{className:a.card,children:[Object(_.jsxs)("div",{className:a.contentAndImage,children:[Object(_.jsx)("div",{className:a.details,children:Object(_.jsxs)(At.a,{className:a.content,children:[Object(_.jsxs)(p.a,{className:a.info,component:"h6",variant:"h6",children:[r.name," x ",r.quantity.toString()]}),Object(_.jsx)(p.a,{className:a.info,variant:"subtitle1",color:"textSecondary",children:r.description}),Object(_.jsxs)(p.a,{variant:"subtitle1",color:"textSecondary",children:[r.price,"\u20ac"]})]})}),Object(_.jsx)(Pt.a,{className:a.image,image:r.image})]}),Object(_.jsx)("div",{children:Object(_.jsx)(kt.a,{className:a.deleteButton,onClick:function(){return function(e){i?rt.removeProductFromShoppingCart({cartId:c,userId:t,product:e}).then((function(){n(Ve(e,c))})):n(Ve(e,c))}(r)},children:"Remove item(s) from cart"})})]}),Object(_.jsxs)("div",{className:a.iconButtons,children:[Object(_.jsx)(h.a,{onClick:function(){return function(e){i?rt.decreaseProductQuantity({cartId:c,userId:t,product:e}).then((function(){n(We(e,c))})):n(We(e,c))}(r)},children:Object(_.jsx)(Or.a,{})}),Object(_.jsx)(h.a,{onClick:function(){return function(e){i?rt.increaseProductQuantity({cartId:c,userId:t,product:e}).then((function(){n(He(e,c))})):n(He(e,c))}(r)},children:Object(_.jsx)(fr.a,{style:{marginLeft:-10}})})]})]})},Nr=Object(Ce.a)({box:{maxHeight:350},shoppingCartAndFormBox:{margin:25,borderRadius:15},cart:{margin:25,borderRadius:5,height:300},container:{marginTop:15},deleteIcon:{position:"relative",top:-15},form:{borderWidth:1,marginTop:75,padding:10},empty:{position:"relative",top:"50%",left:"25%"}}),wr=function(){var e=Nr(),t=Oe(),r=fe((function(e){return e.shoppingCartReducer.cart})),a=fe((function(e){return e.userReducer.user})),n=(null===a||void 0===a?void 0:a.id)||"",c=fe((function(e){return e.shoppingCartReducer.cartId}));return console.log("shopping cart",r),Object(_.jsx)(Dt.a,{className:e.box,border:1,children:Object(_.jsxs)(Ie.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(Ie.a,{item:!0,xs:5,children:Object(_.jsx)(Dt.a,{border:1,className:e.cart,children:0===r.length?Object(_.jsx)(p.a,{variant:"h5",className:e.empty,children:" Your Shopping Cart Is Empty "}):Object(_.jsxs)("div",{style:{maxHeight:300,overflow:"auto"},children:[r.map((function(r){if(r.quantity>0)return Object(_.jsx)(hr.a,{className:e.container,maxWidth:"sm",children:Object(_.jsx)(yr,{product:r},r._id)},r._id);!function(e){a?rt.removeProductFromShoppingCart({cartId:c,userId:n,product:e}).then((function(){t(Ve(e,c))})).catch((function(e){return console.log(e)})):t(Ve(e,c))}(r)})),Object(_.jsxs)(p.a,{variant:"h5",style:{marginLeft:20},children:["Total price: ",r.reduce((function(e,t){return e+t.price*t.quantity}),0)]})]})})}),Object(_.jsx)(Ie.a,{item:!0,xs:7,children:Object(_.jsx)(Dt.a,{border:1,className:e.shoppingCartAndFormBox,children:Object(_.jsx)("div",{className:e.form,children:Object(_.jsx)(xr,{})})})})]})})},Cr=r(382),Ir=function(e){var t=e.type,r=e.message;switch(t){case"success":return Object(_.jsxs)(Cr.a,{elevation:6,variant:"filled",severity:"success",children:[" ",r," "]});case"error":return Object(_.jsxs)(Cr.a,{elevation:6,variant:"filled",severity:"error",children:[" ",r," "]});default:return Object(_.jsxs)(Cr.a,{elevation:6,variant:"filled",severity:"info",children:[" ",r," "]})}},Sr=Object(u.a)({root:{width:"15%",position:"relative",marginBottom:15,left:15}}),Rr=function(e){var t=e.type,r=e.message,a=e.tts,n=void 0===a?5e3:a,c=Sr(),i=Oe();return setTimeout((function(){return i(function(){var e={type:J,notificationType:"error",data:""};return function(t){t(e)}}())}),n),Object(_.jsx)("div",{className:c.root,children:Object(_.jsx)(Ir,{type:t,message:r})})},kr=function(){var e=Oe(),t=fe((function(e){return e.userReducer.user})),r=fe((function(e){return e.notificationReducer})),n=fe((function(e){return e.shoppingCartReducer}));return console.log("shoppingCart",n),Object(a.useEffect)((function(){e(function(){var e=Object(Ue.a)(_e.a.mark((function e(t){var r;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut.getAll();case 2:r=e.sent,t({type:z,data:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(a.useEffect)((function(){var t,r=window.localStorage.getItem("loggedUser");if(r){var a=(t=ie,function(e){var r=JSON.parse(e);return t(r)?{parsed:r,hasError:!1}:{hasError:!0}})(r);if(a.hasError)console.log("error at parsed user");else if(function(e){var t=new Date(e),r=new Date;return console.log("current:",r.getHours(),".",r.getMinutes(),"d:",t.getHours(),".",t.getMinutes()),r.getHours()-t.getHours()<1}(a.parsed.timestamp))console.log("valid timestamp"),e(M(a.parsed)),rt.getUsersShoppingCart(a.parsed.id).then((function(t){t?e(Fe(t.id,t.products)):rt.createNewShoppingCart({products:n.cart,user:a.parsed.id,id:n.cartId}).then((function(t){e(Be(t.id))}))}));else console.log("invalid timestamp"),rt.setShoppingCartActivity(n.cartId,!1),e(M()),e(Ge()),window.localStorage.removeItem("loggedUser")}}),[]),Object(_.jsx)("div",{children:Object(_.jsxs)(o.a,{children:[Object(_.jsx)(St,{user:t}),Object(_.jsx)("br",{}),r.visible&&Object(_.jsx)("div",{children:Object(_.jsx)(Rr,{type:r.type,message:r.message})}),Object(_.jsx)(d.c,{children:Object(_.jsx)(d.a,{path:"/account",render:function(){return Object(_.jsx)(Xt,{user:t})}})}),Object(_.jsx)(d.c,{children:Object(_.jsx)(d.a,{path:"/pastOrders",render:function(){return Object(_.jsx)(br,{})}})}),Object(_.jsx)(d.c,{children:Object(_.jsx)(d.a,{path:"/shoppingCart",render:function(){return Object(_.jsx)(wr,{})}})}),Object(_.jsx)(d.c,{children:Object(_.jsx)(d.a,{exact:!0,path:"/",render:function(){return Object(_.jsx)(Mt,{})}})})]})})};i.a.render(Object(_.jsx)(s.a,{store:ge,children:Object(_.jsx)(kr,{})}),document.getElementById("root"))}},[[309,1,2]]]);
//# sourceMappingURL=main.b80745c0.chunk.js.map