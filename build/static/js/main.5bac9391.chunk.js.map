{"version":3,"sources":["store/User/actionTypes.ts","store/ActiveProduct/actionTypes.ts","forms/product/ProductForm.tsx","forms/User/UserForm.tsx","utils/DateParser.ts","components/Product.tsx","store/ShoppingCart/actionCreators.ts","store/modal/actionCreators.ts","components/ProductInfo.tsx","utils/RoundToHalf.ts","components/Account.tsx","components/ShoppingCartCard.tsx","forms/product/ModifyProductForm.tsx","modals/ModifyProductModal.tsx","forms/User/ModifyUserForm.tsx","modals/ModifyUserInfoModal.tsx","forms/User/ModifyAvatar.tsx","modals/ModifyUserAvatarModal.tsx","services/shoppingCartService.ts","store/Notification/actionCreators.ts","components/AccountMenu.tsx","store/Filter/actionCreators.ts","forms/User/LogInForm.tsx","utils/platformParser.ts","modals/LogInModal.tsx","forms/product/AddProductForm.tsx","modals/AddProductModal.tsx","forms/User/CreateUserForm.tsx","modals/CreateUserModal.tsx","components/Navibar.tsx","components/ProductListPage.tsx","components/PastOrders.tsx","forms/shoppingCart/ShoppingCartForm.tsx","components/ShoppingCart.tsx","UI/Notification.tsx","components/Sidebar.tsx","App.tsx","utils/ValidTimeStamp.ts","index.tsx","forms/formStyles.ts","typeGuards.ts","store/User/actionCreators.ts","store/ShoppingCart/actionTypes.ts","services/userService.ts","store/Product/reducer.ts","store/User/reducer.ts","store/Notification/reducer.ts","store/ShoppingCart/reducer.ts","store/modal/reducer.ts","store/Filter/reducer.ts","store/ActiveProduct/reducer.ts","store/rootReducer.ts","services/productService.ts","store/Product/actionCreators.ts","utils/ArrayBufferToBase64.ts","store/Product/actionTypes.ts","store/ActiveProduct/actionCreators.ts","store/Notification/actionTypes.ts","store/Filter/actionTypes.ts"],"names":["LOG_IN","SET_ACTIVE_PRODUCT","ProductForm","errors","touched","setFieldValue","setImage","image","setTags","submitForm","tags","classes","useStyles","container","spacing","item","xs","style","color","className","field","placeholder","type","name","description","price","stock","border","multiple","backgroundColor","disableUnderline","value","onChange","event","target","renderValue","selected","display","flexWrap","map","label","marginLeft","tag","undefined","currentTarget","files","onClick","height","width","src","URL","createObjectURL","alt","button","UserForm","userName","firstName","lastName","password","email","parseDate","date","d","Date","day","getDate","toString","month","getMonth","year","getFullYear","hour","getHours","min","getMinutes","makeStyles","root","maxHeight","marginRight","centerText","textAlign","media","overflow","maxWidth","whiteSpace","textOverflow","Product","product","dispatch","useAppDispatch","user","useAppSelector","state","userReducer","cartId","shoppingCartReducer","shoppingCart","cart","addProductToShoppingCart","shoppingCartProduct","shoppingCartService","userId","_id","then","addNewProductToShoppingCart","catch","e","console","log","newProduct","createNewShoppingCart","products","id","response","updateShoppingCartProductQuantity","increaseProductQuantity","increaseQuantity","buffer","Buffer","from","data","arrayBufferToBase64","to","textDecoration","setActiveProduct","window","localStorage","setItem","fontSize","gutterBottom","variant","component","disabled","size","isProductAlreadyInCart","some","p","find","quantity","handleShoppingCart","userType","productService","deleteProduct","removeProduct","setNotification","title","action","actionTypes","retrieveOldShoppingCart","decreaseQuantity","clearShoppingCart","handleModal","modal","flexDirection","box","borderRadius","card","availability","padding","priceTag","marginBottom","chip","marginTop","ratedTag","transform","ProductInfo","activeProductReducer","allProducts","productReducer","useEffect","getItem","storedProduct","hasUserRatedTheProduct","ratings","readOnly","length","sum","reduce","prev","cur","roundToHalf","productRating","precision","emptyIcon","_event","number","userService","addRatingForProduct","res","productWithNewRatings","r","logIn","handleRating","position","top","justifyContent","isProductInCart","converted","decimal","parseInt","Math","round","nameAndIcon","margin","flexGrow","avatar","column","header","defaultProps","bgcolor","m","Account","Header","text","dates","platformInfo","counter","i","recentActivity","push","borderRight","borderLeft","borderColor","borderBottom","left","index","details","content","flex","grey","info","contentAndImage","deleteButton","red","iconButtons","ShoppingCartCard","removeProductFromShoppingCart","removeProductFromCart","decreaseProductQuantity","decreaseQuantityFromCart","increaseQuantityFromCart","SignupSchema","Yup","shape","required","ModifyProductForm","useState","initialValues","validationSchema","onSubmit","values","modifyProduct","initializeProducts","getModalStyle","theme","alignItems","paper","palette","background","boxShadow","shadows","ModifyProductModal","modalStyle","modalOpen","modalReducer","modifyProductModal","Modal","aria-labelledby","aria-describedby","open","onClose","max","ModifyUserForm","loggedUser","modifiedUser","modifyUser","token","JSON","stringify","ModifyUserInfoModal","modifyUserInfoModal","ModifyImageSchema","ModifyAvatar","modifyAvatar","Grid","ModifyUserAvatarModal","modifyUserAvatarModal","baseURL","a","axios","post","request","getUsersShoppingCart","get","productToAdd","productToRemove","put","setShoppingCartActivity","setShoppingCartCompleted","removeShoppingCart","delete","notificationType","notificationTypeCheck","hideNotification","StyledMenu","withStyles","props","elevation","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","StyledMenuItem","primary","main","common","white","MenuItem","AccountMenu","React","anchorEl","setAnchorEl","IconButton","AccountCircle","keepMounted","Boolean","ListItemIcon","Person","ListItemText","ShoppingBasket","setFilter","setTag","LogInForm","cartState","family","version","string","platformParser","platform","os","signIn","credentials","storeInfo","timestamp","swal","icon","buttons","findPrevious","usePreviousShoppingCart","LogInModal","logInModal","AddProductForm","addProduct","addedProduct","AddProductModal","addProductModal","CreateUserForm","newUser","createUser","CreateUserModal","createUserModal","menuButton","login","addProductIcon","whiteIcon","searchIcon","Navibar","searchText","setSearchText","redirect","setRedirect","loggedIn","AppBar","Toolbar","edge","aria-label","Menu","Typography","TextField","preventDefault","Search","Tooltip","Backspace","AddCircleOutline","Button","removeItem","paddingLeft","ProductListPage","filter","filterReducer","createNewRow","filteredByName","productFilter","toLowerCase","includes","filteredProducts","tagFilter","mainRow","blue","row","body","Row","order","setOpen","TableRow","TableCell","KeyboardArrowUp","KeyboardArrowDown","scope","completionDate","paddingBottom","paddingTop","colSpan","Collapse","in","timeout","unmountOnExit","Box","Table","TableHead","align","TableBody","PastOrders","orders","setOrders","sortedOrders","sort","o1","o2","getTime","sortOrders","getUsersCompletedShoppingcarts","TableContainer","Paper","ShippingSchema","address","ShoppingCartForm","shippingInfo","userCheck","logInText","shoppingCartAndFormBox","deleteIcon","form","borderWidth","empty","ShoppingCart","Container","Alert","message","severity","Notification","tts","setTimeout","createStyles","appMenu","menuItem","menuIcon","Sidebar","List","disablePadding","ListItem","divider","AllInclusive","Build","FreeBreakfast","Home","BarChart","App","notification","notificationReducer","parsedUser","safeJsonParse","isCredentialsWithTimestamp","hasError","validTimeStamp","parsed","visible","path","render","exact","ReactDOM","store","document","getElementById","paddingRight","opacity","fontStyle","setTagActionCheck","object","addOrRemoveActionCheck","newShoppingCartCheck","retrieveOldShoppingCartCheck","clearShoppingCartCheck","o","guard","parse","INCREASE_QUANTITY","DECREASE_QUANTITY","REMOVE_PRODUCT_FROM_CART","CLEAR_SHOPPINGCART","CREATE_NEW_SHOPPING_CART","RETRIEVE_OLD_SHOPPING_CART","username","fd","FormData","append","config","headers","productId","initialState","reducer","concat","list","lisattava","uusi","rootReducer","combineReducers","configureStore","useDispatch","useSelector","req","modifyProductImage","getAll","binary","slice","call","Uint8Array","forEach","b","String","fromCharCode","btoa","ADD_PRODUCT","GET_PRODUCTS","REMOVE_PRODUCT","SET_NOTIFICATION","HIDE_NOTIFICATION","SET_FILTER","SET_TAG"],"mappings":"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","file":"static/js/main.5bac9391.chunk.js","sourcesContent":["export const LOG_IN = \"LOG_IN\";\r\nexport const CREATE_USER = \"CREATE_USER\";\r\nexport const ADD_PRODUCT_TO_CART = \"ADD_PRODUCT_TO_CART\";\r\n","export const SET_ACTIVE_PRODUCT = \"SET_ACTIVE_PRODUCT\";","import React, { useState } from 'react';\r\nimport { FormikErrors, FormikTouched, Form, Field } from 'formik';\r\nimport { Grid, Select, Chip, Box, MenuItem } from '@material-ui/core/';\r\nimport useStyles from '../formStyles';\r\ninterface Props {\r\n  errors: FormikErrors<{\r\n    name: string;\r\n    description: string;\r\n    price: number;\r\n    stock: number;\r\n}>\r\n  touched: FormikTouched<{\r\n    name: string;\r\n    description: string;\r\n    price: number;\r\n    stock: number;\r\n}>\r\n  // eslint-disable-next-line  @typescript-eslint/no-explicit-any \r\n  setFieldValue: (field: string, value: any, shouldValidate?: boolean | undefined) => void\r\n  setImage: React.Dispatch<React.SetStateAction<File | undefined>>\r\n  image: File | undefined\r\n  // eslint-disable-next-line  @typescript-eslint/no-explicit-any \r\n  submitForm: (() => Promise<void>) & (() => Promise<any>)\r\n  setTags: React.Dispatch<React.SetStateAction<Tag[]>>\r\n  tags: Tag[]\r\n}\r\n\r\nconst ProductForm = ({ errors, touched, setFieldValue, setImage, image, submitForm, setTags, tags }: Props): JSX.Element => {\r\n  const classes = useStyles();\r\n  const availableTags: Tag[] = ['Kirves', 'Mokki Essential', 'Ruoka/Juoma', 'muut'];\r\n\r\n  const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\r\n    setTags(event.target.value as Tag[]);\r\n  };\r\n\r\n  return (\r\n    <Form>\r\n      <Grid container spacing={1}>\r\n        <Grid container item xs={12} spacing={3}>\r\n          <Grid item xs={2}>\r\n            <label>Nimi: <b style={{color: 'red'}}>*</b> </label>\r\n          </Grid>\r\n          <Grid item xs={9}>\r\n            <Field\r\n              className={classes.field}\r\n              placeholder=\"Uusi tuote\"\r\n              type=\"text\"\r\n              name=\"name\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={1}>\r\n            {(errors.name && touched.name) && (\r\n              <div>{errors.name}</div>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container item xs={12} spacing={3}>\r\n          <Grid item xs={2}>\r\n            <label>Kuvaus: </label>\r\n          </Grid>\r\n          <Grid item xs={9}>\r\n            <Field\r\n              className={classes.field}\r\n              placeholder=\"Wish.com tason tuote (ei pakollinen)\"\r\n              type=\"text\"\r\n              name=\"description\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={1}>\r\n            {(errors.description && touched.description) && (\r\n              <div>{errors.description}</div>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container item xs={12} spacing={3}>\r\n          <Grid item xs={2}>\r\n            <label>Hinta: <b style={{color: 'red'}}>*</b> </label>\r\n          </Grid>\r\n          <Grid item xs={9}>\r\n            <Field\r\n              className={classes.field}\r\n              placeholder=\"Hinta\"\r\n              type=\"number\"\r\n              name=\"price\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={1}>\r\n            {(errors.price && touched.price) && (\r\n              <div>{errors.price}</div>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container item xs={12} spacing={3}>\r\n          <Grid item xs={2}>\r\n            <label>Varastossa: </label>\r\n          </Grid>\r\n          <Grid item xs={9}>\r\n            <Field\r\n              className={classes.field}\r\n              placeholder=\"Varastossa (optional)\"\r\n              type=\"number\"\r\n              name=\"stock\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={1}>\r\n            {(errors.stock && touched.stock) && (\r\n              <div>{errors.stock}</div>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container item xs={12} spacing={3}>\r\n          <Grid item xs={2}>\r\n            <label>Tagit: </label>\r\n          </Grid>\r\n          <Grid item xs={9}>\r\n            <Box border={2} className={classes.field}>\r\n              <Select\r\n                className={classes.field}\r\n                multiple\r\n                style={{ backgroundColor: 'rgb(255,255,255)' }}\r\n                disableUnderline\r\n                value={tags}\r\n                onChange={handleChange}\r\n                renderValue={(selected) => (\r\n                  <div style={{ display: 'flex', flexWrap: 'wrap'}}>\r\n                    {(selected as Tag[]).map((value) => (\r\n                      <Chip\r\n                        key={value}\r\n                        label={value}\r\n                        style={{ display: 'flex', flexWrap: 'wrap', backgroundColor: '#5aafe0', marginLeft: 2 }}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              >\r\n                {availableTags.map((tag) => (\r\n                  <MenuItem style={{ backgroundColor: 'rgb(255,255,255)' }} key={tag} value={tag}>\r\n                    {tag}\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item xs={1}>\r\n            \r\n          </Grid>\r\n        </Grid>\r\n        <Grid container item xs={12} spacing={3}>\r\n          <Grid item xs={2}>\r\n            <label> Kuva: </label>\r\n          </Grid>\r\n          <Grid item xs={9}>\r\n            <Field\r\n              className={classes.field}\r\n              type=\"File\"\r\n              name=\"image\"\r\n              value={undefined}\r\n              style={{ color: 'rgba(0,0,0,0)'}}\r\n              onChange={(event:React.ChangeEvent<HTMLInputElement>) => {\r\n                setFieldValue('image', event.currentTarget.files? event.currentTarget.files[0] : undefined);\r\n                setImage(event.currentTarget.files? event.currentTarget.files[0] : undefined);\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={1}>\r\n            {image && \r\n              <button type=\"button\" onClick={() => {\r\n                setFieldValue('image', undefined);\r\n                setImage(undefined);\r\n              }}> \r\n                Peruuta\r\n              </button>\r\n            }\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container item xs={12} spacing={3}>\r\n          <Grid item xs={2}>\r\n            <label> Kuvan esikatselu: </label>\r\n          </Grid>\r\n          <Grid item xs={9}>\r\n            {image ? \r\n              <img height={100} width={100} src={ URL.createObjectURL(image) } alt=\"Preview to upload\" />\r\n            :\r\n              <img height={100} width={100} src={'https://live.staticflickr.com/5217/5471047557_4dc13f5376_n.jpg'} alt=\"Preview to upload\" />\r\n            }\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n      <button className={classes.button} type=\"submit\"> Lähetä </button>\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default ProductForm;","import React from 'react';\r\nimport { Form, Field, FormikErrors, FormikTouched } from 'formik';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport useStyles from '../formStyles';\r\n\r\ninterface Props {\r\n  errors: FormikErrors<{\r\n    userName: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    password: string;\r\n    email: string;\r\n  }>\r\n  touched: FormikTouched<{\r\n    userName: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    password: string;\r\n    email: string;\r\n  }>\r\n}\r\n\r\nconst UserForm = ({ errors, touched }: Props) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Form>\r\n      <Grid container spacing={1}>\r\n        <Grid container item xs={12} spacing={3}>\r\n          <Grid item xs={2}>\r\n          <label>Käyttäjänimi: <b style={{color: 'red'}}>*</b> </label>\r\n          </Grid>\r\n          <Grid item xs={9}>\r\n            <Field\r\n              className={classes.field}\r\n              placeholder=\"Käyttäjänimi\"\r\n              type=\"text\"\r\n              name=\"userName\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={1}>\r\n            {(errors.userName && touched.userName) && (\r\n              <div>{errors.userName}</div>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container item xs={12} spacing={3}>\r\n          <Grid item xs={2}>\r\n            <label>Etunimi: <b style={{color: 'red'}}>*</b> </label>\r\n          </Grid>\r\n          <Grid item xs={9}>\r\n            <Field\r\n              className={classes.field}\r\n              placeholder=\"Etunimi\"\r\n              type=\"text\"\r\n              name=\"firstName\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={1}>\r\n            {(errors.firstName && touched.firstName) && (\r\n              <div>{errors.firstName}</div>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container item xs={12} spacing={3}>\r\n          <Grid item xs={2}>\r\n            <label>Sukunimi: <b style={{color: 'red'}}>*</b> </label>\r\n          </Grid>\r\n          <Grid item xs={9}>\r\n            <Field\r\n              className={classes.field}\r\n              placeholder=\"Sukunimi\"\r\n              type=\"text\"\r\n              name=\"lastName\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={1}>\r\n            {(errors.lastName && touched.lastName) && (\r\n              <div>{errors.lastName}</div>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container item xs={12} spacing={3}>\r\n          <Grid item xs={2}>\r\n            <label>Salasana: <b style={{color: 'red'}}>*</b> </label>\r\n          </Grid>\r\n          <Grid item xs={9}>\r\n            <Field\r\n              className={classes.field}\r\n              placeholder=\"Salasana\"\r\n              type=\"password\"\r\n              name=\"password\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={1}>\r\n            {(errors.password && touched.password) && (\r\n              <div>{errors.password}</div>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container item xs={12} spacing={3}>\r\n          <Grid item xs={2}>\r\n            <label>Email: <b style={{color: 'red'}}>*</b> </label>\r\n          </Grid>\r\n          <Grid item xs={9}>\r\n            <Field\r\n              className={classes.field}\r\n              placeholder=\"example@gmail.com\"\r\n              type=\"text\"\r\n              name=\"email\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={1}>\r\n            {(errors.email && touched.email) && (\r\n              <div>{errors.email}</div>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n      <button className={classes.button} type=\"submit\">Lähetä</button>\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default UserForm;","export const parseDate = (date?: Date):string => {\r\n  if (!date) return '';\r\n  const d = new Date(date);\r\n  const day = d.getDate().toString();\r\n  const month = `${d.getMonth() + 1}`;\r\n  const year = d.getFullYear().toString();\r\n  const hour = d.getHours();\r\n  const min = d.getMinutes();\r\n  let hours;\r\n  hour < 10 ? hours = '0' + hour.toString() : hours = hour.toString();\r\n  let minutes;\r\n  min < 10 ? minutes = '0' + min.toString() : minutes = min.toString();\r\n\r\n  return day + '.' + month + '.' + year + '  ' + hours + ':' + minutes;\r\n};","import React from \"react\";\r\nimport { Link } from 'react-router-dom';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Delete from '@material-ui/icons/DeleteForever';\r\n\r\nimport { useAppSelector, AppDispatch, useAppDispatch } from '../store/rootReducer';\r\nimport productService from '../services/productService';\r\nimport { removeProduct } from '../store/Product/actionCreators';\r\nimport { setNotification } from '../store/Notification/actionCreators';\r\nimport { setActiveProduct } from '../store/ActiveProduct/actionCreators';\r\nimport { increaseQuantity, addNewProductToShoppingCart, createNewShoppingCart } from '../store/ShoppingCart/actionCreators';\r\nimport shoppingCartService from '../services/shoppingCartService';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nimport { arrayBufferToBase64 } from '../utils/ArrayBufferToBase64';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: 170,\r\n    maxHeight: 340,\r\n    marginRight: 20\r\n  },\r\n  centerText: {\r\n    textAlign: 'center',\r\n  },\r\n  media: {\r\n    height: 160,\r\n  },\r\n  overflow: {\r\n    maxWidth: 170,\r\n    whiteSpace: 'nowrap',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis'\r\n  },\r\n});\r\n\r\ntype Props = {\r\n  product: Product\r\n};\r\n\r\nconst Product  = ({ product }: Props): JSX.Element => {\r\n\r\n  const classes = useStyles();\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n\r\n  const user: Credentials | undefined = useAppSelector(\r\n    state => state.userReducer.user\r\n  );\r\n  const cartId = useAppSelector(state => state.shoppingCartReducer.cartId);\r\n  const shoppingCart = useAppSelector(state => state.shoppingCartReducer.cart);\r\n\r\n  const deleteProduct = () => {\r\n    // Todo: Tarkistus että tuote todella on poistettu kannasta ennen frontista deletointia ?\r\n    productService.deleteProduct(product).catch(e => console.log(e));\r\n    dispatch(removeProduct(product));\r\n    dispatch(setNotification(\"Removed \" + product.name, 'info'));\r\n  };\r\n\r\n  const handleShoppingCart = () => {\r\n    const isProductAlreadyInCart = shoppingCart.some(p => p._id === product._id);\r\n    \r\n    let shoppingCartProduct: ShoppingCartProduct | undefined = shoppingCart.find(p => p._id === product._id);\r\n\r\n    if (!shoppingCartProduct) {   \r\n      shoppingCartProduct = {...product, quantity: 1};\r\n    }\r\n    if (isProductAlreadyInCart) {\r\n      updateShoppingCartProductQuantity(shoppingCartProduct);\r\n    } else {  \r\n      addProductToShoppingCart(shoppingCartProduct);\r\n    }\r\n  };\r\n\r\n  const addProductToShoppingCart = (shoppingCartProduct: ShoppingCartProduct) => {  \r\n    if (!user) {\r\n      dispatch(addNewProductToShoppingCart(shoppingCartProduct, cartId));\r\n    } else {\r\n      if (!cartId) {\r\n        dispatch(addNewProductToShoppingCart(shoppingCartProduct, cartId));\r\n        const newProduct = [ shoppingCartProduct ];\r\n        void shoppingCartService.createNewShoppingCart({ products: newProduct, user: user._id, id: ''})\r\n          .then((response) => {\r\n            dispatch(createNewShoppingCart(response.id));\r\n          }).catch(e => console.log(e));\r\n      } else {\r\n        const response = shoppingCartService.addProductToShoppingCart({ product: shoppingCartProduct, userId: user._id, cartId});\r\n        response.then(() => {\r\n          dispatch(addNewProductToShoppingCart(shoppingCartProduct, cartId));\r\n            }).catch(e => console.log(e));\r\n      }\r\n      \r\n    }\r\n  };\r\n\r\n  const updateShoppingCartProductQuantity = (shoppingCartProduct: ShoppingCartProduct) => {\r\n    if (!user) {\r\n      dispatch(increaseQuantity(shoppingCartProduct, cartId));\r\n    } else {\r\n      void shoppingCartService.increaseProductQuantity({ product: shoppingCartProduct, userId: user._id, cartId: cartId })\r\n        .then(() => {\r\n          dispatch(increaseQuantity(shoppingCartProduct, cartId));\r\n        });\r\n    }\r\n  };\r\n\r\n  const handleSetActiveProduct = () => {\r\n    dispatch(setActiveProduct(product));\r\n    window.localStorage.setItem('activeProduct', product.name);\r\n  };\r\n  \r\n  let image;\r\n  if (product.image) {\r\n    const buffer = Buffer.from(product.image.data);\r\n    image = arrayBufferToBase64(buffer);\r\n  }\r\n\r\n  return (\r\n    <Card className={classes.root}>\r\n      <Link to='/product' style={{ textDecoration: 'none', color: 'black' }}>\r\n        <CardActionArea onClick={() => handleSetActiveProduct()}>\r\n          <CardMedia\r\n              className={classes.media}\r\n              image={image}\r\n            />\r\n          <CardContent>\r\n            <Typography className={`${classes.overflow} ${classes.centerText}`} style={{ fontSize: 16 }} gutterBottom variant=\"h6\" component=\"h2\">\r\n              {product.name} <br/> {product.price}€ \r\n            </Typography>\r\n            <Typography className={`${classes.overflow} ${classes.centerText}`} variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n              {product.description}\r\n            </Typography>\r\n          </CardContent>\r\n        </CardActionArea>\r\n      </Link>\r\n      <CardActions>\r\n        <Button disabled={product.stock <= 0} size=\"small\" color=\"primary\" onClick={() => handleShoppingCart()}>\r\n          Lisää ostoskoriin\r\n        </Button>\r\n        {user?.userType === 'Admin' && (\r\n          <IconButton onClick={() => deleteProduct()}>\r\n            <Tooltip title=\"Poista tuote tietokannasta\">\r\n              <Delete />\r\n            </Tooltip>\r\n          </IconButton>\r\n        )}\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport { Product };","import * as actionTypes from \"./actionTypes\";\r\n\r\ntype Cart = (dispatch: DispatchType) => void;\r\n\r\nexport const createNewShoppingCart = (cartId: string): Cart => {\r\n  const action: CreateNewShoppingCartAction = {\r\n    type: actionTypes.CREATE_NEW_SHOPPING_CART,\r\n    cartId\r\n  };\r\n  \r\n  return (dispatch: DispatchType) => {\r\n    dispatch(action);\r\n  };\r\n};\r\n\r\nexport const retrieveOldShoppingCart = (cartId: string, products: ShoppingCartProduct[]): Cart => {\r\n  const action: RetrieveOldShoppingCartAction = {\r\n    type: actionTypes.RETRIEVE_OLD_SHOPPING_CART,\r\n    cartId,\r\n    data: products\r\n  };\r\n  return (dispatch: DispatchType) => {\r\n    dispatch(action);\r\n  };\r\n};\r\n\r\nexport const addNewProductToShoppingCart = (product: Product, cartId: string): Cart => {\r\n  const data: ShoppingCartProduct = { ...product, quantity: 1};\r\n  const action: ShoppingCartAction = {\r\n    type: actionTypes.INCREASE_QUANTITY,\r\n    cartId,\r\n    data\r\n  };\r\n\r\n  return (dispatch: DispatchType) => {\r\n    dispatch(action);\r\n  };\r\n};\r\n\r\nexport const increaseQuantity = (product: ShoppingCartProduct, cartId: string): Cart => {\r\n  const action: ShoppingCartAction = {\r\n    type: actionTypes.INCREASE_QUANTITY,\r\n    cartId,\r\n    data: {...product, quantity: product.quantity + 1}\r\n  };\r\n\r\n  return (dispatch: DispatchType) => {\r\n    dispatch(action);\r\n  };\r\n};\r\n\r\nexport const decreaseQuantity = (product: ShoppingCartProduct, cartId: string): Cart => {\r\n  const action: ShoppingCartAction = {\r\n    type: actionTypes.DECREASE_QUANTITY,\r\n    cartId,\r\n    data: {...product, quantity: product.quantity - 1}\r\n  };\r\n\r\n  return (dispatch: DispatchType) => {\r\n    dispatch(action);\r\n  };\r\n};\r\n\r\nexport const removeProduct = (data: ShoppingCartProduct, cartId: string): Cart => {\r\n  const action: ShoppingCartAction = {\r\n    type: actionTypes.REMOVE_PRODUCT_FROM_CART,\r\n    cartId,\r\n    data,\r\n  };\r\n\r\n  return (dispatch: DispatchType) => {\r\n    dispatch(action);\r\n  };\r\n};\r\n\r\nexport const clearShoppingCart = (): Cart => {\r\n  const action: ClearShoppingCartAction = {\r\n    type: actionTypes.CLEAR_SHOPPINGCART,\r\n  };\r\n\r\n  return (dispatch: DispatchType) => {\r\n    dispatch(action);\r\n  };\r\n};","type OpenOrCloseModal = (dispatch: DispatchType) => void;\r\n\r\nexport const handleModal = (data: boolean, modal: Modal): OpenOrCloseModal => {\r\n  const action: ModalAction = {\r\n    type: '',\r\n    modal,\r\n    data\r\n  };\r\n  \r\n  return (dispatch: DispatchType) => {\r\n    dispatch(action);\r\n  };\r\n};\r\n\r\n","import React, { useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport { \r\n  CardMedia,\r\n  Card,\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  IconButton,\r\n  Tooltip,\r\n  Grid,\r\n  Chip,\r\n} from '@material-ui/core';\r\nimport { useAppSelector, AppDispatch, useAppDispatch } from '../store/rootReducer';\r\nimport { handleModal } from '../store/modal/actionCreators';\r\nimport Rating from '@material-ui/lab/Rating';\r\nimport { StarBorder, FiberManualRecord as CircleIcon, Edit } from '@material-ui/icons/';\r\n\r\nimport shoppingCartService from '../services/shoppingCartService';\r\nimport userService from '../services/userService';\r\n\r\nimport ModifyProductModal from '../modals/ModifyProductModal';\r\nimport { arrayBufferToBase64 } from '../utils/ArrayBufferToBase64';\r\nimport { roundToHalf } from '../utils/RoundToHalf';\r\nimport { addNewProductToShoppingCart, increaseQuantity } from '../store/ShoppingCart/actionCreators';\r\nimport { setActiveProduct } from '../store/ActiveProduct/actionCreators';\r\nimport { logIn } from '../store/User/actionCreators';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n  },\r\n  box: {\r\n    marginLeft: 25,\r\n    width: '100%',\r\n    borderRadius: 15,\r\n  },\r\n  card: {\r\n    maxWidth: 500,\r\n    maxHeight: 350\r\n  },\r\n  image: {\r\n    height: 350,\r\n    width: 500,\r\n  },\r\n  availability: {\r\n    height: 20,\r\n    width: 20,\r\n    marginLeft: 10\r\n  },\r\n  button: {\r\n    padding: 25,\r\n    width: '100%',\r\n  },\r\n  priceTag: {\r\n    width: 150,\r\n    borderRadius: 15,\r\n    marginBottom: 30,\r\n    backgroundColor: 'lightgrey'\r\n  }, \r\n  chip: {\r\n    padding: 15,\r\n    marginTop: 15,\r\n    marginLeft: 15,\r\n    marginBottom: 15,\r\n    width: '80%'\r\n  },\r\n  ratedTag: {\r\n    borderRadius: 10,\r\n    color: 'darkgreen',\r\n    height: 20,\r\n    width: 80,\r\n    textAlign: 'center',\r\n    marginLeft: 10,\r\n    padding: 3,\r\n    transform: `rotate(-30deg)`,\r\n  }\r\n});\r\n\r\nconst ProductInfo = (): JSX.Element => {\r\n\r\n  const classes = useStyles();\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n\r\n  const product: Product | undefined = useAppSelector(\r\n    state => state.activeProductReducer.product\r\n  );\r\n\r\n  const allProducts: Product[] = useAppSelector(\r\n    state => state.productReducer.products\r\n  );\r\n\r\n  const user = useAppSelector(state => state.userReducer.user);\r\n  const userId = user? user._id : '';\r\n\r\n  useEffect(() => {\r\n    if (!product) {\r\n      const item = window.localStorage.getItem('activeProduct');\r\n      const storedProduct = allProducts.find(p => {\r\n        return p.name === item;\r\n      });\r\n      if (storedProduct) {\r\n        void dispatch(setActiveProduct(storedProduct));\r\n      }\r\n    }\r\n  }, [allProducts]);\r\n\r\n  const shoppingCart = useAppSelector(state => state.shoppingCartReducer);\r\n  \r\n  if (!product) return <div></div>;\r\n\r\n  const hasUserRatedTheProduct = user?.ratings?.some(p => {\r\n    return p._id.toString() === product._id.toString();\r\n  });\r\n\r\n  const productStock = () => {\r\n    if (product.stock <= 0) {\r\n      return <CircleIcon className={classes.availability} style={{ color: 'red'}} />;\r\n    } else if (product.stock >= 1 && product.stock <= 5) {\r\n      return <CircleIcon className={classes.availability} style={{ color: 'yellow'}} />;\r\n    } else {\r\n      return <CircleIcon className={classes.availability} style={{ color: 'green'}} />;\r\n    }\r\n  };\r\n\r\n  \r\n\r\n  const handleShoppingCart = () => {\r\n    const isProductInCart = shoppingCart.cart.some(p => p._id === product._id);\r\n    let shoppingCartProduct = shoppingCart.cart.find(p => p._id === product._id);\r\n\r\n    if (!shoppingCartProduct) {\r\n      shoppingCartProduct = {...product, quantity: 1};\r\n    }\r\n\r\n    if (isProductInCart) {   \r\n      increaseProductQuantity(shoppingCartProduct);\r\n    } else {\r\n      addProductToShoppingCart(shoppingCartProduct);\r\n    }\r\n  };\r\n\r\n  const increaseProductQuantity = (shoppingCartProduct: ShoppingCartProduct) => {\r\n    if (!user) {\r\n      dispatch(increaseQuantity(shoppingCartProduct, shoppingCart.cartId));\r\n    } else {\r\n      void shoppingCartService.increaseProductQuantity({ product: shoppingCartProduct, userId, cartId: shoppingCart.cartId })\r\n        .then(() => {\r\n          dispatch(increaseQuantity(shoppingCartProduct, shoppingCart.cartId));\r\n        });\r\n    }\r\n  };\r\n\r\n  const addProductToShoppingCart = (shoppingCartProduct: ShoppingCartProduct) => {\r\n    if (!user) {\r\n      dispatch(addNewProductToShoppingCart(shoppingCartProduct, shoppingCart.cartId));\r\n    } else {\r\n      void shoppingCartService.addProductToShoppingCart({ product: shoppingCartProduct, userId, cartId: shoppingCart.cartId })\r\n        .then(() => {\r\n          dispatch(addNewProductToShoppingCart(shoppingCartProduct, shoppingCart.cartId));\r\n        });\r\n    }\r\n  };\r\n\r\n  const productRating = () => {\r\n    if (!product.ratings || product.ratings.length === 0) return 0;\r\n    \r\n    const sum = product.ratings.reduce((prev, cur) => prev + cur, 0);\r\n    return roundToHalf(sum / product.ratings.length);\r\n  };\r\n\r\n  const handleRating = (number: number | null) => {\r\n    const value = number? number : 0;\r\n    const response = userService.addRatingForProduct(userId, product._id, value);\r\n    void response.then((res) => {\r\n      if (res !== null) {\r\n        const productWithNewRatings = res.ratings?.find(r => r._id.toString() === product._id);\r\n        if (productWithNewRatings) {\r\n          void dispatch(setActiveProduct(productWithNewRatings));\r\n          void dispatch(logIn(res));\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  const loremIpsum = () => {\r\n    return 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.';\r\n  };\r\n\r\n  const priceTag = () => {\r\n    return (\r\n      <Box border={1} justifyContent=\"center\" className={classes.priceTag}>\r\n        <Chip\r\n          size=\"small\"\r\n          label={product.price.toString() + '€'}\r\n          color=\"primary\"\r\n          className={classes.chip}\r\n        />\r\n      </Box>\r\n    );\r\n  };\r\n\r\n  const modifyProductButton = () => {\r\n    return (\r\n      <Box border={1} style={{ borderRadius: 10, color: 'darkblue', width: 50, marginBottom: 25}}>\r\n        <IconButton\r\n        style={{ width: '100%', height: '100%'}}\r\n        color=\"primary\"\r\n        onClick={() => dispatch(handleModal(true, 'ModifyProduct'))}\r\n        >\r\n          <Edit />\r\n        </IconButton>\r\n      </Box>\r\n    );\r\n  };\r\n\r\n  const ratedTag = ():JSX.Element => {\r\n    return (\r\n      <Box border={2} className={classes.ratedTag}>\r\n          <Typography>Arvosteltu</Typography>\r\n      </Box>\r\n    );\r\n  };\r\n\r\n  const addToShoppingcart = () => {   \r\n    return (\r\n      <Box border={1} justifyContent=\"center\" style={{ backgroundColor: 'lightgrey', maxWidth: 300, borderRadius: 10 }}>\r\n        <Button\r\n          className={classes.button}\r\n          disabled={product.stock <= 0}\r\n          size=\"small\" color=\"primary\"\r\n          onClick={() => handleShoppingCart()}\r\n        >\r\n          Lisää ostoskoriin\r\n          <Tooltip title={<><p> Green = Available <br/> Yellow = Few left <br/> Red = Not available  </p> </>}>\r\n            {productStock()}\r\n          </Tooltip> \r\n        </Button>\r\n      </Box>\r\n    );\r\n  };\r\n\r\n  let image;\r\n  if (product.image) {\r\n    const buffer = Buffer.from(product.image.data);\r\n    image = arrayBufferToBase64(buffer);\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Card className={classes.card}>\r\n        <CardMedia image={image} className={classes.image} />\r\n      </Card>\r\n      <Box border={1} className={classes.box} style={{ color: 'blue' }}>\r\n        <Grid container item xs={12} spacing={3} style={{ color: 'black', padding: 15 }} >\r\n          <Grid item xs={7}>\r\n            <div style={{ display: 'flex', flexDirection: 'row'}}>\r\n              <Typography variant='h3' style={{ marginRight: 15 }}> {product.name}  </Typography>\r\n              {user?.userType === 'Admin' && modifyProductButton()}\r\n            </div>\r\n            <div style={{ display: 'flex', flexDirection: 'row'}}>\r\n              <Rating\r\n                readOnly={!user || hasUserRatedTheProduct}\r\n                value={productRating()}\r\n                name={product.name}\r\n                precision={0.5}\r\n                emptyIcon={<StarBorder fontSize=\"inherit\" />}\r\n                onChange={(_event, value) => handleRating(value)}\r\n              />\r\n              {hasUserRatedTheProduct && ratedTag()}\r\n            </div>\r\n            <Typography>\r\n              <br/>\r\n              {product.description}\r\n              <br/>\r\n              {loremIpsum()}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item xs={5}>\r\n            <div style={{ position: 'relative', top: 150}}>\r\n              {priceTag()}\r\n              {addToShoppingcart()}\r\n            </div>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <ModifyProductModal />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductInfo;","export const roundToHalf = (value: number): number => {\r\n  const converted = `${value}`;\r\n  let decimal = (value - parseInt(converted, 10));\r\n  decimal = Math.round(decimal * 10);\r\n  if (decimal === 5) {\r\n    return parseInt(converted, 10) + 0.5;\r\n  } else if (decimal < 3 || decimal > 7) {\r\n    return Math.round(value);\r\n  } else {\r\n    return parseInt(converted, 10) + 0.5;\r\n  }\r\n};","import React from 'react';\r\nimport { Box, Typography, IconButton, Tooltip, Avatar, Container } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { AccountCircle, Edit } from '@material-ui/icons/';\r\n\r\nimport { AppDispatch, useAppDispatch } from '../store/rootReducer';\r\nimport { handleModal } from '../store/modal/actionCreators';\r\nimport ModifyUserInfoModal from '../modals/ModifyUserInfoModal';\r\nimport ModifyUserAvatarModal from '../modals/ModifyUserAvatarModal';\r\nimport { parseDate } from '../utils/DateParser';\r\nimport { arrayBufferToBase64 } from '../utils/ArrayBufferToBase64';\r\n\r\nconst useStyles = makeStyles({\r\n  nameAndIcon: {\r\n    width: '75%',\r\n    margin: '0 auto',\r\n    flexGrow: 1,\r\n  },\r\n  avatar: {\r\n    backgroundColor: 'white',\r\n    margin: '0 auto',\r\n    width: 120,\r\n    height: 120,\r\n    '&:hover': {\r\n      backgroundColor: 'lightgrey',\r\n    },\r\n  },\r\n  column: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  header: {\r\n    textAlign: 'center',\r\n    height: 25,\r\n    color: 'white',\r\n    borderRadius: '15%',\r\n    backgroundColor: '#2525b8',\r\n  },\r\n});\r\ninterface AccountProps {\r\n  user: Credentials | undefined  \r\n}\r\n\r\ninterface HeaderProps {\r\n  text: string,\r\n  style?: React.CSSProperties | undefined\r\n}\r\n\r\nconst defaultProps = {\r\n  bgcolor: 'background.paper',\r\n  m: 1,\r\n};\r\n\r\nconst Account = ({user}: AccountProps): JSX.Element => {\r\n  const classes = useStyles();\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n  if (!user) return <div></div>;\r\n\r\n  const Header = ({text, style}: HeaderProps): JSX.Element => {\r\n    return (\r\n      <Typography style={style} className={`${classes.header}`}>{text}</Typography>\r\n    );\r\n  };\r\n\r\n  const dates: string[] = [];\r\n  const platformInfo: string[] = [];\r\n\r\n  let counter = 0;\r\n  for (let i = user.recentActivity.length -1; i >= 0; i--) {\r\n    dates.push(parseDate(user.recentActivity[i]));\r\n    platformInfo.push(user.platformInfo[i]);\r\n    counter++;\r\n    if (counter === 4) break;\r\n  }\r\n\r\n  let image;\r\n  if (user?.avatar?.data) {\r\n    const buffer = Buffer.from(user.avatar.data);\r\n    image = arrayBufferToBase64(buffer);\r\n  }\r\n\r\n  \r\n\r\n  return (\r\n    <div style={{ display: 'flex', flexDirection: 'row'}}>\r\n      {user &&\r\n        <>\r\n          <div style={{ flexDirection: 'column'}}> \r\n            <Container>\r\n              <Box borderRight={1} borderLeft={1} borderColor=\"primary.main\" style={{ height: 270, width: 270 }} {...defaultProps}>\r\n                <div className={classes.nameAndIcon}>\r\n                  {image ?\r\n                    <Avatar \r\n                      onClick={() => dispatch(handleModal(true, 'ModifyUserAvatar'))}\r\n                      src={image}\r\n                      className={classes.avatar}\r\n                    />\r\n                  :\r\n                    <Avatar\r\n                      onClick={() => dispatch(handleModal(true, 'ModifyUserAvatar'))}\r\n                      className={classes.avatar}\r\n                    >\r\n                      <AccountCircle style={{ color: '#094ebd', width: 120, height: 120 }}/>\r\n                    </Avatar>\r\n                  }\r\n                  <Typography style={{ marginLeft: 5, textAlign: 'center' }} variant='h6'>\r\n                    {user.firstName} &nbsp; {user.lastName}\r\n                  </Typography>\r\n                </div>\r\n              </Box>\r\n            </Container>\r\n          </div>\r\n          <div style={{ flexDirection: 'column' }}> \r\n            <Box borderBottom={1} borderColor=\"primary.main\" style={{ height: 120, width: 600 }} {...defaultProps}>\r\n              <Header text=\"Käyttäjätiedot\" />\r\n              <Typography variant='subtitle1'>\r\n                Email: {user.email} <br/>\r\n                Etunimi: {user.firstName} <br/>\r\n                Sukunimi: {user.lastName} \r\n                <IconButton onClick={() => dispatch(handleModal(true, 'ModifyUser'))} style={{ position: 'relative',  left: 10, marginTop: -10 }}> \r\n                  <Tooltip title=\"Muokkaa käyttäjätietoja\">\r\n                    <Edit />\r\n                  </Tooltip>\r\n                </IconButton><br/>\r\n              </Typography>\r\n            </Box>\r\n            <Box borderBottom={1} borderColor=\"primary.main\" style={{ height: 120, width: '100%' }} {...defaultProps}>\r\n              <Header style={{ marginTop: 15 }} text=\"Viimeisimmät sisäänkirjautumiset\" />\r\n                {dates.map((date, index) => (\r\n                  <Typography key={index}>{date}: {platformInfo[index]}</Typography>\r\n                ))}\r\n            </Box>\r\n          </div>\r\n        </>\r\n      }\r\n      <ModifyUserInfoModal />\r\n      <ModifyUserAvatarModal />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Account;","import React from 'react';\r\nimport { useAppDispatch, AppDispatch, useAppSelector } from '../store/rootReducer';\r\nimport { makeStyles  } from '@material-ui/styles';\r\nimport { Card, CardActionArea, CardContent, CardMedia, Typography, IconButton } from '@material-ui/core';\r\nimport { Add, Remove } from '@material-ui/icons';\r\nimport { grey, red } from '@material-ui/core/colors';\r\n\r\nimport { decreaseQuantity, removeProduct, increaseQuantity } from '../store/ShoppingCart/actionCreators';\r\nimport shoppingCartService from '../services/shoppingCartService';\r\nimport { arrayBufferToBase64 } from '../utils/ArrayBufferToBase64';\r\n\r\nconst useStyles = makeStyles({\r\n  container: {\r\n    display: 'flex',\r\n    flexDirection: 'row'\r\n  },\r\n  card: {\r\n    width: 380,\r\n    maxHeight: 140,\r\n    marginBottom: 15\r\n  },\r\n  details: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    height: 120\r\n  },\r\n  content: {\r\n    width: 190,\r\n    height: 20,\r\n    flex: '1 0 auto',\r\n    backgroundColor: grey[200],\r\n  },\r\n  info: {\r\n    whiteSpace: 'nowrap',\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n  },\r\n  image: {\r\n    width: '100%',\r\n  },\r\n  contentAndImage: {\r\n    display: 'flex',\r\n    maxHeight: 120\r\n  },\r\n  deleteButton: {\r\n    display: 'flex',\r\n    backgroundColor: red[400],\r\n    justifyContent: 'center',\r\n  },\r\n  iconButtons: {\r\n    position: 'relative',\r\n    top: 50,\r\n  },\r\n});\r\n\r\ninterface props {\r\n  product: ShoppingCartProduct\r\n}\r\n\r\nconst ShoppingCartCard: React.FC<props> = ({ product }): JSX.Element => {\r\n  const classes = useStyles();\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n  \r\n  const cartId = useAppSelector(state => state.shoppingCartReducer.cartId);\r\n\r\n  const user = useAppSelector(state => state.userReducer.user);\r\n  let userId: string;\r\n  if (!user) {\r\n    userId = '';\r\n  } else {\r\n    userId = user._id;\r\n  }\r\n\r\n  const removeProductFromCart = (product: ShoppingCartProduct) => {\r\n    if (!user) {\r\n      dispatch(removeProduct(product, cartId));\r\n    } else {\r\n      const promise = shoppingCartService.removeProductFromShoppingCart({ cartId, userId, product });\r\n      void promise.then(() => {\r\n        dispatch(removeProduct(product, cartId));\r\n      });\r\n    }\r\n  };\r\n\r\n  const decreaseQuantityFromCart = (product: ShoppingCartProduct) => {\r\n    if (!user) {\r\n      dispatch(decreaseQuantity(product, cartId));\r\n    } else {\r\n      const promise = shoppingCartService.decreaseProductQuantity({ cartId, userId, product });\r\n      void promise.then(() => {\r\n        dispatch(decreaseQuantity(product, cartId));\r\n      });\r\n    }\r\n  };\r\n\r\n  const increaseQuantityFromCart = (product: ShoppingCartProduct) => {\r\n    if (!user) {\r\n      dispatch(increaseQuantity(product, cartId));\r\n    } else {\r\n      const promise = shoppingCartService.increaseProductQuantity({ cartId, userId, product });\r\n      void promise.then(() => {\r\n        dispatch(increaseQuantity(product, cartId));\r\n      });\r\n    }\r\n  };\r\n\r\n  let image;\r\n  if (product.image) {\r\n    const buffer = Buffer.from(product.image.data);\r\n    image = arrayBufferToBase64(buffer);\r\n  }\r\n  \r\n  return (\r\n    <div className={classes.container}>\r\n      <Card className={classes.card}>\r\n        <div className={classes.contentAndImage}>\r\n          <div className={classes.details}>\r\n            <CardContent className={classes.content}>\r\n              <Typography className={classes.info} component=\"h6\" variant=\"h6\">\r\n                {product.name} x {product.quantity.toString()}\r\n              </Typography>\r\n              <Typography className={classes.info} variant=\"subtitle1\" color=\"textSecondary\">\r\n                {product.description}\r\n              </Typography>\r\n              <Typography variant=\"subtitle1\" color=\"textSecondary\">\r\n                {product.price}€\r\n              </Typography>\r\n            </CardContent>\r\n          </div>\r\n          <CardMedia\r\n            className={classes.image}\r\n            image={image}\r\n          />\r\n        </div>\r\n        <div>\r\n          <CardActionArea className={classes.deleteButton} onClick={() => removeProductFromCart(product)}>\r\n            Remove item(s) from cart\r\n          </CardActionArea>\r\n        </div>        \r\n      </Card>\r\n      <div className={classes.iconButtons}>\r\n        <IconButton onClick={() => decreaseQuantityFromCart(product)}>\r\n          <Remove />\r\n        </IconButton>\r\n        <IconButton onClick={() => increaseQuantityFromCart(product)}>\r\n          <Add style={{ marginLeft: -10 }}/>\r\n        </IconButton>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShoppingCartCard;","import React, { useState } from 'react';\r\nimport { Formik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport { AppDispatch, useAppDispatch, useAppSelector } from '../../store/rootReducer';\r\nimport productService from '../../services/productService';\r\nimport { initializeProducts } from '../../store/Product/actionCreators';\r\nimport { setActiveProduct } from '../../store/ActiveProduct/actionCreators';\r\nimport { setNotification } from '../../store/Notification/actionCreators';\r\nimport ProductForm from './ProductForm';\r\n\r\n const SignupSchema = Yup.object().shape({\r\n  name: Yup\r\n    .string()\r\n    .required(\"Required\"),\r\n  description: Yup\r\n    .string(),\r\n  price: Yup\r\n    .number()\r\n    .required(\"Required\"),\r\n  stock: Yup\r\n    .number(),\r\n  image: Yup\r\n    .mixed()\r\n });\r\n \r\n\r\n\r\n const ModifyProductForm = ():JSX.Element => {\r\n  const [ image, setImage ] = useState<File>();\r\n  const [ tags, setTags ] = useState<Tag[]>([]);\r\n\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n  const item = useAppSelector(state => state.activeProductReducer.product);\r\n  if (!item) return <div></div>;\r\n\r\n    return (\r\n      <div>\r\n        <Formik\r\n          initialValues={{\r\n            name: item.name,\r\n            description: item.description,\r\n            price: item.price,\r\n            stock: item.stock,\r\n            image: '' as unknown as File,\r\n            tags: item.tags\r\n          }}\r\n          validationSchema={SignupSchema}\r\n          onSubmit={values => {\r\n            const { name, description, price, stock, image } = values;\r\n            const product: Product = { name, description, price, stock, _id: item._id, ratings: item.ratings, image: item.image, tags: item.tags };\r\n            const promise = productService.modifyProduct(product, image);\r\n            \r\n            void promise.then((res) => {\r\n              if (!res) {\r\n                dispatch(setNotification(\"Unexpected error\", 'error'));\r\n              }\r\n              console.log('modify product response:', res);\r\n              void dispatch(setActiveProduct(res));\r\n              void dispatch(initializeProducts());\r\n              dispatch(setNotification(`Product ${product.name} modified`, 'success'));\r\n            });\r\n            \r\n          }}\r\n        >\r\n          {({ errors, touched, setFieldValue, submitForm }) => (  \r\n            <ProductForm\r\n              errors={errors}\r\n              touched={touched}\r\n              setFieldValue={setFieldValue}\r\n              image={image}\r\n              setImage={setImage}\r\n              submitForm={submitForm}\r\n              tags={item.tags}\r\n              setTags={setTags}\r\n            />\r\n          )}\r\n        </Formik>\r\n      </div>\r\n  );\r\n};\r\n\r\n export default ModifyProductForm;","import React, { useState } from \"react\";\r\nimport Modal from '@material-ui/core/Modal';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport ModifyProductForm from '../forms/product/ModifyProductForm';\r\n\r\nimport { useAppSelector, AppDispatch, useAppDispatch } from '../store/rootReducer';\r\nimport { handleModal } from '../store/modal/actionCreators';\r\n\r\nconst getModalStyle = () => {\r\n  const top = 50;\r\n  const left = 50;\r\n  return {\r\n      top: `${top}%`,\r\n      left: `${left}%`,\r\n      transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n};\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  modal: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n  },\r\n\r\n  paper: {\r\n      position: 'absolute',\r\n      width: 650,\r\n      height: 550,\r\n      backgroundColor: theme.palette.background.paper,\r\n      boxShadow: theme.shadows[5],\r\n      padding: theme.spacing(2, 4, 3),\r\n  },\r\n\r\n  header: {\r\n    background: 'linear-gradient(45deg, #124eb0 70%, #501573 90%)',\r\n    border: 0,\r\n    borderRadius: 30,\r\n    boxShadow: '0 3px 5px 2px rgba(255, 105, 135, .3)',\r\n    color: 'white',\r\n    textAlign: 'center',\r\n    height: 30,\r\n    marginTop: 5,\r\n    padding: '0 30px',\r\n  },\r\n}));\r\n\r\nconst Header: React.FC = () => {\r\n  const classes = useStyles();\r\n  return (\r\n    <h2 className={classes.header}> Muokkaa tuotetta </h2>\r\n  );\r\n};\r\n\r\nconst ModifyProductModal: React.FC = () => {\r\n  const classes = useStyles();\r\n  const [modalStyle] = useState(getModalStyle);\r\n\r\n  const modalOpen = useAppSelector(state => state.modalReducer.modifyProductModal);\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n  \r\n  const handleClose = () => {\r\n    dispatch(handleModal(!modalOpen, 'ModifyProduct'));\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      aria-labelledby=\"simple-modal-title\"\r\n      aria-describedby=\"simple-modal-description\"\r\n      open={modalOpen}\r\n      onClose={handleClose}\r\n    >\r\n      <div style={modalStyle} className={classes.paper}>\r\n        <Header />\r\n        <ModifyProductForm />\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ModifyProductModal;","import React from 'react';\r\nimport { Formik, Form, Field } from 'formik';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport * as Yup from 'yup';\r\n\r\nimport userService from '../../services/userService';\r\nimport { AppDispatch, useAppDispatch, useAppSelector } from '../../store/rootReducer';\r\nimport { setNotification } from '../../store/Notification/actionCreators';\r\nimport { handleModal } from '../../store/modal/actionCreators';\r\nimport { logIn } from '../../store/User/actionCreators';\r\nimport useStyles from '../formStyles';\r\nimport UserForm from './UserForm';\r\n\r\n const SignupSchema = Yup.object().shape({\r\n    userName: Yup\r\n      .string()\r\n      .min(2, 'Too Short!')\r\n      .max(50, 'Too Long!')\r\n      .required('Required'),\r\n\r\n    firstName: Yup\r\n      .string()\r\n      .min(2, 'Too Short!')\r\n      .max(50, 'Too Long!')\r\n      .required('Required'),\r\n\r\n    lastName: Yup\r\n      .string()\r\n      .min(2, 'Too Short!')\r\n      .max(50, 'Too Long!')\r\n      .required('Required'),\r\n\r\n    password: Yup\r\n      .string(),\r\n\r\n    email: Yup\r\n      .string()\r\n      .email('Invalid email')\r\n      .required('Required'),\r\n });\r\n \r\n const ModifyUserForm = ():JSX.Element => {\r\n   const classes = useStyles();\r\n   const dispatch: AppDispatch = useAppDispatch();\r\n   const loggedUser: Credentials | undefined = useAppSelector(state => state.userReducer.user);\r\n   if (!loggedUser) return <div></div>;\r\n   return (\r\n    <div>\r\n      <Formik\r\n        initialValues={{\r\n          userName: loggedUser.userName,\r\n          firstName: loggedUser.firstName,\r\n          lastName: loggedUser.lastName,\r\n          password: '',\r\n          email: loggedUser.email,\r\n        }}\r\n        validationSchema={SignupSchema}\r\n        onSubmit={values => {\r\n          const modifiedUser: User = { \r\n            _id: loggedUser._id,\r\n            userName: values.userName,\r\n            firstName: values.firstName,\r\n            lastName: values.lastName,\r\n            password: values.password,\r\n            email: values.email,\r\n          };\r\n          console.log(modifiedUser);\r\n          const promise = userService.modifyUser(modifiedUser);\r\n          promise.then((res) => {\r\n            // TODO: Korjaa backendi palauttamaan mikä kohta lomakkeessa feilaa\r\n            if (!res) {\r\n              dispatch(setNotification(\"User modification failed\",  'error'));\r\n            } else {\r\n              dispatch(handleModal(false, 'ModifyUser'));\r\n              dispatch(logIn({\r\n                ...modifiedUser,\r\n                _id: loggedUser._id,\r\n                userType: loggedUser.userType,\r\n                token: loggedUser.token,\r\n                recentActivity: loggedUser.recentActivity,\r\n                platformInfo: loggedUser.platformInfo,\r\n                avatar: res.avatar\r\n              }));\r\n              window.localStorage.setItem(\r\n                'loggedUser', JSON.stringify({ ...modifiedUser, _id: loggedUser._id, userType: loggedUser.userType, token: loggedUser.token })\r\n              );\r\n            }\r\n          }).catch(e => console.log(e));    \r\n        }}\r\n      >\r\n        {({ errors, touched }) => (\r\n          <UserForm errors={errors} touched={touched} />\r\n        )}\r\n      </Formik>\r\n    </div>\r\n );\r\n};\r\n\r\n export default ModifyUserForm;","import React, { useState } from \"react\";\r\nimport Modal from '@material-ui/core/Modal';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useAppSelector, AppDispatch, useAppDispatch } from '../store/rootReducer';\r\nimport { handleModal } from '../store/modal/actionCreators';\r\nimport ModifyUserForm from \"../forms/User/ModifyUserForm\";\r\n\r\nconst getModalStyle = () => {\r\n  const top = 50;\r\n  const left = 50;\r\n  return {\r\n      top: `${top}%`,\r\n      left: `${left}%`,\r\n      transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n};\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  modal: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n\r\n  paper: {\r\n    position: 'absolute',\r\n    width: 745,\r\n    height: 370,\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 4, 3),\r\n  },\r\n\r\n  header: {\r\n    background: 'linear-gradient(45deg, #124eb0 70%, #501573 90%)',\r\n    border: 0,\r\n    borderRadius: 30,\r\n    boxShadow: '0 3px 5px 2px rgba(255, 105, 135, .3)',\r\n    color: 'white',\r\n    textAlign: 'center',\r\n    height: 30,\r\n    marginTop: 5,\r\n    padding: 10,\r\n    marginBottom: 30\r\n  },\r\n}));\r\n\r\nconst Header: React.FC = () => {\r\n  const classes = useStyles();\r\n  return (\r\n    <h2 className={classes.header}> Muokkaa käyttäjätietoja </h2>\r\n  );\r\n};\r\n\r\nconst ModifyUserInfoModal: React.FC = () => {\r\n  const classes = useStyles();\r\n  const [modalStyle] = useState(getModalStyle);\r\n\r\n  const modalOpen = useAppSelector(state => state.modalReducer.modifyUserInfoModal);\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n  \r\n  const handleClose = () => {\r\n    dispatch(handleModal(!modalOpen, 'ModifyUser'));\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      aria-labelledby=\"simple-modal-title\"\r\n      aria-describedby=\"simple-modal-description\"\r\n      open={modalOpen}\r\n      onClose={handleClose}\r\n    >\r\n      <div style={modalStyle} className={classes.paper}>\r\n        <Header />\r\n        <ModifyUserForm />\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ModifyUserInfoModal;","import React, { useState } from 'react';\r\nimport userService from '../../services/userService';\r\nimport { logIn } from '../../store/User/actionCreators';\r\nimport { Form, Field, Formik} from 'formik';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport * as Yup from 'yup';\r\nimport { AppDispatch, useAppDispatch, useAppSelector } from '../../store/rootReducer';\r\nimport { handleModal } from '../../store/modal/actionCreators';\r\nimport useStyles from '../formStyles';\r\n\r\n const ModifyImageSchema = Yup.object().shape({\r\n  image: Yup\r\n    .mixed()\r\n });\r\n\r\n const ModifyAvatar = ():JSX.Element => {\r\n  const classes = useStyles();\r\n  const [ image, setImage ] = useState<File>();\r\n  const user = useAppSelector(state => state.userReducer.user);\r\n  const userId = user? user._id : '';\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n    return (\r\n      <div>\r\n        <Formik\r\n          initialValues={{\r\n            image: '' as unknown as File\r\n          }}\r\n          validationSchema={ModifyImageSchema}\r\n          onSubmit={values => {\r\n            const { image } = values;\r\n            void userService.modifyAvatar(image, userId)\r\n              .then((res) => {\r\n                if (res.avatar && user) {\r\n                  void dispatch(logIn({ ...user, avatar: res.avatar }));\r\n                  void dispatch(handleModal(false, 'ModifyUserAvatar'));     \r\n                }\r\n            });\r\n          }}\r\n        >\r\n          {({ setFieldValue, submitForm }) => (\r\n            <Form>\r\n            <Grid container spacing={1}>\r\n              \r\n              <Grid container item xs={12} spacing={3}>\r\n                <Grid item xs={2}>\r\n                  <label> Kuvake: </label>\r\n                </Grid>\r\n                <Grid item xs={9}>\r\n                  <Field\r\n                    className={classes.field}\r\n                    type=\"File\"\r\n                    name=\"image\"\r\n                    value={undefined}\r\n                    style={{ color: 'rgba(0,0,0,0)'}}\r\n                    onChange={(event:React.ChangeEvent<HTMLInputElement>) => {\r\n                      setFieldValue('image', event.currentTarget.files? event.currentTarget.files[0] : undefined);\r\n                      setImage(event.currentTarget.files? event.currentTarget.files[0] : undefined);\r\n                    }}\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={1}>\r\n                  {image && \r\n                    <button type=\"button\" onClick={() => {\r\n                      setFieldValue('image', undefined);\r\n                      setImage(undefined);\r\n                    }}> \r\n                      Cancel\r\n                    </button>\r\n                  }\r\n                </Grid>\r\n              </Grid>\r\n              <Grid container item xs={12} spacing={3}>\r\n                <Grid item xs={2}>\r\n                  <label> Kuvakkeen esikatselu: </label>\r\n                </Grid>\r\n                <Grid item xs={9}>\r\n                  {image ? \r\n                    <img height={100} width={100} src={ URL.createObjectURL(image) } alt=\"Preview to upload\" />\r\n                  :\r\n                    <img height={100} width={100} src={'https://live.staticflickr.com/5217/5471047557_4dc13f5376_n.jpg'} alt=\"Preview to upload\" />\r\n                  }\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n            <button className={classes.button} onClick={submitForm} type=\"submit\">Lähetä</button>\r\n          </Form>\r\n          )}\r\n        </Formik>\r\n      </div>\r\n  );\r\n};\r\n\r\n export default ModifyAvatar;","import React, { useState } from \"react\";\r\nimport Modal from '@material-ui/core/Modal';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useAppSelector, AppDispatch, useAppDispatch } from '../store/rootReducer';\r\nimport { handleModal } from '../store/modal/actionCreators';\r\nimport ModifyUserAvatar from \"../forms/User/ModifyAvatar\";\r\n\r\nconst getModalStyle = () => {\r\n  const top = 50;\r\n  const left = 50;\r\n  return {\r\n      top: `${top}%`,\r\n      left: `${left}%`,\r\n      transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n};\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  modal: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n\r\n  paper: {\r\n    position: 'absolute',\r\n    width: 650,\r\n    height: 300,\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 4, 3),\r\n  },\r\n\r\n  header: {\r\n    background: 'linear-gradient(45deg, #124eb0 70%, #501573 90%)',\r\n    border: 0,\r\n    borderRadius: 30,\r\n    boxShadow: '0 3px 5px 2px rgba(255, 105, 135, .3)',\r\n    color: 'white',\r\n    textAlign: 'center',\r\n    height: 30,\r\n    marginTop: 5,\r\n    padding: 10,\r\n    marginBottom: 30\r\n  },\r\n}));\r\n\r\nconst Header: React.FC = () => {\r\n  const classes = useStyles();\r\n  return (\r\n    <h2 className={classes.header}> Vaihda kuvake </h2>\r\n  );\r\n};\r\n\r\nconst ModifyUserAvatarModal: React.FC = () => {\r\n  const classes = useStyles();\r\n  const [modalStyle] = useState(getModalStyle);\r\n\r\n  const modalOpen = useAppSelector(state => state.modalReducer);\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n  \r\n  const handleClose = () => {\r\n    dispatch(handleModal(!modalOpen.modifyUserAvatarModal, 'ModifyUserAvatar'));\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      aria-labelledby=\"simple-modal-title\"\r\n      aria-describedby=\"simple-modal-description\"\r\n      open={modalOpen.modifyUserAvatarModal}\r\n      onClose={handleClose}\r\n    >\r\n      <div style={modalStyle} className={classes.paper}>\r\n        <Header />\r\n        <ModifyUserAvatar />\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ModifyUserAvatarModal;","import axios from 'axios';\r\n\r\n// TODO: FIX RETURN TYPES\r\n\r\nconst baseURL = 'http://localhost:3001/api/shoppingCart';\r\n\r\nconst createNewShoppingCart = async (products: ShoppingCart): Promise<ShoppingCart> => {\r\n  const request = await axios.post<ShoppingCart>(baseURL, products);\r\n  return request.data;\r\n};\r\n\r\nconst getUsersShoppingCart = async (userId: string):Promise<ShoppingCart | null> => {\r\n  const request = await axios.get<ShoppingCart | null>(`${baseURL}/${userId}`);\r\n  return request.data;\r\n};\r\n\r\nconst addProductToShoppingCart = async (productToAdd: CartProduct):Promise<ShoppingCartProduct> => {\r\n  const request = await axios.post<ShoppingCartProduct>(`${baseURL}/${productToAdd.cartId}/addProduct`, productToAdd);\r\n  return request.data;\r\n};\r\n  \r\nconst removeProductFromShoppingCart = async (productToRemove: CartProduct): Promise<ShoppingCartProduct> => {\r\n  const request = await axios.put<ShoppingCartProduct>(`${baseURL}/${productToRemove.cartId}/remove`, productToRemove);\r\n  return request.data;\r\n};\r\n\r\nconst increaseProductQuantity = async (product: CartProduct):Promise<ShoppingCartProduct> => {\r\n  const request = await axios.put<ShoppingCartProduct>(`${baseURL}/${product.cartId}/increase`, product);\r\n  return request.data;\r\n};\r\n\r\nconst decreaseProductQuantity = async (product: CartProduct):Promise<ShoppingCartProduct> => {\r\n  const request = await axios.put<ShoppingCartProduct>(`${baseURL}/${product.cartId}/decrease`, product);\r\n  return request.data;\r\n};\r\n\r\nconst setShoppingCartActivity = async (cartId: string, data: boolean):Promise<ShoppingCart> => {\r\n  const request = await axios.put<ShoppingCart>(`${baseURL}/${cartId}/activity`, { data: data });\r\n  return request.data;\r\n};\r\n\r\nconst setShoppingCartCompleted = async (cartId: string):Promise<ShoppingCart | null> => {\r\n  const request = await axios.put<ShoppingCart | null>(`${baseURL}/${cartId}/completed`);\r\n  return request.data;\r\n};\r\n\r\nconst removeShoppingCart = async (userId: string):Promise<ShoppingCart> => {\r\n  const request = await axios.delete<ShoppingCart>(`${baseURL}/${userId}`);\r\n  return request.data;\r\n};\r\n\r\nexport default {\r\n  createNewShoppingCart,\r\n  addProductToShoppingCart,\r\n  increaseProductQuantity,\r\n  decreaseProductQuantity,\r\n  removeProductFromShoppingCart,\r\n  getUsersShoppingCart,\r\n  removeShoppingCart,\r\n  setShoppingCartActivity,\r\n  setShoppingCartCompleted,\r\n};","import * as actionTypes from \"./actionTypes\";\r\nimport { notificationTypeCheck } from '../../typeGuards';\r\n\r\ntype SetNotification = (dispatch: DispatchType) => void;\r\n\r\nexport const setNotification = (data: string, notificationType: NotificationType): SetNotification => {\r\n  if (notificationTypeCheck(notificationType)) {\r\n    const action: SetNotificationAction = {\r\n      type: actionTypes.SET_NOTIFICATION,\r\n      notificationType: notificationType,\r\n      data,\r\n    };\r\n  \r\n    return (dispatch: DispatchType) => {\r\n      dispatch(action);\r\n    };\r\n  }\r\n  else {\r\n    const action: SetNotificationAction = {\r\n      type: actionTypes.SET_NOTIFICATION,\r\n      notificationType: 'error',\r\n      data,\r\n    };\r\n  \r\n    return (dispatch: DispatchType) => {\r\n      dispatch(action);\r\n    };\r\n  }\r\n};\r\n\r\nexport const hideNotification = (): SetNotification => {\r\n    const action: SetNotificationAction = {\r\n      type: actionTypes.HIDE_NOTIFICATION,\r\n      notificationType: 'error',\r\n      data: '',\r\n    };\r\n  \r\n    return (dispatch: DispatchType) => {\r\n      dispatch(action);\r\n    };\r\n};","import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { IconButton, MenuItem, ListItemIcon, ListItemText } from '@material-ui/core/';\r\nimport Menu, { MenuProps } from '@material-ui/core/Menu';\r\nimport { Person, ShoppingBasket, AccountCircle } from '@material-ui/icons';\r\n\r\nconst StyledMenu = withStyles({\r\n  paper: {\r\n    border: '1px solid #d3d4d5',\r\n  },\r\n})((props: MenuProps) => (\r\n  <Menu\r\n    elevation={0}\r\n    getContentAnchorEl={null}\r\n    anchorOrigin={{\r\n      vertical: 'bottom',\r\n      horizontal: 'center',\r\n    }}\r\n    transformOrigin={{\r\n      vertical: 'top',\r\n      horizontal: 'center',\r\n    }}\r\n    {...props}\r\n  />\r\n));\r\n\r\nconst StyledMenuItem = withStyles((theme) => ({\r\n  root: {\r\n    '&:focus': {\r\n      backgroundColor: theme.palette.primary.main,\r\n      '& .MuiListItemIcon-root, & .MuiListItemText-primary': {\r\n        color: theme.palette.common.white,\r\n      },\r\n    },\r\n  },\r\n}))(MenuItem);\r\n\r\nconst AccountMenu = (): JSX.Element => {\r\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n\r\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton style={{ color: 'white'}} onClick={handleClick}>\r\n        <AccountCircle style={{ fontSize: 30, marginTop: 5}}/>\r\n      </IconButton>\r\n      <StyledMenu\r\n        id=\"customized-menu\"\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}\r\n      >\r\n        <Link to=\"/account\" style={{ textDecoration: 'none', color: 'black' }}>\r\n          <StyledMenuItem>\r\n              <ListItemIcon>\r\n                <Person fontSize=\"small\" />\r\n              </ListItemIcon>\r\n            <ListItemText primary=\"Käyttäjätiedot\" />\r\n          </StyledMenuItem>\r\n        </Link>\r\n        <Link to=\"/pastOrders\" style={{ textDecoration: 'none', color: 'black' }}>\r\n          <StyledMenuItem>\r\n            <ListItemIcon>\r\n              <ShoppingBasket fontSize=\"small\" />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"Aikaisemmat tilaukset\" />\r\n          </StyledMenuItem>\r\n        </Link>\r\n      </StyledMenu>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AccountMenu;","import * as actionTypes from './actionTypes';\r\n\r\ntype SetFilter = (dispatch: DispatchType) => void;\r\n\r\nexport const setFilter = (data: string): SetFilter => {\r\n  const action: SetFilterAction = {\r\n    type: actionTypes.SET_FILTER,\r\n    data\r\n  };\r\n\r\n  return (dispatch: DispatchType) => {\r\n    dispatch(action);\r\n  };\r\n};\r\n\r\nexport const setTag = (data?: Tag): SetFilter => {\r\n  const action: SetTagAction = {\r\n    type: actionTypes.SET_TAG,\r\n    data\r\n  };\r\n\r\n  return (dispatch: DispatchType) => {\r\n    dispatch(action);\r\n  };\r\n};","import React from 'react';\r\nimport { Formik, Form, Field } from 'formik';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport * as Yup from 'yup';\r\nimport swal from 'sweetalert';\r\nimport platform from 'platform';\r\n\r\nimport { platformParser } from '../../utils/platformParser';\r\nimport { AppDispatch, useAppDispatch, useAppSelector } from '../../store/rootReducer';\r\nimport userService from '../../services/userService';\r\nimport { logIn } from '../../store/User/actionCreators';\r\nimport { setNotification } from '../../store/Notification/actionCreators';\r\nimport { handleModal } from '../../store/modal/actionCreators';\r\nimport { createNewShoppingCart } from '../../store/ShoppingCart/actionCreators';\r\nimport shoppingCartService from '../../services/shoppingCartService';\r\nimport { retrieveOldShoppingCart } from '../../store/ShoppingCart/actionCreators'; \r\nimport useStyles from '../formStyles';\r\n\r\nconst SignupSchema = Yup.object().shape({\r\n  userName: Yup\r\n    .string()\r\n    .min(2, 'Too Short!')\r\n    .max(50, 'Too Long!')\r\n    .required('Required'),\r\n\r\n  password: Yup\r\n    .string()\r\n    .min(2, 'Too Short!')\r\n    .max(50, 'Too Long!')\r\n    .required('Required'),\r\n});\r\n\r\nconst LogInForm = ():JSX.Element => {\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n  const cartState: ShoppingCartState = useAppSelector(state => state.shoppingCartReducer);\r\n  const classes = useStyles();\r\n  \r\n  const platformInfo = platformParser(platform.name, platform.os?.family, platform.os?.version); \r\n\r\n  const usePreviousShoppingCart = (res: ShoppingCart) => { \r\n    if (res.products.length !== 0) {\r\n      void swal({\r\n        title: 'Keskeneräinen ostoskori havaittu',\r\n        text: 'Keskeneräinen ostoskori löydetty, haluatko jatkaa siitä mihin jäit viime kerralla vai luodaanko uusi? Vanha ostoskori poistetaan kokonaan mikäli halutaan luoda uusi',\r\n        icon: 'info',\r\n        buttons: ['Luo uusi!', 'Jatketaan edellistä!'],\r\n      })\r\n      .then((findPrevious) => {\r\n        if (findPrevious) {\r\n          dispatch(retrieveOldShoppingCart(res.id, res.products));\r\n          void shoppingCartService.setShoppingCartActivity(res.id, true);\r\n        } else {\r\n          const promise = shoppingCartService.createNewShoppingCart({ products: cartState.cart, user: res.user, id: '' });\r\n          void promise.then((response) => {            \r\n            const removed = shoppingCartService.removeShoppingCart(res.user);\r\n            void removed.then(() => {\r\n              console.log('removed shopping cart');\r\n            });\r\n            dispatch(createNewShoppingCart(response.id));\r\n          });\r\n        }\r\n      });\r\n    } else {\r\n      dispatch(retrieveOldShoppingCart(res.id, res.products));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Formik\r\n        initialValues={{\r\n          userName: '',\r\n          password: '',\r\n        }}\r\n        validationSchema={SignupSchema}\r\n        onSubmit={values => {\r\n          const user = userService.signIn(values.userName, values.password, platformInfo);\r\n          void user.then((res) => {\r\n            if (!res.token) {\r\n              dispatch(setNotification(\"Virheellinen käyttäjänimi / salasana\", 'error'));\r\n            } else {\r\n              const credentials: Credentials = {\r\n                _id: res._id,\r\n                firstName: res.firstName,\r\n                lastName: res.lastName,\r\n                userName: res.userName,\r\n                email: res.email,\r\n                userType: res.userType,\r\n                avatar: res.avatar,\r\n                token: res.token,\r\n                recentActivity: res.recentActivity,\r\n                platformInfo: res.platformInfo,\r\n                ratings: res.ratings,\r\n              };\r\n              const storeInfo: CredentialsWithTimeStamp = { ...credentials, timestamp: new Date };\r\n              window.localStorage.setItem(\r\n                'loggedUser', JSON.stringify(storeInfo)\r\n              );\r\n              dispatch(logIn(credentials));\r\n              dispatch(handleModal(false, 'LogIn'));\r\n              dispatch(setNotification(\"Kirjauduttu sisään: \" + credentials.userName, 'success'));\r\n              \r\n              const usersShoppingCart = shoppingCartService.getUsersShoppingCart(credentials._id);\r\n              void usersShoppingCart.then((res) => {\r\n                if (res) {\r\n                  usePreviousShoppingCart(res);      \r\n                } else {\r\n                  const promise = shoppingCartService.createNewShoppingCart({ products: cartState.cart, user: credentials._id, id: '' });\r\n                  void promise.then((res) => {\r\n                    dispatch(createNewShoppingCart(res.id));\r\n                  });\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }}\r\n      >\r\n        {({ errors, touched }) => (\r\n          <Form>\r\n            <Grid container spacing={1}>\r\n              <Grid container item xs={12} spacing={3}>\r\n                <Grid item xs={3}>\r\n                  <label>Käyttäjänimi: </label>\r\n                </Grid>\r\n                <Grid item xs={8}>\r\n                  <Field\r\n                    className={classes.field}\r\n                    placeholder=\"Käyttäjänimi\"\r\n                    type=\"text\"\r\n                    name=\"userName\"\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={1}>\r\n                  {(errors.userName && touched.userName) && (\r\n                    <div>{errors.userName}</div>\r\n                  )}\r\n                </Grid>\r\n              </Grid>\r\n              \r\n              <Grid container item xs={12} spacing={3}>\r\n                <Grid item xs={3}>\r\n                  <label>Salasana: </label>\r\n                </Grid>\r\n                <Grid item xs={8}>\r\n                  <Field\r\n                    className={classes.field}\r\n                    placeholder=\"Salasana\"\r\n                    type=\"password\"\r\n                    name=\"password\"\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={1}>\r\n                  {(errors.password && touched.password) && (\r\n                    <div>{errors.password}</div>\r\n                  )}\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n            <button className={classes.button} type=\"submit\">Submit</button>\r\n          </Form>\r\n        )}\r\n      </Formik>      \r\n    </div>\r\n );\r\n};\r\n\r\n export default LogInForm;\r\n","export const platformParser = (name: string | undefined, family: string | undefined, version: string | undefined): string => {\r\n  let string = '';\r\n  if (name) {\r\n    string += name + ' ';\r\n  } else {\r\n    string += 'unknown name ';\r\n  }\r\n  if (family) {\r\n    string += family + ' ';\r\n  } else {\r\n    string += 'unknown os ';\r\n  }\r\n  if (version) {\r\n    string += version;\r\n  } else {\r\n    string += 'unknown version ';\r\n  }\r\n\r\n  return string;\r\n};","import React, { useState } from \"react\";\r\nimport Modal from '@material-ui/core/Modal';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport LogInForm from '../forms/User/LogInForm';\r\nimport { useAppSelector, AppDispatch, useAppDispatch } from '../store/rootReducer';\r\nimport { handleModal } from '../store/modal/actionCreators';\r\n\r\nconst getModalStyle = () => {\r\n  const top = 50;\r\n  const left = 50;\r\n  return {\r\n      top: `${top}%`,\r\n      left: `${left}%`,\r\n      transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n};\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  modal: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n  },\r\n  paper: {\r\n      position: 'absolute',\r\n      width: 450,\r\n      height: 190,\r\n      backgroundColor: theme.palette.background.paper,\r\n      boxShadow: theme.shadows[5],\r\n      padding: theme.spacing(2, 4, 3),\r\n  },\r\n  header: {\r\n    background: 'linear-gradient(45deg, #124eb0 70%, #501573 90%)',\r\n    border: 0,\r\n    borderRadius: 30,\r\n    boxShadow: '0 3px 5px 2px rgba(255, 105, 135, .3)',\r\n    color: 'white',\r\n    textAlign: 'center',\r\n    height: 30,\r\n    marginTop: 5,\r\n    padding: '0 30px',\r\n  },\r\n}));\r\n\r\nconst Header: React.FC = () => {\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <h2 className={classes.header}> Kirjaudu sisään </h2>\r\n  );\r\n};\r\n\r\n\r\nconst LogInModal: React.FC = () => {\r\n  const classes = useStyles();\r\n  const [modalStyle] = useState(getModalStyle);\r\n\r\n  const modalOpen = useAppSelector(state => state.modalReducer.logInModal);\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n  \r\n  const handleClose = () => {\r\n    dispatch(handleModal(!modalOpen, 'LogIn'));\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      aria-labelledby=\"simple-modal-title\"\r\n      aria-describedby=\"simple-modal-description\"\r\n      open={modalOpen}\r\n      onClose={handleClose}\r\n    >\r\n      <div style={modalStyle} className={classes.paper}>\r\n        <Header />\r\n        <LogInForm />\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default LogInModal;","import React, { useState } from 'react';\r\nimport { Formik } from 'formik';\r\nimport * as Yup from 'yup';\r\n\r\nimport { AppDispatch, useAppDispatch } from '../../store/rootReducer';\r\nimport productService from '../../services/productService';\r\nimport { addProduct } from '../../store/Product/actionCreators';\r\nimport { setNotification } from '../../store/Notification/actionCreators';\r\nimport ProductForm from './ProductForm';\r\n\r\n const SignupSchema = Yup.object().shape({\r\n  name: Yup\r\n    .string()\r\n    .required(\"Required\"),\r\n  description: Yup\r\n    .string(),\r\n  price: Yup\r\n    .number()\r\n    .required(\"Required\"),\r\n  stock: Yup\r\n    .number(),\r\n  image: Yup\r\n    .mixed()\r\n });\r\n\r\n const AddProductForm = ():JSX.Element => {\r\n  const [ image, setImage ] = useState<File>();\r\n  const [ tags, setTags ] = useState<Tag[]>([]);\r\n\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n    return (\r\n      <div>\r\n        <Formik\r\n          initialValues={{\r\n            name: '',\r\n            description: '',\r\n            price: 0,\r\n            stock: 0,\r\n            image: '' as unknown as File\r\n          }}\r\n          \r\n          validationSchema={SignupSchema}\r\n          onSubmit={values => {\r\n            const { name, description, price, stock, image } = values;\r\n            const product: NoIdProduct = { name, description, price, stock, ratings: [], tags: tags };\r\n            const promise = productService.addProduct(product, image);\r\n            void promise.then((res) => {\r\n              if (res !== null) {\r\n                const addedProduct: Product = {\r\n                  name: res.name,\r\n                  description: res.description,\r\n                  price: res.price,\r\n                  stock: res.stock,\r\n                  image: res.image,\r\n                  ratings: res.ratings,\r\n                  tags: [],\r\n                  _id: res._id\r\n                };\r\n                dispatch(addProduct(addedProduct));\r\n                dispatch(setNotification(`Product ${product.name} added`, 'success'));\r\n              } \r\n            });\r\n          }}\r\n        >\r\n          {({ errors, touched, setFieldValue, submitForm }) => (\r\n            <ProductForm\r\n              errors={errors}\r\n              touched={touched}\r\n              setFieldValue={setFieldValue}\r\n              image={image}\r\n              setImage={setImage}\r\n              submitForm={submitForm}\r\n              tags={tags}\r\n              setTags={setTags}\r\n            />\r\n          )}\r\n        </Formik>\r\n      </div>\r\n  );\r\n};\r\n\r\n export default AddProductForm;","import React, { useState } from \"react\";\r\nimport Modal from '@material-ui/core/Modal';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AddProductForm from '../forms/product/AddProductForm';\r\n\r\nimport { useAppSelector, AppDispatch, useAppDispatch } from '../store/rootReducer';\r\nimport { handleModal } from '../store/modal/actionCreators';\r\n\r\nconst getModalStyle = () => {\r\n  const top = 50;\r\n  const left = 50;\r\n  return {\r\n      top: `${top}%`,\r\n      left: `${left}%`,\r\n      transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n};\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  modal: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n  },\r\n\r\n  paper: {\r\n      position: 'absolute',\r\n      width: 650,\r\n      height: 550,\r\n      backgroundColor: theme.palette.background.paper,\r\n      boxShadow: theme.shadows[5],\r\n      padding: theme.spacing(2, 4, 3),\r\n  },\r\n\r\n  header: {\r\n    background: 'linear-gradient(45deg, #124eb0 70%, #501573 90%)',\r\n    border: 0,\r\n    borderRadius: 30,\r\n    boxShadow: '0 3px 5px 2px rgba(255, 105, 135, .3)',\r\n    color: 'white',\r\n    textAlign: 'center',\r\n    height: 30,\r\n    marginTop: 5,\r\n    padding: '0 30px',\r\n  },\r\n}));\r\n\r\nconst Header: React.FC = () => {\r\n  const classes = useStyles();\r\n  return (\r\n    <h2 className={classes.header}> Lisää uusi tuote </h2>\r\n  );\r\n};\r\n\r\nconst AddProductModal: React.FC = () => {\r\n  const classes = useStyles();\r\n  const [modalStyle] = useState(getModalStyle);\r\n\r\n  const modalOpen = useAppSelector(state => state.modalReducer.addProductModal);\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n  \r\n  const handleClose = () => {\r\n    dispatch(handleModal(!modalOpen, 'AddProduct'));\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      aria-labelledby=\"simple-modal-title\"\r\n      aria-describedby=\"simple-modal-description\"\r\n      open={modalOpen}\r\n      onClose={handleClose}\r\n    >\r\n      <div style={modalStyle} className={classes.paper}>\r\n        <Header />\r\n        <AddProductForm />\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default AddProductModal;  ","import React from 'react';\r\nimport { Formik, Form, Field } from 'formik';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport * as Yup from 'yup';\r\nimport userService from '../../services/userService';\r\nimport { AppDispatch, useAppDispatch } from '../../store/rootReducer';\r\nimport { setNotification } from '../../store/Notification/actionCreators';\r\nimport { handleModal } from '../../store/modal/actionCreators';\r\nimport useStyles from '../formStyles';\r\nimport UserForm from './UserForm';\r\n\r\nconst SignupSchema = Yup.object().shape({\r\n  userName: Yup\r\n    .string()\r\n    .min(2, 'Too Short!')\r\n    .max(50, 'Too Long!')\r\n    .required('Required'),\r\n\r\n  firstName: Yup\r\n    .string()\r\n    .min(2, 'Too Short!')\r\n    .max(50, 'Too Long!')\r\n    .required('Required'),\r\n\r\n  lastName: Yup\r\n    .string()\r\n    .min(2, 'Too Short!')\r\n    .max(50, 'Too Long!')\r\n    .required('Required'),\r\n\r\n  password: Yup\r\n    .string()\r\n    .min(2, 'Too Short!')\r\n    .max(50, 'Too Long!')\r\n    .required('Required'),\r\n\r\n  email: Yup\r\n    .string()\r\n    .email('Invalid email')\r\n    .required('Required'),\r\n});\r\n\r\nconst CreateUserForm = ():JSX.Element => {\r\n  const classes = useStyles();\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n  return (\r\n    <div>\r\n      <Formik\r\n        initialValues={{\r\n          userName: '',\r\n          firstName: '',\r\n          lastName: '',\r\n          password: '',\r\n          email: '',\r\n        }}\r\n        validationSchema={SignupSchema}\r\n        onSubmit={values => {\r\n          const newUser: NoIdUser = { \r\n            userName: values.userName,\r\n            firstName: values.firstName,\r\n            lastName: values.lastName,\r\n            password: values.password,\r\n            email: values.email,\r\n            userType: 'User',\r\n          };\r\n          const promise = userService.createUser(newUser);\r\n          promise.then((res) => {\r\n            // TODO: Korjaa backendi palauttamaan mikä kohta lomakkeessa feilaa\r\n            if (!res) {\r\n              dispatch(setNotification(\"User creation failed\",  'error'));\r\n            } else {\r\n              dispatch(handleModal(false, 'CreateUser'));\r\n              dispatch(setNotification(\"Created user: \" + newUser.userName, 'success'));\r\n            }\r\n          }).catch(e => console.log(e));    \r\n        }}\r\n      >\r\n        {({ errors, touched }) => (\r\n          <UserForm errors={errors} touched={touched} />\r\n        )}\r\n      </Formik>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateUserForm;","import React, { useState } from \"react\";\r\nimport Modal from '@material-ui/core/Modal';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport CreateUserForm from \"../forms/User/CreateUserForm\";\r\n\r\nimport { AppDispatch, useAppDispatch, useAppSelector } from '../store/rootReducer';\r\nimport { handleModal } from \"../store/modal/actionCreators\";\r\n\r\nconst getModalStyle = () => {\r\n  const top = 50;\r\n  const left = 50;\r\n  return {\r\n      top: `${top}%`,\r\n      left: `${left}%`,\r\n      transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n};\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  modal: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n\r\n  paper: {\r\n    position: 'absolute',\r\n    width: 745,\r\n    height: 370,\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 4, 3),\r\n  },\r\n\r\n  header: {\r\n    background: 'linear-gradient(45deg, #124eb0 70%, #501573 90%)',\r\n    border: 0,\r\n    borderRadius: 30,\r\n    boxShadow: '0 3px 5px 2px rgba(255, 105, 135, .3)',\r\n    color: 'white',\r\n    textAlign: 'center',\r\n    height: 30,\r\n    marginTop: 5,\r\n    padding: 10,\r\n    marginBottom: 30\r\n  },\r\n}));\r\n\r\nconst Header: React.FC = () => {\r\n  const classes = useStyles();\r\n  return (\r\n    <h2 className={classes.header}> Luo käyttäjätili </h2>\r\n  );\r\n};\r\n\r\nconst CreateUserModal: React.FC = () => {\r\n  const classes = useStyles();\r\n  const [modalStyle] = useState(getModalStyle);\r\n  \r\n  const dispatch: AppDispatch = useAppDispatch();\r\n  const modalOpen = useAppSelector(state => state.modalReducer.createUserModal);\r\n\r\n  const handleClose = () => {\r\n    dispatch(handleModal(false, 'CreateUser'));\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      aria-labelledby=\"simple-modal-title\"\r\n      aria-describedby=\"simple-modal-description\"\r\n      open={modalOpen}\r\n      onClose={handleClose}\r\n    >\r\n      <div style={modalStyle} className={classes.paper}>\r\n        <Header />\r\n        <CreateUserForm />\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default CreateUserModal;  ","import React, { useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { IconButton, Button, Typography, Toolbar, AppBar, Tooltip, TextField } from '@material-ui/core/';\r\nimport { AddCircleOutline, Menu, Search, ShoppingCart, Backspace } from '@material-ui/icons/';\r\nimport { Link, Redirect } from \"react-router-dom\";\r\n\r\nimport AccountMenu from './AccountMenu';\r\nimport { logIn } from '../store/User/actionCreators';\r\nimport { useAppDispatch, AppDispatch, useAppSelector } from '../store/rootReducer';\r\nimport { setNotification } from '../store/Notification/actionCreators';\r\nimport { setFilter } from '../store/Filter/actionCreators';\r\nimport LogInModal from '../modals/LogInModal';\r\nimport AddProductModal from '../modals/AddProductModal';\r\nimport CreateUserModal from '../modals/CreateUserModal';\r\nimport { clearShoppingCart } from '../store/ShoppingCart/actionCreators';\r\nimport { handleModal } from '../store/modal/actionCreators';\r\nimport shoppingCartService from '../services/shoppingCartService';\r\nconst useStyles = makeStyles((theme) => ({\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    marginRight: theme.spacing(10),\r\n  },\r\n  buttons: {\r\n    display: 'flex',\r\n    marginLeft: 'auto',\r\n    marginRight: -12,\r\n    fontSize: 15\r\n  },\r\n  login: {\r\n    margin: theme.spacing(2),\r\n    fontSize: 15,\r\n    flexDirection: 'column'\r\n  },\r\n  addProductIcon: {\r\n    height: 30,\r\n    width: 30,\r\n  },\r\n  whiteIcon: {\r\n    color: 'white',\r\n    fontSize: 30\r\n  },\r\n  searchIcon: {\r\n    color: 'white',\r\n  }\r\n}));\r\n\r\ntype Props = {\r\n  user?: Credentials\r\n};\r\n\r\nconst Navibar = ({ user }: Props): JSX.Element => {\r\n  const [ searchText, setSearchText ] = useState('');\r\n  const [ redirect, setRedirect ] = useState('');\r\n  const loggedIn = !!user;\r\n\r\n  useEffect(() => {\r\n    loggedIn && setRedirect('');\r\n  }, [user]);\r\n\r\n  const classes = useStyles();\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n  const cartId = useAppSelector(state => state.shoppingCartReducer.cartId);\r\n  \r\n  const logOut = () => {\r\n    void shoppingCartService.setShoppingCartActivity(cartId, false);\r\n    dispatch(logIn());\r\n    dispatch(clearShoppingCart());\r\n    dispatch(setNotification(\"Have a nice day\", 'success'));\r\n    window.localStorage.removeItem('loggedUser');\r\n    setRedirect('/');\r\n  };\r\n\r\n  const handleSearchText = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    event.preventDefault();\r\n    setSearchText(event.target.value);\r\n  };\r\n\r\n  const filterProducts = () => {\r\n    dispatch(setFilter(searchText));\r\n  };\r\n\r\n  const clearFilter = () => {\r\n    setSearchText('');\r\n    dispatch(setFilter(''));\r\n  };\r\n\r\n  \r\n  return (\r\n    <div>\r\n      {redirect && <Redirect to={redirect} /> }\r\n      <AppBar position=\"static\" color=\"primary\">\r\n        <Toolbar>\r\n          <Link to=\"/\">\r\n            <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\r\n              <Menu />\r\n            </IconButton>\r\n          </Link>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            Verkkokauppa\r\n          </Typography>\r\n          <TextField \r\n            placeholder=\"Etsi tuotteita\"\r\n            onChange={handleSearchText}\r\n            style={{ backgroundColor: '#dae1f0'}}\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            value={searchText}\r\n          />\r\n          <IconButton onClick={() => filterProducts()}>\r\n            <Search className={classes.searchIcon}/>\r\n          </IconButton>\r\n          <IconButton onClick={() => clearFilter()}>\r\n            <Tooltip title=\"Tyhjennä hakukenttä\">\r\n              <Backspace className={classes.searchIcon} />\r\n            </Tooltip>\r\n          </IconButton>\r\n          <div className={classes.buttons}>\r\n            {user?.userType === 'Admin' && (\r\n              <IconButton onClick={() => dispatch(handleModal(true, 'AddProduct'))} color=\"inherit\">\r\n                <Tooltip title=\"Lisää tuote\">\r\n                  <AddCircleOutline className={classes.addProductIcon} />\r\n                </Tooltip>\r\n              </IconButton>\r\n            )}\r\n            <div>\r\n              <Button onClick={() => loggedIn ? logOut() : dispatch(handleModal(true, 'LogIn'))} color=\"inherit\">\r\n                <Typography variant=\"h6\" className={classes.login}>\r\n                  {loggedIn ? 'Kirjaudu ulos' : 'Kirjaudu sisään'}\r\n                </Typography>\r\n              </Button>\r\n            </div>  \r\n            {!user && \r\n              <div>\r\n                <Button onClick={() => dispatch(handleModal(true, 'CreateUser'))} color=\"inherit\">\r\n                  <Typography variant=\"h6\" className={classes.login}>\r\n                    Luo käyttäjätili\r\n                  </Typography>\r\n                </Button>\r\n              </div>  \r\n            }\r\n            <div>\r\n              <Link to=\"/shoppingCart\">\r\n                <IconButton className={classes.whiteIcon} >\r\n                  <ShoppingCart style={{ fontSize: 30, marginTop: 5}}/>\r\n                </IconButton>\r\n              </Link>\r\n            </div>\r\n            {user &&\r\n              <div>\r\n                <AccountMenu />\r\n              </div>\r\n            }\r\n          </div>\r\n        </Toolbar>\r\n        <LogInModal />\r\n        <AddProductModal />\r\n        <CreateUserModal />\r\n      </AppBar>\r\n      \r\n    </div>\r\n  );\r\n};\r\n\r\nexport { Navibar };\r\n","import React from \"react\";\r\nimport { Product } from './Product';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useAppSelector } from '../store/rootReducer';\r\nimport { Typography, Grid } from '@material-ui/core/';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    position: 'relative',\r\n    display: 'flex',\r\n    paddingLeft: 15,\r\n    maxWidth: 1200\r\n  },\r\n});\r\n\r\nconst ProductListPage = (): JSX.Element | null => {\r\n  const classes = useStyles();\r\n  const products: Product[] = useAppSelector(\r\n    state => state.productReducer.products\r\n  );\r\n\r\n  const filter = useAppSelector(state => state.filterReducer);\r\n\r\n  if (products.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  const createNewRow = (index: number) => {\r\n    return (\r\n      <Grid key={index} style={{ marginTop: 10 }} item xs={12}></Grid>\r\n    );\r\n  };\r\n\r\n  const filteredByName = filter.productFilter.length === 0 ?\r\n    products :\r\n    products.filter(p => p.name.toLowerCase().includes(filter.productFilter.toLowerCase()));\r\n  \r\n\r\n  const filteredProducts = filter.tagFilter?\r\n    filteredByName.filter(p => {\r\n      if (filter.tagFilter && p.tags.includes(filter.tagFilter)) return p;\r\n    })\r\n    :\r\n    filteredByName;\r\n    \r\n  if (filteredProducts.length === 0) {\r\n    // TODO: Stylet filtteri ilmotukseen\r\n    return (\r\n      <div>\r\n        <Typography variant=\"h5\"> No results with current filter </Typography>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Grid container className={classes.root}>\r\n      {filteredProducts.map((product: Product, index) => (\r\n        index % 5 === 0? <> {createNewRow(index)} <Product key={product._id} product={product} /> </> : <Product key={product._id} product={product} />\r\n      ))}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport {ProductListPage};  ","import React, { useState, useEffect } from 'react';\r\n\r\nimport userService from '../services/userService';\r\nimport { useAppSelector } from '../store/rootReducer';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport { KeyboardArrowDown, KeyboardArrowUp } from '@material-ui/icons/';\r\nimport { parseDate } from '../utils/DateParser';\r\nimport { blue, grey } from '@material-ui/core/colors/';\r\n\r\ntype ShoppingCartWithCompletionDate = {\r\n  products: ShoppingCartProduct[],\r\n  user: string,\r\n  id: string,\r\n  completionDate: Date,\r\n};\r\n\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableRow,\r\n  TableHead,\r\n  TableContainer,\r\n  TableCell,\r\n  Paper,\r\n  Typography,\r\n  IconButton,\r\n  Collapse,\r\n  Box\r\n} from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    backgroundColor: grey[300],\r\n    '& > *': {\r\n      borderBottom: 'unset',\r\n    },\r\n  },\r\n  header: {\r\n    backgroundColor: '#3f51b5',\r\n  },\r\n  mainRow: {\r\n    backgroundColor: blue[200],\r\n  },\r\n  row: {  \r\n    '&:hover': {\r\n      backgroundColor: blue[200],\r\n    },\r\n  },\r\n  body: {\r\n    backgroundColor: grey[200],\r\n  }\r\n});\r\n\r\ninterface RowProps {\r\n  order: ShoppingCart\r\n}\r\n\r\nconst Row = ({ order }: RowProps):JSX.Element => {\r\n  const [ open, setOpen ] = useState<boolean>();\r\n  const classes = useStyles();\r\n\r\n  const totalPrice = () => {\r\n    return order.products.reduce((prev, cur) => prev + cur.price * cur.quantity, 0);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <TableRow className={`${classes.root}`}>\r\n        <TableCell>\r\n          <IconButton size=\"small\" onClick={() => setOpen(!open)}>\r\n            {open ? <KeyboardArrowUp /> : <KeyboardArrowDown />}\r\n          </IconButton>\r\n        </TableCell>\r\n        <TableCell component=\"th\" scope=\"row\"> {parseDate(order.completionDate)} </TableCell>\r\n        <TableCell />\r\n        <TableCell />\r\n        <TableCell />\r\n        <TableCell />\r\n      </TableRow>\r\n      <TableRow>\r\n        <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={6}>\r\n          <Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n            <Box margin={1}>\r\n              <Typography variant=\"h6\" gutterBottom component=\"div\">\r\n                Tilauksen kokonaishinta: &nbsp; {totalPrice()}\r\n              </Typography>\r\n              <Table size=\"small\" aria-label=\"purchases\">\r\n                <TableHead>\r\n                  <TableRow className={classes.body}>\r\n                    <TableCell>Nimi</TableCell>\r\n                    <TableCell>Hinta</TableCell>\r\n                    <TableCell align=\"right\">Määrä</TableCell>\r\n                    <TableCell align=\"right\">Hinta yhteensä</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody className={classes.body}>\r\n                  {order.products.map((product) => (\r\n                    <TableRow key={product._id} className={classes.row}>\r\n                      <TableCell component=\"th\" scope=\"row\">\r\n                        {product.name}\r\n                      </TableCell>\r\n                      <TableCell>{product.price}</TableCell>\r\n                      <TableCell align=\"right\">{product.quantity}</TableCell>\r\n                      <TableCell align=\"right\">\r\n                        {Math.round(product.quantity * product.price * 100) / 100}\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </Box>\r\n          </Collapse>\r\n        </TableCell>\r\n      </TableRow>\r\n    </>\r\n  );\r\n};\r\n\r\nconst sortOrders = (orders: ShoppingCart[]): ShoppingCartWithCompletionDate[] => {\r\n  const newList: ShoppingCartWithCompletionDate[] = orders as ShoppingCartWithCompletionDate[];\r\n  return newList.sort((o1, o2) => new Date(o2.completionDate).getTime() - new Date(o1.completionDate).getTime());\r\n};\r\n\r\nconst PastOrders = (): JSX.Element => {\r\n  const [ orders, setOrders ] = useState<ShoppingCart[]>([]);\r\n  const sortedOrders = sortOrders(orders);\r\n  const classes = useStyles();\r\n  const user = useAppSelector(state => state.userReducer.user);\r\n\r\n  if (!user) return <div></div>;\r\n\r\n  useEffect(() => {\r\n    void userService.getUsersCompletedShoppingcarts(user._id)\r\n      .then((res) => {\r\n        setOrders(res);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <TableContainer component={Paper}>\r\n      <Table aria-label=\"collapsible table\">\r\n        <TableHead>\r\n          <TableRow className={classes.header}>\r\n            <TableCell />\r\n            <TableCell style={{ color: 'white' }}>Tilauksen päivämäärä</TableCell>\r\n            <TableCell align=\"left\" />\r\n            <TableCell align=\"right\"/>\r\n            <TableCell align=\"right\"/>\r\n            <TableCell align=\"right\"/>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody className={classes.body}>\r\n          {sortedOrders.map((order) => (\r\n            <Row key={order.id} order={order}/>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n};\r\n\r\nexport default PastOrders;","import React from 'react';\r\nimport { Formik, Form, Field } from 'formik';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport * as Yup from 'yup';\r\n\r\nimport { AppDispatch, useAppDispatch, useAppSelector } from '../../store/rootReducer';\r\nimport { setNotification } from '../../store/Notification/actionCreators';\r\nimport { userCheck } from '../../typeGuards';\r\nimport shoppingCartService from '../../services/shoppingCartService';\r\nimport { clearShoppingCart } from '../../store/ShoppingCart/actionCreators';\r\nimport useStyles from '../formStyles';\r\n\r\nconst ShippingSchema = Yup.object().shape({\r\n  firstName: Yup\r\n    .string()\r\n    .required(\"Required\"),\r\n  lastName: Yup\r\n    .string()\r\n    .required(\"Required\"),\r\n  address: Yup\r\n    .string()\r\n    .required(\"Required\")\r\n});\r\n \r\nconst ShoppingCartForm = ():JSX.Element => {\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n  const classes = useStyles();\r\n\r\n  const user: Credentials | undefined = useAppSelector(state => state.userReducer.user);\r\n  const cartState: ShoppingCartState = useAppSelector(state => state.shoppingCartReducer);\r\n\r\n  return (\r\n    <div>\r\n      <Formik\r\n        initialValues={{\r\n          firstName: user ? user.firstName : '',\r\n          lastName: user ? user.lastName : '',\r\n          address: '',\r\n        }}\r\n        validationSchema={ShippingSchema}\r\n        onSubmit={values => {\r\n          const { firstName, lastName, address } = values;      \r\n          const shippingInfo: ShippingInfo = { firstName, lastName, address };\r\n          // TODO: Checkaa ettei kärry ole tyhjä\r\n          if (userCheck(user)) {\r\n            void shoppingCartService.setShoppingCartCompleted(cartState.cartId)\r\n              .then((response) => {\r\n                if (!response) {\r\n                  dispatch(setNotification('Unexpected error', 'error'));\r\n                  // TODO: ??\r\n                } else {\r\n                  dispatch(clearShoppingCart());\r\n                  dispatch(setNotification('Lähetetään tilaus osoitteeseen: ' + shippingInfo.address, 'success'));\r\n                }\r\n            });\r\n          }    \r\n        }}\r\n      >\r\n        {({ errors, touched }) => (\r\n          <Form>\r\n            <Grid container spacing={1}>\r\n              <Grid container item xs={12} spacing={3}>\r\n                <Grid item xs={2}>\r\n                  <label style={{fontSize: 15}}>Etunimi <b style={{color: 'red'}}>*</b> </label>\r\n                </Grid>\r\n                <Grid item xs={9}>\r\n                  <Field\r\n                    className={classes.field}\r\n                    placeholder=\"Etunimi\"\r\n                    type=\"text\"\r\n                    name=\"firstName\"\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={1}>\r\n                  {(errors.firstName && touched.firstName) && (\r\n                    <div>{errors.firstName}</div>\r\n                  )}\r\n                </Grid>\r\n              </Grid>\r\n              <Grid container item xs={12} spacing={3}>\r\n                <Grid item xs={2}>\r\n                  <label style={{fontSize: 15}}>Sukunimi <b style={{color: 'red'}}>*</b> </label>\r\n                </Grid>\r\n                <Grid item xs={9}>\r\n                  <Field\r\n                    className={classes.field}\r\n                    placeholder=\"Sukunimi\"\r\n                    type=\"text\"\r\n                    name=\"lastName\"\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={1}>\r\n                  {(errors.lastName && touched.lastName) && (\r\n                    <div>{errors.lastName}</div>\r\n                  )}\r\n                </Grid>\r\n              </Grid>\r\n              <Grid container item xs={12} spacing={3}>\r\n                <Grid item xs={2}>\r\n                  <label style={{fontSize: 15}}>Osoite <b style={{color: 'red'}}>*</b> </label>\r\n                </Grid>\r\n                <Grid item xs={9}>\r\n                  <Field\r\n                    className={classes.field}\r\n                    placeholder=\"Osoite\"\r\n                    type=\"text\"\r\n                    name=\"address\"\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={1}>\r\n                  {(errors.address && touched.address) && (\r\n                    <div>{errors.address}</div>\r\n                  )}\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n            <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n              <button disabled={!user} className={classes.button} style={{ left: '0%' }} type=\"submit\"> Lähetä </button>\r\n                {!user &&\r\n                  <Typography variant=\"subtitle1\" className={classes.logInText}> Kirjaudu sisään ensiksi </Typography>\r\n                }\r\n            </div>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShoppingCartForm;","import React from 'react';\r\nimport { useAppSelector, useAppDispatch, AppDispatch } from '../store/rootReducer';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Box, Container, Grid } from '@material-ui/core';\r\n\r\nimport ShoppingCartForm from '../forms/shoppingCart/ShoppingCartForm';\r\nimport ShoppingCartCard from './ShoppingCartCard';\r\nimport { removeProduct } from '../store/ShoppingCart/actionCreators';\r\nimport shoppingCartService from '../services/shoppingCartService';\r\n\r\nconst useStyles = makeStyles({\r\n  box: {\r\n    maxHeight: 350\r\n  },\r\n  shoppingCartAndFormBox: {\r\n    margin: 25,\r\n    marginLeft: -10,\r\n    height: 300,\r\n    borderRadius: 15,\r\n  },\r\n  cart: {\r\n    margin: 25,\r\n    borderRadius: 15,\r\n    height: 300\r\n  },\r\n  container: {\r\n    marginTop: 15, \r\n  },\r\n  deleteIcon: {\r\n    position: 'relative',\r\n    top: -15\r\n  },\r\n  form: {\r\n    borderWidth: 1,\r\n    marginTop: 75,\r\n    padding: 10,\r\n  },\r\n  empty: {\r\n    position: 'relative',\r\n    top: '50%',\r\n    left: '25%',\r\n  }\r\n});\r\n\r\nconst ShoppingCart: React.FC = (): JSX.Element => {\r\n  const classes = useStyles();\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n\r\n  const products: ShoppingCartProduct[] = useAppSelector(\r\n    state => state.shoppingCartReducer.cart\r\n  );\r\n\r\n  const user: Credentials | undefined = useAppSelector(\r\n    state => state.userReducer.user\r\n  );\r\n  const userId = user?._id || '';\r\n\r\n  const cartId = useAppSelector(state => state.shoppingCartReducer.cartId);\r\n\r\n  const removeProductFromCart = (product: ShoppingCartProduct) => {\r\n    if (!user) {\r\n      dispatch(removeProduct(product, cartId));\r\n    } else {\r\n      const promise = shoppingCartService.removeProductFromShoppingCart({ cartId, userId, product });\r\n      promise.then(() => {\r\n        dispatch(removeProduct(product, cartId));\r\n      }).catch(e => console.log(e));\r\n    }\r\n  };\r\n\r\n  const totalPrice = () => {\r\n    return products.reduce((prev, cur) => prev + cur.price * cur.quantity, 0);\r\n  };\r\n  \r\n  return (\r\n    <Box className={classes.box} border={1}>\r\n      <Grid container item xs={12} spacing={3}>\r\n        <Grid item xs={6}>\r\n          <Box border={1} className={classes.cart}> \r\n            {products.length === 0 ?\r\n              <Typography variant='h5' className={classes.empty}> Ostoskorisi on tyhjä </Typography>\r\n              :\r\n              <div style={{ height: 300, overflow: 'auto' }}>\r\n                {products.map(product => {\r\n                  if (product.quantity > 0) {\r\n                    return (\r\n                      <Container key={product._id} className={classes.container} maxWidth=\"sm\">\r\n                        <ShoppingCartCard key={product._id} product={product} />\r\n                      </Container>\r\n                    );\r\n                  } else {\r\n                    removeProductFromCart(product);\r\n                  }\r\n                })}\r\n                <Typography variant='h5' style={{ marginLeft: 20 }}>\r\n                  Kokonaishinta: {totalPrice()}€\r\n                </Typography>  \r\n              </div>\r\n              \r\n            }\r\n          </Box>\r\n        </Grid>  \r\n        <Grid item xs={6}>\r\n          <Box border={1} className={classes.shoppingCartAndFormBox}>\r\n            <div className={classes.form}> \r\n              <ShoppingCartForm />\r\n            </div>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ShoppingCart;","import React from 'react';\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport { useAppDispatch, AppDispatch } from '../store/rootReducer';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { hideNotification } from '../store/Notification/actionCreators';\r\n\r\ninterface NotificationProps {\r\n  type: NotificationType,\r\n  message: string,\r\n  tts?: number\r\n}\r\n\r\nconst Alert: React.FC<NotificationProps> = ({ type, message }: NotificationProps) => {\r\n  switch (type) {\r\n    case 'success':\r\n      return <MuiAlert elevation={6} variant=\"filled\" severity=\"success\" > {message} </MuiAlert>;\r\n\r\n    case 'error':\r\n      return <MuiAlert elevation={6} variant=\"filled\" severity=\"error\" > {message} </MuiAlert>;\r\n\r\n    default:\r\n      return <MuiAlert elevation={6} variant=\"filled\" severity=\"info\" > {message} </MuiAlert>;   \r\n  } \r\n};\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: '15%',\r\n    position: 'relative',\r\n    marginBottom: 15,\r\n    left: 15,\r\n  },\r\n});\r\n\r\nconst Notification: React.FC<NotificationProps> = ({ type, message, tts = 5000 }: NotificationProps) => {\r\n  const classes = useStyles();\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n  setTimeout(() => dispatch(hideNotification()), tts);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Alert type={type} message={message} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Notification;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\r\nimport { List, ListItem, ListItemIcon, ListItemText } from '@material-ui/core/';\r\nimport { FreeBreakfast, Build, Home, AllInclusive, BarChart } from '@material-ui/icons';\r\nimport { AppDispatch, useAppDispatch, useAppSelector } from '../store/rootReducer';\r\nimport { setTag } from '../store/Filter/actionCreators';\r\n\r\nconst useStyles = makeStyles(\r\n  createStyles({\r\n    container: {\r\n      position: 'relative',\r\n    },\r\n    appMenu: {\r\n      width: '100%',\r\n    },\r\n    menuItem: {\r\n      height: 70,\r\n      width: 240,\r\n    },\r\n    menuIcon: {\r\n      color: '#3f51b5',\r\n    }\r\n  }),\r\n);\r\n\r\nconst Sidebar: React.FC = () => {\r\n  const classes = useStyles();\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n  const tagi: Tag | undefined = useAppSelector(state => state.filterReducer.tagFilter);\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <Link to=\"/\" style={{ textDecoration: 'none', color: 'rgb(0,0,0)' }}>\r\n        <List className={classes.appMenu} disablePadding>\r\n          <ListItem onClick={() => dispatch(setTag())} divider button className={classes.menuItem}>\r\n            <ListItemIcon className={classes.menuIcon}>\r\n              <AllInclusive />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"All\" />\r\n          </ListItem>\r\n\r\n          <ListItem onClick={() => dispatch(setTag('Kirves'))} divider button className={classes.menuItem}>\r\n            <ListItemIcon className={classes.menuIcon}>\r\n              <Build />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"Kirves\" />\r\n          </ListItem>\r\n\r\n          <ListItem onClick={() => dispatch(setTag('Ruoka/Juoma'))} divider button className={classes.menuItem}>\r\n            <ListItemIcon className={classes.menuIcon}>\r\n              <FreeBreakfast />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"Ruoka/Juoma\" />\r\n          </ListItem>\r\n\r\n          <ListItem onClick={() => dispatch(setTag('Mokki Essential'))} divider button className={classes.menuItem}>\r\n            <ListItemIcon className={classes.menuIcon}>\r\n              <Home />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"Mokki Essential\" />\r\n          </ListItem>\r\n\r\n          <ListItem onClick={() => dispatch(setTag('muut'))} divider button className={classes.menuItem}>\r\n            <ListItemIcon className={classes.menuIcon}>\r\n              <BarChart />\r\n            </ListItemIcon>\r\n            <ListItemText primary=\"Muut\" />\r\n          </ListItem>\r\n\r\n        </List>\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Sidebar;","import React, { useEffect } from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\n\r\nimport { Navibar } from './components/Navibar';\r\nimport { ProductListPage } from './components/ProductListPage';\r\nimport ProductInfo  from './components/ProductInfo';\r\nimport Account from './components/Account';\r\nimport PastOrders from './components/PastOrders';\r\nimport ShoppingCart from './components/ShoppingCart';\r\nimport shoppingCartService from './services/shoppingCartService';\r\n\r\nimport { initializeProducts } from './store/Product/actionCreators';\r\nimport { createNewShoppingCart, retrieveOldShoppingCart, clearShoppingCart } from './store/ShoppingCart/actionCreators';\r\nimport { logIn } from './store/User/actionCreators';\r\nimport { useAppSelector, useAppDispatch, AppDispatch } from './store/rootReducer';\r\n\r\nimport Notification from './UI/Notification';\r\nimport { safeJsonParse, isCredentialsWithTimestamp } from './typeGuards';\r\nimport { validTimeStamp } from './utils/ValidTimeStamp';\r\n\r\nimport Sidebar from './components/Sidebar';\r\n\r\nconst App = (): JSX.Element => {\r\n  const dispatch: AppDispatch = useAppDispatch();\r\n\r\n  const user: Credentials | undefined = useAppSelector(\r\n    state => state.userReducer.user\r\n  );\r\n\r\n  const notification: NotificationState = useAppSelector(\r\n    state => state.notificationReducer\r\n  );\r\n\r\n  const shoppingCart: ShoppingCartState = useAppSelector(\r\n    state => state.shoppingCartReducer\r\n  );\r\n\r\n  useEffect(() => {\r\n    void dispatch(initializeProducts());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const loggedUser = window.localStorage.getItem('loggedUser');\r\n      if (loggedUser) {\r\n      const parsedUser = safeJsonParse(isCredentialsWithTimestamp)(loggedUser);\r\n      if (parsedUser.hasError) {\r\n        console.log('error at parsed user');\r\n      } else {\r\n        if (validTimeStamp(parsedUser.parsed.timestamp)) {\r\n          dispatch(logIn(parsedUser.parsed));\r\n          const usersShoppingCart = shoppingCartService.getUsersShoppingCart(parsedUser.parsed._id);\r\n          void usersShoppingCart.then((res) => {\r\n            if (res) {\r\n              dispatch(retrieveOldShoppingCart(res.id, res.products));\r\n            } else {\r\n              void shoppingCartService.createNewShoppingCart({ \r\n                products: shoppingCart.cart,\r\n                user: parsedUser.parsed._id,\r\n                id: shoppingCart.cartId\r\n              }).then((res => {\r\n                dispatch(createNewShoppingCart(res.id));\r\n              }));\r\n            }\r\n          });\r\n        } else {\r\n          void shoppingCartService.setShoppingCartActivity(shoppingCart.cartId, false);\r\n          dispatch(logIn());\r\n          dispatch(clearShoppingCart());\r\n          window.localStorage.removeItem('loggedUser');\r\n        } \r\n      }\r\n    }\r\n  }, []);\r\n  \r\n  return (\r\n    <div>\r\n      <Router>\r\n        <Navibar user={user} />\r\n        <br/>\r\n        {notification.visible && (\r\n          <div>\r\n            <Notification type={notification.type} message={notification.message} />\r\n          </div>\r\n        )}\r\n        <div style={{ display: 'flex', flexDirection: 'row' }}>\r\n          <Sidebar />\r\n          <Switch>\r\n            <Route path=\"/account\" render={() => <Account user={user}/>} />\r\n          </Switch>\r\n\r\n          <Switch>\r\n            <Route path='/pastOrders' render={() => <PastOrders />} />\r\n          </Switch>\r\n\r\n          <Switch>\r\n            <Route path=\"/shoppingCart\" render={() => <ShoppingCart />} />\r\n          </Switch>\r\n\r\n          <Switch>\r\n            <Route path=\"/product\" render={() => <ProductInfo />} />\r\n          </Switch>\r\n\r\n          <Switch>\r\n            <Route exact path=\"/\" render={() => <ProductListPage />} />\r\n          </Switch>\r\n        </div>\r\n      </Router> \r\n\r\n    </div>\r\n    \r\n  );\r\n};\r\n\r\nexport default App;","export const validTimeStamp = (d: Date): boolean => {\r\n  const date = new Date(d);\r\n  const currentTime = new Date();\r\n  return currentTime.getHours() - date.getHours() < 1;\r\n};","  \r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport App from \"./App\";\r\nimport store from './store/rootReducer';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);","import { makeStyles } from '@material-ui/styles';\r\n\r\nconst useStyles = makeStyles({\r\n  field: {\r\n    padding: 5,\r\n    borderColor: '#124eb0',\r\n    position: 'relative',\r\n    marginBottom: 10,\r\n    width: '90%',\r\n    maxWidth: 700\r\n  },\r\n  \r\n  button: {\r\n    display: 'inline-flex',\r\n    alignItems: 'center',\r\n    position: 'relative',\r\n    padding: 20,\r\n    paddingRight: 75,\r\n    marginTop: 10,\r\n    left: '38%',\r\n    transform: `translate(-50%, -$50%)`,\r\n    borderWidth: 3,\r\n    borderRadius: 35,      \r\n    width: 92,\r\n    height: 20,\r\n    opacity: 0.95,\r\n    backgroundColor: '#124eb0',\r\n    fontSize: 16,\r\n    fontStyle: 'bold',\r\n    color: 'white'  \r\n  },\r\n\r\n  logInText: {\r\n    position: 'relative',\r\n    marginLeft: 20,\r\n    marginTop: 20,\r\n  }\r\n});\r\n\r\nexport default useStyles;","/* eslint-disable  @typescript-eslint/no-unsafe-assignment */\r\n/* eslint-disable  @typescript-eslint/no-explicit-any */\r\n/* eslint-disable  @typescript-eslint/explicit-module-boundary-types */\r\n\r\nexport const stringCheck = (text: unknown): text is string => {\r\n  return typeof text === 'string' || text instanceof String;\r\n};\r\n\r\nexport const setTagActionCheck = (object: FilterActions): object is SetTagAction => (\r\n  object.type === 'SET_TAG'\r\n);\r\n\r\nexport const stringParser = (text: unknown): string => {\r\n  if (!text || !stringCheck(text)) {\r\n      throw new Error(`Incorrect or missing string `);\r\n  }\r\n  return text;\r\n};\r\n\r\nexport const notificationTypeCheck = (object: unknown): object is NotificationType => (\r\n  object === 'error'\r\n  || object === 'info'\r\n  || object === 'success'\r\n);\r\n\r\nexport const userCheck = (object?: Credentials): object is Credentials => !!object;\r\n\r\nexport const addOrRemoveActionCheck = (object: ShoppingCartAction): object is AddOrRemoveShoppingCartAction => (\r\n  object.type === 'INCREASE_QUANTITY'\r\n  || object.type === 'DECREASE_QUANTITY'\r\n  || object.type === 'REMOVE_PRODUCT_FROM_CART'\r\n);\r\n\r\nexport const newShoppingCartCheck = (object: ShoppingCartAction): object is CreateNewShoppingCartAction => (object.type === 'CREATE_NEW_SHOPPING_CART');\r\n\r\nexport const retrieveOldShoppingCartCheck = (object: ShoppingCartAction): object is RetrieveOldShoppingCartAction => {\r\n  if (object.type === 'RETRIEVE_OLD_SHOPPING_CART') {\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const clearShoppingCartCheck = (object: ShoppingCartAction): object is ClearShoppingCartAction => (object.type === 'CLEAR_SHOPPINGCART');\r\n\r\nexport const isCredentialsWithTimestamp = (o: any): o is CredentialsWithTimeStamp => {\r\n  return 'firstName' in o &&\r\n  'lastName' in o &&\r\n  'userName' in o &&\r\n  '_id' in o &&\r\n  'userType' in o &&\r\n  'token' in o &&\r\n  'timestamp' in o;\r\n};\r\n\r\nexport const safeJsonParse = <T>(guard: (o: any) => o is T) => (text: string): ParseResult<T> => {\r\n  const parsed = JSON.parse(text);\r\n  return guard(parsed) ? { parsed, hasError: false} : { hasError: true };\r\n};\r\n\r\ntype ParseResult<T> =\r\n  | { parsed: T; hasError: false; error?: undefined }\r\n  | { parsed?: undefined; hasError: true; error?: unknown };\r\n","import * as actionTypes from \"./actionTypes\";\r\n\r\ntype Login = (dispatch: DispatchType) => void;\r\n\r\nexport const logIn = (data?: Credentials): Login => {\r\n  const action: LogInAction = {\r\n    type: actionTypes.LOG_IN,\r\n    data,\r\n  };\r\n\r\n  return (dispatch: DispatchType) => {\r\n    dispatch(action);\r\n  };\r\n};","export const INCREASE_QUANTITY = \"INCREASE_QUANTITY\";\r\nexport const DECREASE_QUANTITY = \"DECREASE_QUANTITY\";\r\nexport const REMOVE_PRODUCT_FROM_CART = \"REMOVE_PRODUCT_FROM_CART\";\r\nexport const CLEAR_SHOPPINGCART = \"CLEAR_SHOPPINGCART\";\r\nexport const CREATE_NEW_SHOPPING_CART = \"CREATE_NEW_SHOPPING_CART\";\r\nexport const RETRIEVE_OLD_SHOPPING_CART = \"RETRIEVE_OLD_SHOPPING_CART\";","import axios from 'axios';\r\n\r\nconst baseURL = 'http://localhost:3001/api';\r\n\r\nconst signIn = async (username: string, password: string, platformInfo: string):Promise<Credentials> => {\r\n  const request = await axios.post<Credentials>(`${baseURL}/login`, { username, password, platformInfo });\r\n  return request.data;\r\n};\r\n\r\nconst createUser = async (user: NoIdUser):Promise<User> => {\r\n  const request = await axios.post<User>(`${baseURL}/users`, user);\r\n  return request.data;\r\n};\r\n\r\nconst modifyUser = async (user: User):Promise<User> => {\r\n  const request = await axios.put<User>(`${baseURL}/users/`, user);\r\n  return request.data;\r\n};\r\n\r\nconst modifyAvatar = async (image: File, userId: string):Promise<User> => {\r\n  const fd = new FormData();\r\n  fd.append('image', image, image.name);\r\n  const config = {\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data'\r\n    }\r\n  };\r\n  const request = await axios.put<User>(`${baseURL}/users/${userId}/image`, fd, config);\r\n  return request.data;\r\n};\r\n\r\nconst getUsersCompletedShoppingcarts = async (userId: string):Promise<ShoppingCart[]> => {\r\n  const request = await axios.get<ShoppingCart[]>(`${baseURL}/users/${userId}`);\r\n  return request.data;\r\n};\r\n\r\nconst addRatingForProduct = async (userId: string, productId: string, value: number):Promise<Credentials | null> => {\r\n  const request = await axios.put<Credentials | null>(`${baseURL}/users/${userId}`, { productId , value });\r\n  return request.data;\r\n};\r\n\r\nexport default {\r\n  signIn,\r\n  createUser,\r\n  modifyUser,\r\n  getUsersCompletedShoppingcarts,\r\n  addRatingForProduct,\r\n  modifyAvatar,\r\n};","import * as actionTypes from \"./actionTypes\";\r\n\r\nconst initialState: ProductState = {\r\n  products: []\r\n};\r\n\r\nconst reducer = (state: ProductState = initialState, action: GetProductsAction | AddProductAction): ProductState => {\r\n    \r\n  switch (action.type) {\r\n    case actionTypes.GET_PRODUCTS:\r\n      return {\r\n        ...state,\r\n        products: action.data as Product[]\r\n      };\r\n\r\n    case actionTypes.ADD_PRODUCT:\r\n      return {\r\n        ...state,\r\n        products: state.products.concat(action.data)\r\n      };\r\n\r\n    case actionTypes.REMOVE_PRODUCT:\r\n      return {\r\n        ...state,\r\n        products: state.products.filter(product => product !== action.data)\r\n      };\r\n  }\r\n  \r\n  return state;\r\n};\r\n\r\nexport default reducer;","import * as actionTypes from \"./actionTypes\";\r\n\r\nconst initialState: UserState = {\r\n  user: undefined\r\n};\r\n\r\nconst reducer = (state: UserState = initialState, action: LogInAction): UserState => {\r\n\r\n  switch (action.type) {\r\n    case actionTypes.LOG_IN:\r\n      return {\r\n        ...state,\r\n        user: action.data\r\n      };\r\n  }\r\n  \r\n  return state;\r\n};\r\n\r\nexport default reducer;\r\n","import * as actionTypes from \"./actionTypes\";\r\n\r\nconst initialState: NotificationState = {\r\n  message: '',\r\n  type: 'error',\r\n  visible: false\r\n};\r\n\r\nconst reducer = (state: NotificationState = initialState, action: SetNotificationAction): NotificationState => {\r\n\r\n  switch (action.type) {\r\n    case actionTypes.SET_NOTIFICATION:\r\n      return {\r\n        ...state,\r\n        message: action.data,\r\n        type: action.notificationType,\r\n        visible: true\r\n      };\r\n    case actionTypes.HIDE_NOTIFICATION:\r\n      return {\r\n        ...state,\r\n        message: '',\r\n        type: action.notificationType,\r\n        visible: false\r\n      };\r\n  }\r\n  \r\n  return state;\r\n};\r\n\r\nexport default reducer;","import * as actionTypes from './actionTypes';\r\nimport { addOrRemoveActionCheck, newShoppingCartCheck, clearShoppingCartCheck, retrieveOldShoppingCartCheck } from '../../typeGuards';\r\n\r\nconst initialState: ShoppingCartState = {\r\n  cartId: '',\r\n  cart: []\r\n};\r\n\r\nconst increaseQuantity = (product: ShoppingCartProduct, list: ShoppingCartProduct[]): ShoppingCartProduct => {\r\n  const item: ShoppingCartProduct | undefined = list.find(p => p._id === product._id);\r\n  if (!item) {\r\n    return product;\r\n  }\r\n  product.quantity = item.quantity +1;\r\n  return product;\r\n};\r\n\r\nconst decreaseQuantity = (product: ShoppingCartProduct, list: ShoppingCartProduct[]): ShoppingCartProduct => {\r\n  const item: ShoppingCartProduct | undefined = list.find(p => p._id === product._id);\r\n  if (!item) {\r\n    return product;\r\n  }\r\n  product.quantity = item.quantity -1;\r\n  return product;\r\n};\r\n\r\nconst reducer = (state: ShoppingCartState = initialState, action: ShoppingCartAction): ShoppingCartState => {\r\n\r\n  if (addOrRemoveActionCheck(action)) {\r\n    switch (action.type) {\r\n      case actionTypes.INCREASE_QUANTITY:   \r\n        if (!state.cart.some(p => p._id === action.data._id)) {\r\n          return {\r\n            ...state,\r\n            cartId: action.cartId,\r\n            cart: state.cart.concat(action.data) };\r\n        } \r\n        const lisattava = increaseQuantity(action.data, state.cart);\r\n        return {\r\n          ...state,\r\n          cartId: action.cartId,\r\n          cart: state.cart.map(p => p._id === lisattava._id ? lisattava : p)\r\n        };\r\n  \r\n      case actionTypes.DECREASE_QUANTITY:\r\n        const uusi = decreaseQuantity(action.data, state.cart);\r\n        return {\r\n          ...state,\r\n          cartId: action.cartId,\r\n          cart: state.cart.map(p => p._id === uusi._id ? uusi : p)\r\n        };\r\n  \r\n      case actionTypes.REMOVE_PRODUCT_FROM_CART:\r\n        return {\r\n          ...state,\r\n          cartId: action.cartId,\r\n          cart: state.cart.filter(p => p._id !== action.data._id)\r\n        };\r\n    }\r\n\r\n  }\r\n  if (retrieveOldShoppingCartCheck(action)) {\r\n    return {\r\n      cartId: action.cartId,\r\n      cart: action.data\r\n    };\r\n  }\r\n\r\n  if (newShoppingCartCheck(action)) {\r\n    switch (action.type) {\r\n      case actionTypes.CREATE_NEW_SHOPPING_CART:\r\n        return {\r\n          ...state,\r\n          cartId: action.cartId,\r\n          cart: state.cart\r\n        };\r\n    }\r\n    \r\n  }\r\n  if (clearShoppingCartCheck(action)) {\r\n    return {\r\n      ...state,\r\n      cartId: '',\r\n      cart: []\r\n    };\r\n  }\r\n  \r\n  return state;\r\n};\r\n\r\nexport default reducer;","const initialState: ModalState = {\r\n  createUserModal: false,\r\n  logInModal: false,\r\n  addProductModal: false,\r\n  modifyUserInfoModal: false,\r\n  modifyProductModal: false,\r\n  modifyUserAvatarModal: false,\r\n};\r\n\r\nconst reducer = (state: ModalState = initialState, action: ModalAction): ModalState => {\r\n  switch (action.modal) {\r\n    case 'AddProduct':\r\n      return {\r\n        ...state, addProductModal: action.data\r\n      };\r\n    case 'CreateUser':\r\n      return {\r\n        ...state, createUserModal: action.data\r\n      };\r\n    case 'LogIn':\r\n      return {\r\n        ...state, logInModal: action.data\r\n      };\r\n    case 'ModifyUser':\r\n      return {\r\n        ...state, modifyUserInfoModal: action.data\r\n      };\r\n    case 'ModifyProduct':\r\n      return {\r\n        ...state, modifyProductModal: action.data\r\n      };\r\n    case 'ModifyUserAvatar':\r\n      return {\r\n        ...state, modifyUserAvatarModal: action.data\r\n      };\r\n    default: \r\n      return state;\r\n  }\r\n\r\n};\r\n\r\nexport default reducer;","import * as actionTypes from './actionTypes';\r\nimport { setTagActionCheck } from '../../typeGuards';\r\n\r\nconst initialState: FilterState = {\r\n  productFilter: '',\r\n  tagFilter: undefined,\r\n};\r\n\r\nconst reducer = (state: FilterState = initialState, action: FilterActions): FilterState => {\r\n  if (setTagActionCheck(action)) {\r\n    return {\r\n      ...state,\r\n      tagFilter: action.data\r\n    };\r\n  }\r\n\r\n  switch(action.type) {\r\n    case actionTypes.SET_FILTER:\r\n      return {\r\n        ...state,\r\n        productFilter: action.data\r\n      };\r\n  }\r\n  return state;\r\n};\r\n\r\nexport default reducer;","import * as actionTypes from './actionTypes';\r\n\r\nconst initialState: ActiveProductState = {\r\n  product: undefined\r\n};\r\n\r\nconst reducer = (state: ActiveProductState = initialState, action: SetActiveProductAction): ActiveProductState => {\r\n  switch (action.type) {\r\n    case actionTypes.SET_ACTIVE_PRODUCT:\r\n      return {\r\n        product: action.data\r\n      };\r\n  }\r\n  return state;\r\n};\r\n\r\nexport default reducer;","import { configureStore } from '@reduxjs/toolkit';\r\nimport { combineReducers } from \"redux\";\r\nimport { useDispatch, useSelector, TypedUseSelectorHook } from \"react-redux\";\r\n\r\nimport productReducer from './Product/reducer';\r\nimport userReducer from './User/reducer';\r\nimport notificationReducer from './Notification/reducer';\r\nimport shoppingCartReducer from './ShoppingCart/reducer';\r\nimport modalReducer from './modal/reducer';\r\nimport filterReducer from './Filter/reducer';\r\nimport activeProductReducer from './ActiveProduct/reducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  productReducer,\r\n  userReducer,\r\n  notificationReducer,\r\n  shoppingCartReducer,\r\n  modalReducer,\r\n  filterReducer,\r\n  activeProductReducer,\r\n});\r\n\r\nconst store = configureStore({\r\n  reducer: rootReducer\r\n});\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\n\r\nexport const useAppDispatch = (): AppDispatch  => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n\r\nexport default store;","import axios, { AxiosResponse } from 'axios';\r\n\r\nconst baseURL = 'http://localhost:3001/api/products';\r\n\r\nconst getAll = ():Promise<Product[]> => {\r\n  const request = axios.get<Product[]>(`${baseURL}`);\r\n  return request.then((response: AxiosResponse<Product[]>) => response.data);\r\n};\r\n\r\nconst addProduct = async (product: NoIdProduct, image: File | undefined):Promise<Product> => {\r\n\r\n  const request = await axios.post<Product>(`${baseURL}`, product);\r\n\r\n  if (image && request.data !== null) {\r\n    const req = modifyProductImage(request.data._id, image);\r\n    return req;\r\n  }\r\n  return request.data;\r\n};\r\n\r\nconst modifyProductImage = async (productId: string, image: File) => {\r\n  const fd = new FormData();\r\n  fd.append('image', image, image.name);\r\n  const config = {\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data'\r\n    }\r\n  };\r\n\r\n  const request = await axios.put<Product>(`${baseURL}/${productId}`, fd, config);\r\n  return request.data;\r\n};\r\n\r\nconst modifyProduct = async (product: Product, image: File | undefined):Promise<Product> => {\r\n\r\n  const request = await axios.put<Product>(`${baseURL}`, product);\r\n  if (request.data !== null && image) {\r\n    const req = modifyProductImage(product._id, image);\r\n    return req;\r\n  }\r\n  return request.data;\r\n};\r\n\r\nconst deleteProduct = async (product: Product): Promise<Product> => {\r\n  const request = await axios.delete<Product>(`${baseURL}/${product._id}`);\r\n  return request.data;\r\n};\r\n\r\nexport default {\r\n  getAll,\r\n  addProduct,\r\n  deleteProduct,\r\n  modifyProduct,\r\n};","import * as actionTypes from \"./actionTypes\";\r\nimport productService from '../../services/productService';\r\n\r\ntype ProductDispatch = (dispatch: DispatchType) => void;\r\n\r\nexport const addProduct = (data: Product): ProductDispatch => {\r\n  const action: AddProductAction = {\r\n    type: actionTypes.ADD_PRODUCT,\r\n    data,\r\n  };\r\n\r\n  return (dispatch: DispatchType) => {\r\n    dispatch(action);\r\n  };\r\n};\r\n\r\nexport const removeProduct = (data: Product): ProductDispatch => {\r\n  const action: AddProductAction = {\r\n    type: actionTypes.REMOVE_PRODUCT,\r\n    data,\r\n  };\r\n\r\n  return (dispatch: DispatchType) => {\r\n    dispatch(action);\r\n  };\r\n};\r\n\r\nexport const initializeProducts = () => {\r\n  \r\n  return async (dispatch: (arg0: { type: string; data: Product[]; }) => void): Promise<void> => {\r\n    const data = await productService.getAll();\r\n    const action: GetProductsAction = {\r\n      type: actionTypes.GET_PRODUCTS,\r\n      data,\r\n    };\r\n    \r\n    dispatch(action);\r\n  };\r\n};","export const arrayBufferToBase64 = (buffer: Buffer): string => {\r\n  let binary = '';\r\n  const bytes = [].slice.call(new Uint8Array(buffer));\r\n  bytes.forEach((b) => binary += String.fromCharCode(b));\r\n  return 'data:image/jpeg;base64,' + window.btoa(binary);\r\n};","export const ADD_PRODUCT = \"ADD_PRODUCT\";\r\nexport const GET_PRODUCTS = \"GET_PRODUCTS\";\r\nexport const REMOVE_PRODUCT = \"REMOVE_PRODUCT\";","import * as actionTypes from './actionTypes';\r\n\r\ntype SetActiveProduct = (dispatch: DispatchType) => void;\r\n\r\nexport const setActiveProduct = (data: Product): SetActiveProduct => {\r\n  const action: SetActiveProductAction = {\r\n    type: actionTypes.SET_ACTIVE_PRODUCT,\r\n    data\r\n  };\r\n\r\n  return (dispatch: DispatchType) => {\r\n    dispatch(action);\r\n  };\r\n};","export const SET_NOTIFICATION = \"SET_NOTIFICATION\";\r\nexport const HIDE_NOTIFICATION = \"HIDE_NOTIFICATION\";","export const SET_FILTER = \"SET_FILTER\";\r\nexport const SET_TAG = \"SET_TAG\";"],"sourceRoot":""}