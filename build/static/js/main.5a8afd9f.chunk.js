(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{119:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n="LOG_IN"},120:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n="SET_ACTIVE_PRODUCT"},124:function(e,t,r){"use strict";r(0);var n=r(11),a=r(16),c=r(63),i=r(372),s=r(217),o=r(365),d=r(45),u=r(1);t.a=function(e){var t=e.errors,r=e.touched,l=e.setFieldValue,j=e.setImage,b=e.image,m=(e.submitForm,e.setTags),p=e.tags,h=Object(d.a)();return Object(u.jsxs)(n.b,{children:[Object(u.jsxs)(a.a,{container:!0,spacing:1,children:[Object(u.jsxs)(a.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(u.jsx)(a.a,{item:!0,xs:2,children:Object(u.jsxs)("label",{children:["Name: ",Object(u.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(u.jsx)(a.a,{item:!0,xs:9,children:Object(u.jsx)(n.a,{className:h.field,placeholder:"My New Product",type:"text",name:"name"})}),Object(u.jsx)(a.a,{item:!0,xs:1,children:t.name&&r.name&&Object(u.jsx)("div",{children:t.name})})]}),Object(u.jsxs)(a.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(u.jsx)(a.a,{item:!0,xs:2,children:Object(u.jsx)("label",{children:"Description: "})}),Object(u.jsx)(a.a,{item:!0,xs:9,children:Object(u.jsx)(n.a,{className:h.field,placeholder:"So useless product that Wish.com should sell these (optional)",type:"text",name:"description"})}),Object(u.jsx)(a.a,{item:!0,xs:1,children:t.description&&r.description&&Object(u.jsx)("div",{children:t.description})})]}),Object(u.jsxs)(a.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(u.jsx)(a.a,{item:!0,xs:2,children:Object(u.jsxs)("label",{children:["Price: ",Object(u.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(u.jsx)(a.a,{item:!0,xs:9,children:Object(u.jsx)(n.a,{className:h.field,placeholder:"Price",type:"number",name:"price"})}),Object(u.jsx)(a.a,{item:!0,xs:1,children:t.price&&r.price&&Object(u.jsx)("div",{children:t.price})})]}),Object(u.jsxs)(a.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(u.jsx)(a.a,{item:!0,xs:2,children:Object(u.jsx)("label",{children:"Stock: "})}),Object(u.jsx)(a.a,{item:!0,xs:9,children:Object(u.jsx)(n.a,{className:h.field,placeholder:"Stock (optional)",type:"number",name:"stock"})}),Object(u.jsx)(a.a,{item:!0,xs:1,children:t.stock&&r.stock&&Object(u.jsx)("div",{children:t.stock})})]}),Object(u.jsxs)(a.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(u.jsx)(a.a,{item:!0,xs:2,children:Object(u.jsx)("label",{children:"Tags: "})}),Object(u.jsx)(a.a,{item:!0,xs:9,children:Object(u.jsx)(c.a,{border:2,className:h.field,children:Object(u.jsx)(i.a,{className:h.field,multiple:!0,style:{backgroundColor:"rgb(255,255,255)"},disableUnderline:!0,value:p,onChange:function(e){m(e.target.value)},renderValue:function(e){return Object(u.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:e.map((function(e){return Object(u.jsx)(s.a,{label:e,style:{display:"flex",flexWrap:"wrap",backgroundColor:"#5aafe0",marginLeft:2}},e)}))})},children:["Kirves","Mokki Essential","Ruoka/Juoma","muut"].map((function(e){return Object(u.jsx)(o.a,{style:{backgroundColor:"rgb(255,255,255)"},value:e,children:e},e)}))})})}),Object(u.jsx)(a.a,{item:!0,xs:1})]}),Object(u.jsxs)(a.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(u.jsx)(a.a,{item:!0,xs:2,children:Object(u.jsx)("label",{children:" Image: "})}),Object(u.jsx)(a.a,{item:!0,xs:9,children:Object(u.jsx)(n.a,{className:h.field,type:"File",name:"image",value:void 0,style:{color:"rgba(0,0,0,0)"},onChange:function(e){l("image",e.currentTarget.files?e.currentTarget.files[0]:void 0),j(e.currentTarget.files?e.currentTarget.files[0]:void 0)}})}),Object(u.jsx)(a.a,{item:!0,xs:1,children:b&&Object(u.jsx)("button",{type:"button",onClick:function(){l("image",void 0),j(void 0)},children:"Cancel"})})]}),Object(u.jsxs)(a.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(u.jsx)(a.a,{item:!0,xs:2,children:Object(u.jsx)("label",{children:" Image preview: "})}),Object(u.jsx)(a.a,{item:!0,xs:9,children:b?Object(u.jsx)("img",{height:100,width:100,src:URL.createObjectURL(b),alt:"Preview to upload"}):Object(u.jsx)("img",{height:100,width:100,src:"https://live.staticflickr.com/5217/5471047557_4dc13f5376_n.jpg",alt:"Preview to upload"})})]})]}),Object(u.jsx)("button",{className:h.button,type:"submit",children:"Submit"})]})}},125:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e){if(!e)return"";var t=new Date(e),r=t.getDate().toString(),n="".concat(t.getMonth()+1),a=t.getFullYear().toString(),c=t.getHours(),i=t.getMinutes();return r+"."+n+"."+a+"  "+(c<10?"0"+c.toString():c.toString())+":"+(i<10?"0"+i.toString():i.toString())}},148:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e){var t="".concat(e),r=e-parseInt(t,10);return 5===(r=Math.round(10*r))?parseInt(t,10)+.5:r<3||r>7?Math.round(e):parseInt(t,10)+.5}},15:function(e,t,r){"use strict";r.d(t,"c",(function(){return c})),r.d(t,"g",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"e",(function(){return o})),r.d(t,"d",(function(){return d})),r.d(t,"f",(function(){return u})),r.d(t,"b",(function(){return l}));var n=r(7),a=r(42),c=function(e){var t={type:a.b,cartId:e};return function(e){e(t)}},i=function(e,t){var r={type:a.f,cartId:e,data:t};return function(e){e(r)}},s=function(e,t){var r=Object(n.a)(Object(n.a)({},e),{},{quantity:1}),c={type:a.d,cartId:t,data:r};return function(e){e(c)}},o=function(e,t){var r={type:a.d,cartId:t,data:Object(n.a)(Object(n.a)({},e),{},{quantity:e.quantity+1})};return function(e){e(r)}},d=function(e,t){var r={type:a.c,cartId:t,data:Object(n.a)(Object(n.a)({},e),{},{quantity:e.quantity-1})};return function(e){e(r)}},u=function(e,t){var r={type:a.e,cartId:t,data:e};return function(e){e(r)}},l=function(){var e={type:a.a};return function(t){t(e)}}},19:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e,t){var r={type:"",modal:t,data:e};return function(e){e(r)}}},199:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return k}));var n=r(7),a=(r(0),r(50)),c=r(211),i=r(149),s=r(213),o=r(368),d=r(214),u=r(150),l=r(212),j=r(102),b=r(34),m=r(200),p=r.n(m),h=r(6),O=r(68),f=r(69),x=r(27),g=r(80),v=r(15),y=r(22),w=r(152),N=r(70),C=r(1),I=Object(c.a)({root:{width:170,maxHeight:340,marginRight:20},centerText:{textAlign:"center"},media:{height:160},overflow:{maxWidth:170,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),k=function(t){var r,c=t.product,m=I(),k=Object(h.b)(),S=Object(h.c)((function(e){return e.userReducer.user})),R=Object(h.c)((function(e){return e.shoppingCartReducer.cartId})),T=Object(h.c)((function(e){return e.shoppingCartReducer.cart})),_=function(e){if(S)if(R){y.a.addProductToShoppingCart({product:e,userId:S._id,cartId:R}).then((function(){k(Object(v.a)(e,R))})).catch((function(e){return console.log(e)}))}else{k(Object(v.a)(e,R));var t=[e];y.a.createNewShoppingCart({products:t,user:S._id,id:""}).then((function(e){k(Object(v.c)(e.id))})).catch((function(e){return console.log(e)}))}else k(Object(v.a)(e,R))},A=function(e){S?y.a.increaseProductQuantity({product:e,userId:S._id,cartId:R}).then((function(){k(Object(v.e)(e,R))})):k(Object(v.e)(e,R))};if(c.image){var P=e.from(c.image.data);r=Object(N.a)(P)}return Object(C.jsxs)(i.a,{className:m.root,children:[Object(C.jsx)(a.b,{to:"/product",style:{textDecoration:"none",color:"black"},children:Object(C.jsxs)(s.a,{onClick:function(){return k(Object(g.a)(c)),void window.localStorage.setItem("activeProduct",c.name)},children:[Object(C.jsx)(u.a,{className:m.media,image:r}),Object(C.jsxs)(d.a,{children:[Object(C.jsxs)(b.a,{className:"".concat(m.overflow," ").concat(m.centerText),style:{fontSize:16},gutterBottom:!0,variant:"h6",component:"h2",children:[c.name," ",Object(C.jsx)("br",{})," ",c.price,"\u20ac"]}),Object(C.jsx)(b.a,{className:"".concat(m.overflow," ").concat(m.centerText),variant:"body2",color:"textSecondary",component:"p",children:c.description})]})]})}),Object(C.jsxs)(o.a,{children:[Object(C.jsx)(l.a,{disabled:c.stock<=0,size:"small",color:"primary",onClick:function(){return function(){var e=T.some((function(e){return e._id===c._id})),t=T.find((function(e){return e._id===c._id}));t||(t=Object(n.a)(Object(n.a)({},c),{},{quantity:1})),e?A(t):_(t)}()},children:"Lis\xe4\xe4 ostoskoriin"}),"Admin"===(null===S||void 0===S?void 0:S.userType)&&Object(C.jsx)(j.a,{onClick:function(){return O.a.deleteProduct(c).catch((function(e){return console.log(e)})),k(Object(f.c)(c)),void k(Object(x.b)("Removed "+c.name,"info"))},children:Object(C.jsx)(w.a,{title:"Remove product from database",children:Object(C.jsx)(p.a,{})})})]})]})}}).call(this,r(112).Buffer)},201:function(e,t,r){"use strict";(function(e){var n=r(7),a=r(0),c=r(129),i=r(63),s=r(217),o=r(102),d=r(34),u=r(212),l=r(152),j=r(149),b=r(150),m=r(16),p=r(6),h=r(19),O=r(373),f=r(151),x=r(215),g=r(369),v=r(22),y=r(44),w=r(206),N=r(70),C=r(148),I=r(15),k=r(80),S=r(39),R=r(1),T=Object(c.a)({root:{display:"flex",flexDirection:"row"},box:{marginLeft:25,width:"100%",borderRadius:15},card:{maxWidth:500,maxHeight:350},image:{height:350,width:500},availability:{height:20,width:20,marginLeft:10},button:{padding:25,width:"100%"},priceTag:{width:150,borderRadius:15,marginBottom:30,backgroundColor:"lightgrey"},chip:{padding:15,marginTop:15,marginLeft:15,marginBottom:15,width:"80%"},ratedTag:{borderRadius:10,color:"darkgreen",height:20,width:60,textAlign:"center",marginLeft:10,padding:3,transform:"rotate(-30deg)"}});t.a=function(){var t,r=T(),c=Object(p.b)(),_=Object(p.c)((function(e){return e.activeProductReducer.product})),A=Object(p.c)((function(e){return e.productReducer.products})),P=Object(p.c)((function(e){return e.userReducer.user})),U=P?P._id:"";Object(a.useEffect)((function(){if(!_){var e=window.localStorage.getItem("activeProduct"),t=A.find((function(t){return t.name===e}));t&&c(Object(k.a)(t))}}),[A]);var q=Object(p.c)((function(e){return e.shoppingCartReducer}));if(!_)return Object(R.jsx)("div",{});var E,M=null===P||void 0===P||null===(t=P.ratings)||void 0===t?void 0:t.some((function(e){return e._id.toString()===_._id.toString()})),L=function(e){P?v.a.increaseProductQuantity({product:e,userId:U,cartId:q.cartId}).then((function(){c(Object(I.e)(e,q.cartId))})):c(Object(I.e)(e,q.cartId))},F=function(e){P?v.a.addProductToShoppingCart({product:e,userId:U,cartId:q.cartId}).then((function(){c(Object(I.a)(e,q.cartId))})):c(Object(I.a)(e,q.cartId))};if(_.image){var D=e.from(_.image.data);E=Object(N.a)(D)}return Object(R.jsxs)("div",{className:r.root,children:[Object(R.jsx)(j.a,{className:r.card,children:Object(R.jsx)(b.a,{image:E,className:r.image})}),Object(R.jsx)(i.a,{border:1,className:r.box,style:{color:"blue"},children:Object(R.jsxs)(m.a,{container:!0,item:!0,xs:12,spacing:3,style:{color:"black",padding:15},children:[Object(R.jsxs)(m.a,{item:!0,xs:7,children:[Object(R.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(R.jsxs)(d.a,{variant:"h3",style:{marginRight:15},children:[" ",_.name,"  "]}),"Admin"===(null===P||void 0===P?void 0:P.userType)&&Object(R.jsx)(i.a,{border:1,style:{borderRadius:10,color:"darkblue",width:50,marginBottom:25},children:Object(R.jsx)(o.a,{style:{width:"100%",height:"100%"},color:"primary",onClick:function(){return c(Object(h.a)(!0,"ModifyProduct"))},children:Object(R.jsx)(x.a,{})})})]}),Object(R.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(R.jsx)(O.a,{readOnly:!P||M,value:function(){if(!_.ratings||0===_.ratings.length)return 0;var e=_.ratings.reduce((function(e,t){return e+t}),0);return console.log("sum / length:",e/_.ratings.length,"rounded: ",Object(C.a)(e/_.ratings.length)),Object(C.a)(e/_.ratings.length)}(),name:_.name,precision:.5,emptyIcon:Object(R.jsx)(g.a,{fontSize:"inherit"}),onChange:function(e,t){return function(e){var t=e||0;y.a.addRatingForProduct(U,_._id,t).then((function(e){if(null!==e){var t,r=null===(t=e.ratings)||void 0===t?void 0:t.find((function(e){return e._id.toString()===_._id}));r&&(c(Object(k.a)(r)),c(Object(S.a)(e)))}}))}(t)}}),M&&Object(R.jsx)(i.a,{border:2,className:r.ratedTag,children:Object(R.jsx)(d.a,{children:"Rated"})})]}),Object(R.jsxs)(d.a,{children:[Object(R.jsx)("br",{}),_.description,Object(R.jsx)("br",{}),"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."]})]}),Object(R.jsx)(m.a,{item:!0,xs:5,children:Object(R.jsxs)("div",{style:{position:"relative",top:150},children:[Object(R.jsx)(i.a,{border:1,justifyContent:"center",className:r.priceTag,children:Object(R.jsx)(s.a,{size:"small",label:_.price.toString()+"\u20ac",color:"primary",className:r.chip})}),Object(R.jsx)(i.a,{border:1,justifyContent:"center",style:{backgroundColor:"lightgrey",maxWidth:300,borderRadius:10},children:Object(R.jsxs)(u.a,{className:r.button,disabled:_.stock<=0,size:"small",color:"primary",onClick:function(){return function(){var e=q.cart.some((function(e){return e._id===_._id})),t=q.cart.find((function(e){return e._id===_._id}));t||(t=Object(n.a)(Object(n.a)({},_),{},{quantity:1})),e?(console.log("tuote on k\xe4rryss\xe4"),L(t)):(console.log("tuote ei ole k\xe4rryss\xe4"),F(t))}()},children:["Lis\xe4\xe4 ostoskoriin",Object(R.jsx)(l.a,{title:Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)("p",{children:[" Green = Available ",Object(R.jsx)("br",{})," Yellow = Few left ",Object(R.jsx)("br",{})," Red = Not available  "]})," "]}),children:_.stock<=0?Object(R.jsx)(f.a,{className:r.availability,style:{color:"red"}}):_.stock>=1&&_.stock<=5?Object(R.jsx)(f.a,{className:r.availability,style:{color:"yellow"}}):Object(R.jsx)(f.a,{className:r.availability,style:{color:"green"}})})]})})]})})]})}),Object(R.jsx)(w.a,{})]})}}).call(this,r(112).Buffer)},202:function(e,t,r){"use strict";(function(e){var n=r(7),a=(r(0),r(34)),c=r(16),i=r(63),s=r(218),o=r(102),d=r(152),u=r(211),l=r(367),j=r(215),b=r(6),m=r(19),p=r(207),h=r(208),O=r(125),f=r(70),x=r(1),g=Object(u.a)({nameAndIcon:{width:"50%",margin:"0 auto",flexGrow:1},avatar:{backgroundColor:"white",marginLeft:15,width:120,height:120,"&:hover":{backgroundColor:"lightgrey"}},column:{display:"flex",flexDirection:"column"},header:{textAlign:"center",height:20,color:"white",borderRadius:"15%",backgroundColor:"#2525b8"}}),v={bgcolor:"background.paper",m:1};t.a=function(t){var r,u=t.user,y=g(),w=Object(b.b)();if(!u)return Object(x.jsx)("div",{});for(var N,C=function(e){var t=e.text;return Object(x.jsx)(a.a,{className:"".concat(y.header),children:t})},I=[],k=[],S=0,R=u.recentActivity.length-1;R>=0&&(I.push(Object(O.a)(u.recentActivity[R])),k.push(u.platformInfo[R]),4!==++S);R--);if(null===u||void 0===u||null===(r=u.avatar)||void 0===r?void 0:r.data){var T=e.from(u.avatar.data);N=Object(f.a)(T)}return Object(x.jsxs)("div",{children:[u&&Object(x.jsxs)(c.a,{container:!0,item:!0,xs:12,spacing:1,children:[Object(x.jsx)(c.a,{item:!0,xs:3,children:Object(x.jsx)(i.a,Object(n.a)(Object(n.a)({borderRight:1,borderColor:"primary.main",style:{height:270}},v),{},{children:Object(x.jsxs)("div",{className:y.nameAndIcon,children:[N?Object(x.jsx)(s.a,{onClick:function(){return w(Object(m.a)(!0,"ModifyUserAvatar"))},src:N,className:y.avatar}):Object(x.jsx)(s.a,{onClick:function(){return w(Object(m.a)(!0,"ModifyUserAvatar"))},className:y.avatar,children:Object(x.jsx)(l.a,{style:{color:"#094ebd",width:120,height:120}})}),Object(x.jsxs)(a.a,{style:{marginLeft:5},variant:"h6",children:[u.firstName," \xa0 ",u.lastName]})]})}))}),Object(x.jsxs)("div",{className:y.column,children:[Object(x.jsx)(c.a,{item:!0,xs:12,children:Object(x.jsxs)(i.a,Object(n.a)(Object(n.a)({borderBottom:1,borderColor:"primary.main",style:{height:120,width:600}},v),{},{children:[Object(x.jsx)(C,{text:"User info"}),Object(x.jsxs)(a.a,{variant:"subtitle1",children:["Email: ",u.email," ",Object(x.jsx)("br",{}),"Firstname: ",u.firstName," ",Object(x.jsx)("br",{}),"Lastname: ",u.lastName,Object(x.jsx)(o.a,{onClick:function(){return w(Object(m.a)(!0,"ModifyUser"))},style:{position:"relative",left:10,marginTop:-10},children:Object(x.jsx)(d.a,{title:"Modify user info",children:Object(x.jsx)(j.a,{})})}),Object(x.jsx)("br",{})]})]}))}),Object(x.jsx)(c.a,{item:!0,xs:12,children:Object(x.jsxs)(i.a,Object(n.a)(Object(n.a)({borderBottom:1,borderColor:"primary.main",style:{height:120,width:600}},v),{},{children:[Object(x.jsx)(C,{text:"Recent activity"}),I.map((function(e,t){return Object(x.jsxs)(a.a,{children:[e,": ",k[t]]},t)}))]}))})]})]}),Object(x.jsx)(p.a,{}),Object(x.jsx)(h.a,{})]})}}).call(this,r(112).Buffer)},203:function(e,t,r){"use strict";(function(e){r(0);var n=r(6),a=r(129),c=r(149),i=r(214),s=r(34),o=r(150),d=r(213),u=r(102),l=r(370),j=r(371),b=r(100),m=r(101),p=r(15),h=r(22),O=r(70),f=r(1),x=Object(a.a)({container:{display:"flex",flexDirection:"row"},card:{width:380,maxHeight:140,marginBottom:15},details:{display:"flex",flexDirection:"column",height:120},content:{width:190,height:20,flex:"1 0 auto",backgroundColor:b.a[200]},info:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},image:{width:"100%"},contentAndImage:{display:"flex",maxHeight:120},deleteButton:{display:"flex",backgroundColor:m.a[400],justifyContent:"center"},iconButtons:{position:"relative",top:50}});t.a=function(t){var r,a=t.product,b=x(),m=Object(n.b)(),g=Object(n.c)((function(e){return e.shoppingCartReducer.cartId})),v=Object(n.c)((function(e){return e.userReducer.user}));r=v?v._id:"";var y;if(a.image){var w=e.from(a.image.data);y=Object(O.a)(w)}return Object(f.jsxs)("div",{className:b.container,children:[Object(f.jsxs)(c.a,{className:b.card,children:[Object(f.jsxs)("div",{className:b.contentAndImage,children:[Object(f.jsx)("div",{className:b.details,children:Object(f.jsxs)(i.a,{className:b.content,children:[Object(f.jsxs)(s.a,{className:b.info,component:"h6",variant:"h6",children:[a.name," x ",a.quantity.toString()]}),Object(f.jsx)(s.a,{className:b.info,variant:"subtitle1",color:"textSecondary",children:a.description}),Object(f.jsxs)(s.a,{variant:"subtitle1",color:"textSecondary",children:[a.price,"\u20ac"]})]})}),Object(f.jsx)(o.a,{className:b.image,image:y})]}),Object(f.jsx)("div",{children:Object(f.jsx)(d.a,{className:b.deleteButton,onClick:function(){return function(e){v?h.a.removeProductFromShoppingCart({cartId:g,userId:r,product:e}).then((function(){m(Object(p.f)(e,g))})):m(Object(p.f)(e,g))}(a)},children:"Remove item(s) from cart"})})]}),Object(f.jsxs)("div",{className:b.iconButtons,children:[Object(f.jsx)(u.a,{onClick:function(){return function(e){v?h.a.decreaseProductQuantity({cartId:g,userId:r,product:e}).then((function(){m(Object(p.d)(e,g))})):m(Object(p.d)(e,g))}(a)},children:Object(f.jsx)(l.a,{})}),Object(f.jsx)(u.a,{onClick:function(){return function(e){v?h.a.increaseProductQuantity({cartId:g,userId:r,product:e}).then((function(){m(Object(p.e)(e,g))})):m(Object(p.e)(e,g))}(a)},children:Object(f.jsx)(j.a,{style:{marginLeft:-10}})})]})]})}}).call(this,r(112).Buffer)},206:function(e,t,r){"use strict";var n=r(18),a=r(0),c=r(439),i=r(211),s=r(11),o=r(13),d=r(6),u=r(68),l=r(69),j=r(80),b=r(27),m=r(124),p=r(1),h=o.c().shape({name:o.d().required("Required"),description:o.d(),price:o.b().required("Required"),stock:o.b(),image:o.a()}),O=function(){var e=Object(a.useState)(),t=Object(n.a)(e,2),r=t[0],c=t[1],i=Object(a.useState)([]),o=Object(n.a)(i,2),O=(o[0],o[1]),f=Object(d.b)(),x=Object(d.c)((function(e){return e.activeProductReducer.product}));return x?Object(p.jsx)("div",{children:Object(p.jsx)(s.c,{initialValues:{name:x.name,description:x.description,price:x.price,stock:x.stock,image:"",tags:x.tags},validationSchema:h,onSubmit:function(e){var t=e.name,r=e.description,n=e.price,a=e.stock,c=e.image,i={name:t,description:r,price:n,stock:a,_id:x._id,ratings:x.ratings,image:x.image,tags:x.tags};u.a.modifyProduct(i,c).then((function(e){e||f(Object(b.b)("Unexpected error","error")),console.log("modify product response:",e),f(Object(j.a)(e)),f(Object(l.b)()),f(Object(b.b)("Product ".concat(i.name," modified"),"success"))}))},children:function(e){var t=e.errors,n=e.touched,a=e.setFieldValue,i=e.submitForm;return Object(p.jsx)(m.a,{errors:t,touched:n,setFieldValue:a,image:r,setImage:c,submitForm:i,tags:x.tags,setTags:O})}})}):Object(p.jsx)("div",{})},f=r(19),x=function(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}},g=Object(i.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{position:"absolute",width:650,height:550,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},header:{background:"linear-gradient(45deg, #124eb0 70%, #501573 90%)",border:0,borderRadius:30,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",textAlign:"center",height:30,marginTop:5,padding:"0 30px"}}})),v=function(){var e=g();return Object(p.jsx)("h2",{className:e.header,children:" Modify Product "})};t.a=function(){var e=g(),t=Object(a.useState)(x),r=Object(n.a)(t,1)[0],i=Object(d.c)((function(e){return e.modalReducer.modifyProductModal})),s=Object(d.b)();return Object(p.jsx)(c.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:i,onClose:function(){s(Object(f.a)(!i,"ModifyProduct"))},children:Object(p.jsxs)("div",{style:r,className:e.paper,children:[Object(p.jsx)(v,{}),Object(p.jsx)(O,{})]})})}},207:function(e,t,r){"use strict";var n=r(18),a=r(0),c=r(439),i=r(211),s=r(6),o=r(19),d=r(7),u=r(11),l=r(16),j=r(13),b=r(44),m=r(27),p=r(39),h=r(45),O=r(1),f=j.c().shape({userName:j.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),firstName:j.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),lastName:j.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:j.d(),email:j.d().email("Invalid email").required("Required")}),x=function(){var e=Object(h.a)(),t=Object(s.b)(),r=Object(s.c)((function(e){return e.userReducer.user}));return r?Object(O.jsx)("div",{children:Object(O.jsx)(u.c,{initialValues:{userName:r.userName,firstName:r.firstName,lastName:r.lastName,password:"",email:r.email},validationSchema:f,onSubmit:function(e){var n={_id:r._id,userName:e.userName,firstName:e.firstName,lastName:e.lastName,password:e.password,email:e.email};console.log(n),b.a.modifyUser(n).then((function(e){e?(t(Object(o.a)(!1,"ModifyUser")),t(Object(p.a)(Object(d.a)(Object(d.a)({},n),{},{_id:r._id,userType:r.userType,token:r.token,recentActivity:r.recentActivity,platformInfo:r.platformInfo}))),window.localStorage.setItem("loggedUser",JSON.stringify(Object(d.a)(Object(d.a)({},n),{},{_id:r._id,userType:r.userType,token:r.token})))):t(Object(m.b)("User modification failed","error"))})).catch((function(e){return console.log(e)}))},children:function(t){var r=t.errors,n=t.touched;return Object(O.jsxs)(u.b,{children:[Object(O.jsxs)(l.a,{container:!0,spacing:1,children:[Object(O.jsxs)(l.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(O.jsx)(l.a,{item:!0,xs:2,children:Object(O.jsxs)("label",{children:["Username: ",Object(O.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(O.jsx)(l.a,{item:!0,xs:9,children:Object(O.jsx)(u.a,{className:e.field,placeholder:"Username",type:"text",name:"userName"})}),Object(O.jsx)(l.a,{item:!0,xs:1,children:r.userName&&n.userName&&Object(O.jsx)("div",{children:r.userName})})]}),Object(O.jsxs)(l.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(O.jsx)(l.a,{item:!0,xs:2,children:Object(O.jsxs)("label",{children:["Firstname: ",Object(O.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(O.jsx)(l.a,{item:!0,xs:9,children:Object(O.jsx)(u.a,{className:e.field,placeholder:"Firstname",type:"text",name:"firstName"})}),Object(O.jsx)(l.a,{item:!0,xs:1,children:r.firstName&&n.firstName&&Object(O.jsx)("div",{children:r.firstName})})]}),Object(O.jsxs)(l.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(O.jsx)(l.a,{item:!0,xs:2,children:Object(O.jsxs)("label",{children:["Lastname: ",Object(O.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(O.jsx)(l.a,{item:!0,xs:9,children:Object(O.jsx)(u.a,{className:e.field,placeholder:"Lastname",type:"text",name:"lastName"})}),Object(O.jsx)(l.a,{item:!0,xs:1,children:r.lastName&&n.lastName&&Object(O.jsx)("div",{children:r.lastName})})]}),Object(O.jsxs)(l.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(O.jsx)(l.a,{item:!0,xs:2,children:Object(O.jsx)("label",{children:"Password: "})}),Object(O.jsx)(l.a,{item:!0,xs:9,children:Object(O.jsx)(u.a,{className:e.field,placeholder:"If password field is left empty, it will not be changed",type:"password",name:"password"})}),Object(O.jsx)(l.a,{item:!0,xs:1,children:r.password&&n.password&&Object(O.jsx)("div",{children:r.password})})]}),Object(O.jsxs)(l.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(O.jsx)(l.a,{item:!0,xs:2,children:Object(O.jsxs)("label",{children:["Email: ",Object(O.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(O.jsx)(l.a,{item:!0,xs:9,children:Object(O.jsx)(u.a,{className:e.field,placeholder:"example@gmail.com",type:"text",name:"email"})}),Object(O.jsx)(l.a,{item:!0,xs:1,children:r.email&&n.email&&Object(O.jsx)("div",{children:r.email})})]})]}),Object(O.jsx)("button",{className:e.button,type:"submit",children:"Submit"})]})}})}):Object(O.jsx)("div",{})},g=function(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}},v=Object(i.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{position:"absolute",width:650,height:370,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},header:{background:"linear-gradient(45deg, #124eb0 70%, #501573 90%)",border:0,borderRadius:30,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",textAlign:"center",height:30,marginTop:5,padding:10,marginBottom:30}}})),y=function(){var e=v();return Object(O.jsx)("h2",{className:e.header,children:" Modify user info "})};t.a=function(){var e=v(),t=Object(a.useState)(g),r=Object(n.a)(t,1)[0],i=Object(s.c)((function(e){return e.modalReducer.modifyUserInfoModal})),d=Object(s.b)();return Object(O.jsx)(c.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:i,onClose:function(){d(Object(o.a)(!i,"ModifyUser"))},children:Object(O.jsxs)("div",{style:r,className:e.paper,children:[Object(O.jsx)(y,{}),Object(O.jsx)(x,{})]})})}},208:function(e,t,r){"use strict";var n=r(18),a=r(0),c=r(439),i=r(211),s=r(6),o=r(19),d=r(7),u=r(44),l=r(39),j=r(11),b=r(16),m=r(13),p=r(45),h=r(1),O=m.c().shape({image:m.a()}),f=function(){var e=Object(p.a)(),t=Object(a.useState)(),r=Object(n.a)(t,2),c=r[0],i=r[1],m=Object(s.c)((function(e){return e.userReducer.user})),f=m?m._id:"",x=Object(s.b)();return Object(h.jsx)("div",{children:Object(h.jsx)(j.c,{initialValues:{image:""},validationSchema:O,onSubmit:function(e){var t=e.image;console.log(t),u.a.modifyAvatar(t,f).then((function(e){console.log("modify avatar response",e),e.avatar&&m&&(x(Object(l.a)(Object(d.a)(Object(d.a)({},m),{},{avatar:e.avatar}))),x(Object(o.a)(!1,"ModifyUserAvatar")))}))},children:function(t){var r=t.setFieldValue,n=t.submitForm;return Object(h.jsxs)(j.b,{children:[Object(h.jsxs)(b.a,{container:!0,spacing:1,children:[Object(h.jsxs)(b.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(h.jsx)(b.a,{item:!0,xs:2,children:Object(h.jsx)("label",{children:" Avatar: "})}),Object(h.jsx)(b.a,{item:!0,xs:9,children:Object(h.jsx)(j.a,{className:e.field,type:"File",name:"image",value:void 0,style:{color:"rgba(0,0,0,0)"},onChange:function(e){r("image",e.currentTarget.files?e.currentTarget.files[0]:void 0),i(e.currentTarget.files?e.currentTarget.files[0]:void 0)}})}),Object(h.jsx)(b.a,{item:!0,xs:1,children:c&&Object(h.jsx)("button",{type:"button",onClick:function(){r("image",void 0),i(void 0)},children:"Cancel"})})]}),Object(h.jsxs)(b.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(h.jsx)(b.a,{item:!0,xs:2,children:Object(h.jsx)("label",{children:" Avatar preview: "})}),Object(h.jsx)(b.a,{item:!0,xs:9,children:c?Object(h.jsx)("img",{height:100,width:100,src:URL.createObjectURL(c),alt:"Preview to upload"}):Object(h.jsx)("img",{height:100,width:100,src:"https://live.staticflickr.com/5217/5471047557_4dc13f5376_n.jpg",alt:"Preview to upload"})})]})]}),Object(h.jsx)("button",{className:e.button,onClick:n,type:"submit",children:"Submit"})]})}})})},x=function(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}},g=Object(i.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{position:"absolute",width:650,height:300,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},header:{background:"linear-gradient(45deg, #124eb0 70%, #501573 90%)",border:0,borderRadius:30,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",textAlign:"center",height:30,marginTop:5,padding:10,marginBottom:30}}})),v=function(){var e=g();return Object(h.jsx)("h2",{className:e.header,children:" Change Avatar "})};t.a=function(){var e=g(),t=Object(a.useState)(x),r=Object(n.a)(t,1)[0],i=Object(s.c)((function(e){return e.modalReducer})),d=Object(s.b)();return Object(h.jsx)(c.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:i.modifyUserAvatarModal,onClose:function(){d(Object(o.a)(!i.modifyUserAvatarModal,"ModifyUserAvatar"))},children:Object(h.jsxs)("div",{style:r,className:e.paper,children:[Object(h.jsx)(v,{}),Object(h.jsx)(f,{})]})})}},22:function(e,t,r){"use strict";var n=r(10),a=r.n(n),c=r(24),i=r(25),s=r.n(i),o="https://verkkis.herokuapp.com/api/shoppingCart",d=function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post(o,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("".concat(o,"/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("".concat(o,"/").concat(t.cartId,"/addProduct"),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.put("".concat(o,"/").concat(t.cartId,"/remove"),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.put("".concat(o,"/").concat(t.cartId,"/increase"),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.put("".concat(o,"/").concat(t.cartId,"/decrease"),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("set shopping cart activity cartid",t),e.next=3,s.a.put("".concat(o,"/").concat(t,"/activity"),{data:r});case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.put("".concat(o,"/").concat(t,"/completed"));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.delete("".concat(o,"/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a={createNewShoppingCart:d,addProductToShoppingCart:l,increaseProductQuantity:b,decreaseProductQuantity:m,removeProductFromShoppingCart:j,getUsersShoppingCart:u,removeShoppingCart:O,setShoppingCartActivity:p,setShoppingCartCompleted:h}},27:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return i}));var n=r(82),a=r(37),c=function(e,t){if(Object(a.e)(t)){var r={type:n.b,notificationType:t,data:e};return function(e){e(r)}}var c={type:n.b,notificationType:"error",data:e};return function(e){e(c)}},i=function(){var e={type:n.a,notificationType:"error",data:""};return function(t){t(e)}}},363:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(20),i=r.n(c),s=r(99),o=r(50),d=r(28),u=r(18),l=r(211),j=r(416),b=r(417),m=r(102),p=r(34),h=r(440),O=r(152),f=r(212),x=r(418),g=r(419),v=r(420),y=r(421),w=r(422),N=r(7),C=r(5),I=r(365),k=r(410),S=r(412),R=r(205),T=r(367),_=r(411),A=r(413),P=r(1),U=Object(C.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return Object(P.jsx)(R.a,Object(N.a)({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),q=Object(C.a)((function(e){return{root:{"&:focus":{backgroundColor:e.palette.primary.main,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(I.a),E=function(){var e=a.a.useState(null),t=Object(u.a)(e,2),r=t[0],n=t[1];return Object(P.jsxs)("div",{children:[Object(P.jsx)(m.a,{style:{color:"white"},onClick:function(e){n(e.currentTarget)},children:Object(P.jsx)(T.a,{style:{fontSize:30,marginTop:5}})}),Object(P.jsxs)(U,{id:"customized-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:function(){n(null)},children:[Object(P.jsx)(o.b,{to:"/account",style:{textDecoration:"none"},children:Object(P.jsxs)(q,{children:[Object(P.jsx)(k.a,{children:Object(P.jsx)(_.a,{fontSize:"small"})}),Object(P.jsx)(S.a,{primary:"Personal info"})]})}),Object(P.jsx)(o.b,{to:"/pastOrders",style:{textDecoration:"none"},children:Object(P.jsxs)(q,{children:[Object(P.jsx)(k.a,{children:Object(P.jsx)(A.a,{fontSize:"small"})}),Object(P.jsx)(S.a,{primary:"Past orders"})]})})]})]})},M=r(39),L=r(6),F=r(27),D=r(98),B=function(e){var t={type:D.a,data:e};return function(e){e(t)}},V=function(e){var t={type:D.b,data:e};return function(e){e(t)}},z=r(439),H=r(11),G=r(16),W=r(13),Q=r(197),J=r.n(Q),Y=r(128),K=r.n(Y),$=r(44),X=r(19),Z=r(15),ee=r(22),te=r(45),re=W.c().shape({userName:W.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:W.d().min(2,"Too Short!").max(50,"Too Long!").required("Required")}),ne=function(){var e,t,r=Object(L.b)(),n=Object(L.c)((function(e){return e.shoppingCartReducer})),a=Object(te.a)(),c=function(e,t,r){var n="";return n+=e?e+" ":"unknown name ",n+=t?t+" ":"unknown os ",n+(r||"unknown version ")}(K.a.name,null===(e=K.a.os)||void 0===e?void 0:e.family,null===(t=K.a.os)||void 0===t?void 0:t.version);return Object(P.jsx)("div",{children:Object(P.jsx)(H.c,{initialValues:{userName:"",password:""},validationSchema:re,onSubmit:function(e){$.a.signIn(e.userName,e.password,c).then((function(e){if(e.token){var t={_id:e._id,firstName:e.firstName,lastName:e.lastName,userName:e.userName,email:e.email,userType:e.userType,avatar:e.avatar,token:e.token,recentActivity:e.recentActivity,platformInfo:e.platformInfo,ratings:e.ratings},a=Object(N.a)(Object(N.a)({},t),{},{timestamp:new Date});window.localStorage.setItem("loggedUser",JSON.stringify(a)),r(Object(M.a)(t)),r(Object(X.a)(!1,"LogIn")),r(Object(F.b)("Logged in as: "+t.userName,"success")),ee.a.getUsersShoppingCart(t._id).then((function(e){e?(console.log("login form",e),function(e){J()({title:"Use unfinished shopping cart?",text:"Previous unfinished shopping cart found, do you want to use that one or create new one? Old will be removed permanently if new is created",icon:"info",buttons:["Create new!","Use previous!"]}).then((function(t){t?(r(Object(Z.g)(e.id,e.products)),ee.a.setShoppingCartActivity(e.id,!0)):ee.a.createNewShoppingCart({products:n.cart,user:e.user,id:""}).then((function(t){ee.a.removeShoppingCart(e.user).then((function(e){console.log("loginform removed shopping cart",e)})),console.log("Log in: new shoppingcart response",t),r(Object(Z.c)(t.id))}))}))}(e)):(console.log("luodaan uusi karry"),ee.a.createNewShoppingCart({products:n.cart,user:t._id,id:""}).then((function(e){console.log("login form new shopping cart",e),r(Object(Z.c)(e.id))})))}))}else r(Object(F.b)("Invalid username / password","error"))}))},children:function(e){var t=e.errors,r=e.touched;return Object(P.jsxs)(H.b,{children:[Object(P.jsxs)(G.a,{container:!0,spacing:1,children:[Object(P.jsxs)(G.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(P.jsx)(G.a,{item:!0,xs:2,children:Object(P.jsx)("label",{children:"Username: "})}),Object(P.jsx)(G.a,{item:!0,xs:9,children:Object(P.jsx)(H.a,{className:a.field,placeholder:"Username",type:"text",name:"userName"})}),Object(P.jsx)(G.a,{item:!0,xs:1,children:t.userName&&r.userName&&Object(P.jsx)("div",{children:t.userName})})]}),Object(P.jsxs)(G.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(P.jsx)(G.a,{item:!0,xs:2,children:Object(P.jsx)("label",{children:"Password: "})}),Object(P.jsx)(G.a,{item:!0,xs:9,children:Object(P.jsx)(H.a,{className:a.field,placeholder:"Password",type:"password",name:"password"})}),Object(P.jsx)(G.a,{item:!0,xs:1,children:t.password&&r.password&&Object(P.jsx)("div",{children:t.password})})]})]}),Object(P.jsx)("button",{className:a.button,type:"submit",children:"Submit"})]})}})})},ae=function(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}},ce=Object(l.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{position:"absolute",width:450,height:190,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},header:{background:"linear-gradient(45deg, #124eb0 70%, #501573 90%)",border:0,borderRadius:30,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",textAlign:"center",height:30,marginTop:5,padding:"0 30px"}}})),ie=function(){var e=ce();return Object(P.jsx)("h2",{className:e.header,children:" Log In"})},se=function(){var e=ce(),t=Object(n.useState)(ae),r=Object(u.a)(t,1)[0],a=Object(L.c)((function(e){return e.modalReducer.logInModal})),c=Object(L.b)();return Object(P.jsx)(z.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:a,onClose:function(){c(Object(X.a)(!a,"LogIn"))},children:Object(P.jsxs)("div",{style:r,className:e.paper,children:[Object(P.jsx)(ie,{}),Object(P.jsx)(ne,{})]})})},oe=r(68),de=r(69),ue=r(124),le=W.c().shape({name:W.d().required("Required"),description:W.d(),price:W.b().required("Required"),stock:W.b(),image:W.a()}),je=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)([]),i=Object(u.a)(c,2),s=i[0],o=i[1],d=Object(L.b)();return Object(P.jsx)("div",{children:Object(P.jsx)(H.c,{initialValues:{name:"",description:"",price:0,stock:0,image:""},validationSchema:le,onSubmit:function(e){var t=e.name,r=e.description,n=e.price,a=e.stock,c=e.image,i={name:t,description:r,price:n,stock:a,ratings:[],tags:s};oe.a.addProduct(i,c).then((function(e){if(null!==e){var t={name:e.name,description:e.description,price:e.price,stock:e.stock,image:e.image,ratings:e.ratings,tags:[],_id:e._id};d(Object(de.a)(t)),d(Object(F.b)("Product ".concat(i.name," added"),"success"))}}))},children:function(e){var t=e.errors,n=e.touched,c=e.setFieldValue,i=e.submitForm;return Object(P.jsx)(ue.a,{errors:t,touched:n,setFieldValue:c,image:r,setImage:a,submitForm:i,tags:s,setTags:o})}})})},be=function(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}},me=Object(l.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{position:"absolute",width:650,height:550,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},header:{background:"linear-gradient(45deg, #124eb0 70%, #501573 90%)",border:0,borderRadius:30,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",textAlign:"center",height:30,marginTop:5,padding:"0 30px"}}})),pe=function(){var e=me();return Object(P.jsx)("h2",{className:e.header,children:" Add Product "})},he=function(){var e=me(),t=Object(n.useState)(be),r=Object(u.a)(t,1)[0],a=Object(L.c)((function(e){return e.modalReducer.addProductModal})),c=Object(L.b)();return Object(P.jsx)(z.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:a,onClose:function(){c(Object(X.a)(!a,"AddProduct"))},children:Object(P.jsxs)("div",{style:r,className:e.paper,children:[Object(P.jsx)(pe,{}),Object(P.jsx)(je,{})]})})},Oe=W.c().shape({userName:W.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),firstName:W.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),lastName:W.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:W.d().min(2,"Too Short!").max(50,"Too Long!").required("Required"),email:W.d().email("Invalid email").required("Required")}),fe=function(){var e=Object(te.a)(),t=Object(L.b)();return Object(P.jsx)("div",{children:Object(P.jsx)(H.c,{initialValues:{userName:"",firstName:"",lastName:"",password:"",email:""},validationSchema:Oe,onSubmit:function(e){var r={userName:e.userName,firstName:e.firstName,lastName:e.lastName,password:e.password,email:e.email,userType:"User"};$.a.createUser(r).then((function(e){e?(t(Object(X.a)(!1,"CreateUser")),t(Object(F.b)("Created user: "+r.userName,"success"))):t(Object(F.b)("User creation failed","error"))})).catch((function(e){return console.log(e)}))},children:function(t){var r=t.errors,n=t.touched;return Object(P.jsxs)(H.b,{children:[Object(P.jsxs)(G.a,{container:!0,spacing:1,children:[Object(P.jsxs)(G.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(P.jsx)(G.a,{item:!0,xs:2,children:Object(P.jsxs)("label",{children:["Username: ",Object(P.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(P.jsx)(G.a,{item:!0,xs:9,children:Object(P.jsx)(H.a,{className:e.field,placeholder:"Username",type:"text",name:"userName"})}),Object(P.jsx)(G.a,{item:!0,xs:1,children:r.userName&&n.userName&&Object(P.jsx)("div",{children:r.userName})})]}),Object(P.jsxs)(G.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(P.jsx)(G.a,{item:!0,xs:2,children:Object(P.jsxs)("label",{children:["Firstname: ",Object(P.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(P.jsx)(G.a,{item:!0,xs:9,children:Object(P.jsx)(H.a,{className:e.field,placeholder:"Firstname",type:"text",name:"firstName"})}),Object(P.jsx)(G.a,{item:!0,xs:1,children:r.firstName&&n.firstName&&Object(P.jsx)("div",{children:r.firstName})})]}),Object(P.jsxs)(G.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(P.jsx)(G.a,{item:!0,xs:2,children:Object(P.jsxs)("label",{children:["Lastname: ",Object(P.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(P.jsx)(G.a,{item:!0,xs:9,children:Object(P.jsx)(H.a,{className:e.field,placeholder:"Lastname",type:"text",name:"lastName"})}),Object(P.jsx)(G.a,{item:!0,xs:1,children:r.lastName&&n.lastName&&Object(P.jsx)("div",{children:r.lastName})})]}),Object(P.jsxs)(G.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(P.jsx)(G.a,{item:!0,xs:2,children:Object(P.jsxs)("label",{children:["Password: ",Object(P.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(P.jsx)(G.a,{item:!0,xs:9,children:Object(P.jsx)(H.a,{className:e.field,placeholder:"Password",type:"password",name:"password"})}),Object(P.jsx)(G.a,{item:!0,xs:1,children:r.password&&n.password&&Object(P.jsx)("div",{children:r.password})})]}),Object(P.jsxs)(G.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(P.jsx)(G.a,{item:!0,xs:2,children:Object(P.jsxs)("label",{children:["Email: ",Object(P.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(P.jsx)(G.a,{item:!0,xs:9,children:Object(P.jsx)(H.a,{className:e.field,placeholder:"example@gmail.com",type:"text",name:"email"})}),Object(P.jsx)(G.a,{item:!0,xs:1,children:r.email&&n.email&&Object(P.jsx)("div",{children:r.email})})]})]}),Object(P.jsx)("button",{className:e.button,type:"submit",children:"Submit"})]})}})})},xe=function(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}},ge=Object(l.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{position:"absolute",width:650,height:370,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},header:{background:"linear-gradient(45deg, #124eb0 70%, #501573 90%)",border:0,borderRadius:30,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",textAlign:"center",height:30,marginTop:5,padding:10,marginBottom:30}}})),ve=function(){var e=ge();return Object(P.jsx)("h2",{className:e.header,children:" Create User "})},ye=function(){var e=ge(),t=Object(n.useState)(xe),r=Object(u.a)(t,1)[0],a=Object(L.b)(),c=Object(L.c)((function(e){return e.modalReducer.createUserModal}));return Object(P.jsx)(z.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:c,onClose:function(){a(Object(X.a)(!1,"CreateUser"))},children:Object(P.jsxs)("div",{style:r,className:e.paper,children:[Object(P.jsx)(ve,{}),Object(P.jsx)(fe,{})]})})},we=Object(l.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},title:{marginRight:e.spacing(10)},buttons:{display:"flex",marginLeft:"auto",marginRight:-12,fontSize:15},login:{margin:e.spacing(2),fontSize:15,flexDirection:"column"},addProductIcon:{height:30,width:30},whiteIcon:{color:"white",fontSize:30},searchIcon:{color:"white"}}})),Ne=function(e){var t=e.user,r=Object(n.useState)(""),a=Object(u.a)(r,2),c=a[0],i=a[1],s=we(),d=Object(L.b)(),l=Object(L.c)((function(e){return e.shoppingCartReducer.cartId})),N=!!t;return Object(P.jsx)("div",{children:Object(P.jsxs)(j.a,{position:"static",color:"primary",children:[Object(P.jsxs)(b.a,{children:[Object(P.jsx)(o.b,{to:"/",children:Object(P.jsx)(m.a,{edge:"start",className:s.menuButton,color:"inherit","aria-label":"menu",children:Object(P.jsx)(x.a,{})})}),Object(P.jsx)(p.a,{variant:"h6",className:s.title,children:"Verkkokauppa"}),Object(P.jsx)(h.a,{placeholder:"Search products",onChange:function(e){e.preventDefault(),i(e.target.value)},style:{backgroundColor:"#dae1f0"},size:"small",variant:"outlined",value:c}),Object(P.jsx)(m.a,{onClick:function(){d(B(c))},children:Object(P.jsx)(g.a,{className:s.searchIcon})}),Object(P.jsx)(m.a,{onClick:function(){return i(""),void d(B(""))},children:Object(P.jsx)(O.a,{title:"Clear searchbar",children:Object(P.jsx)(v.a,{className:s.searchIcon})})}),Object(P.jsxs)("div",{className:s.buttons,children:["Admin"===(null===t||void 0===t?void 0:t.userType)&&Object(P.jsx)(m.a,{onClick:function(){return d(Object(X.a)(!0,"AddProduct"))},color:"inherit",children:Object(P.jsx)(O.a,{title:"Add product",children:Object(P.jsx)(y.a,{className:s.addProductIcon})})}),Object(P.jsx)("div",{children:Object(P.jsx)(f.a,{onClick:function(){return N?(ee.a.setShoppingCartActivity(l,!1),d(Object(M.a)()),d(Object(Z.b)()),d(Object(F.b)("Have a nice day","success")),void window.localStorage.removeItem("loggedUser")):d(Object(X.a)(!0,"LogIn"))},color:"inherit",children:Object(P.jsx)(p.a,{variant:"h6",className:s.login,children:N?"Log out":"Login"})})}),!t&&Object(P.jsx)("div",{children:Object(P.jsx)(f.a,{onClick:function(){return d(Object(X.a)(!0,"CreateUser"))},color:"inherit",children:Object(P.jsx)(p.a,{variant:"h6",className:s.login,children:"Create User"})})}),Object(P.jsx)("div",{children:Object(P.jsx)(o.b,{to:"/shoppingCart",children:Object(P.jsx)(m.a,{className:s.whiteIcon,children:Object(P.jsx)(w.a,{style:{fontSize:30,marginTop:5}})})})}),t&&Object(P.jsx)("div",{children:Object(P.jsx)(E,{})})]})]}),Object(P.jsx)(se,{}),Object(P.jsx)(he,{}),Object(P.jsx)(ye,{})]})})},Ce=r(199),Ie=Object(l.a)({root:{position:"relative",display:"flex",paddingLeft:15}}),ke=function(){var e=Ie(),t=Object(L.c)((function(e){return e.productReducer.products})),r=Object(L.c)((function(e){return e.filterReducer}));if(0===t.length)return null;var n=0===r.productFilter.length?t:t.filter((function(e){return e.name.toLowerCase().includes(r.productFilter.toLowerCase())})),a=r.tagFilter?n.filter((function(e){if(r.tagFilter&&e.tags.includes(r.tagFilter))return e})):n;return console.log("filtered",a),0===a.length?Object(P.jsx)("div",{children:Object(P.jsx)(p.a,{variant:"h5",children:" No results with current filter "})}):Object(P.jsx)("div",{className:e.root,children:a.map((function(e){return Object(P.jsx)(Ce.a,{product:e},e._id)}))})},Se=r(201),Re=r(202),Te=r(129),_e=r(425),Ae=r(426),Pe=r(125),Ue=r(100),qe=r(127),Ee=r(423),Me=r(424),Le=r(427),Fe=r(63),De=r(428),Be=r(429),Ve=r(430),ze=r(431),He=r(210),Ge=Object(Te.a)({root:{backgroundColor:Ue.a[300],"& > *":{borderBottom:"unset"}},header:{backgroundColor:qe.a[300]},mainRow:{backgroundColor:qe.a[200]},row:{"&:hover":{backgroundColor:qe.a[200]}},body:{backgroundColor:Ue.a[200]}}),We=function(e){var t=e.order,r=Object(n.useState)(),a=Object(u.a)(r,2),c=a[0],i=a[1],s=Ge();return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(Ee.a,{className:"".concat(s.root),children:[Object(P.jsx)(Me.a,{children:Object(P.jsx)(m.a,{size:"small",onClick:function(){return i(!c)},children:c?Object(P.jsx)(_e.a,{}):Object(P.jsx)(Ae.a,{})})}),Object(P.jsxs)(Me.a,{component:"th",scope:"row",children:[" ",Object(Pe.a)(t.completionDate)," "]}),Object(P.jsx)(Me.a,{}),Object(P.jsx)(Me.a,{}),Object(P.jsx)(Me.a,{}),Object(P.jsx)(Me.a,{})]}),Object(P.jsx)(Ee.a,{children:Object(P.jsx)(Me.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:Object(P.jsx)(Le.a,{in:c,timeout:"auto",unmountOnExit:!0,children:Object(P.jsxs)(Fe.a,{margin:1,children:[Object(P.jsxs)(p.a,{variant:"h6",gutterBottom:!0,component:"div",children:["Order total price: \xa0 ",t.products.reduce((function(e,t){return e+t.price*t.quantity}),0)]}),Object(P.jsxs)(De.a,{size:"small","aria-label":"purchases",children:[Object(P.jsx)(Be.a,{children:Object(P.jsxs)(Ee.a,{className:s.body,children:[Object(P.jsx)(Me.a,{children:"Name"}),Object(P.jsx)(Me.a,{children:"Price"}),Object(P.jsx)(Me.a,{align:"right",children:"Amount"}),Object(P.jsx)(Me.a,{align:"right",children:"Total price"})]})}),Object(P.jsx)(Ve.a,{className:s.body,children:t.products.map((function(e){return Object(P.jsxs)(Ee.a,{className:s.row,children:[Object(P.jsx)(Me.a,{component:"th",scope:"row",children:e.name}),Object(P.jsx)(Me.a,{children:e.price}),Object(P.jsx)(Me.a,{align:"right",children:e.quantity}),Object(P.jsx)(Me.a,{align:"right",children:Math.round(e.quantity*e.price*100)/100})]},e._id)}))})]})]})})})})]})},Qe=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),r=t[0],a=t[1],c=function(e){return e.sort((function(e,t){return new Date(t.completionDate).getTime()-new Date(e.completionDate).getTime()}))}(r),i=Ge(),s=Object(L.c)((function(e){return e.userReducer.user}));return s?(Object(n.useEffect)((function(){$.a.getUsersCompletedShoppingcarts(s._id).then((function(e){a(e)}))}),[]),Object(P.jsx)(ze.a,{component:He.a,children:Object(P.jsxs)(De.a,{"aria-label":"collapsible table",children:[Object(P.jsx)(Be.a,{children:Object(P.jsxs)(Ee.a,{className:i.header,children:[Object(P.jsx)(Me.a,{}),Object(P.jsx)(Me.a,{children:"Date Of Order"}),Object(P.jsx)(Me.a,{align:"left"}),Object(P.jsx)(Me.a,{align:"right"}),Object(P.jsx)(Me.a,{align:"right"}),Object(P.jsx)(Me.a,{align:"right"})]})}),Object(P.jsx)(Ve.a,{className:i.body,children:c.map((function(e){return Object(P.jsx)(We,{order:e},e.id)}))})]})})):Object(P.jsx)("div",{})},Je=r(432),Ye=r(37),Ke=W.c().shape({firstName:W.d().required("Required"),lastName:W.d().required("Required"),address:W.d().required("Required")}),$e=function(){var e=Object(L.b)(),t=Object(te.a)(),r=Object(L.c)((function(e){return e.userReducer.user})),n=Object(L.c)((function(e){return e.shoppingCartReducer}));return Object(P.jsx)("div",{children:Object(P.jsx)(H.c,{initialValues:{firstName:r?r.firstName:"",lastName:r?r.lastName:"",address:""},validationSchema:Ke,onSubmit:function(t){t.firstName,t.lastName;var a=t.address;Object(Ye.i)(r)&&ee.a.setShoppingCartCompleted(n.cartId).then((function(t){t?(console.log(t),e(Object(Z.b)()),e(Object(F.b)("Delivering products to "+a,"success"))):(console.log(t),e(Object(F.b)("Unexpected error","error")))}))},children:function(e){var n=e.errors,a=e.touched;return Object(P.jsxs)(H.b,{children:[Object(P.jsxs)(G.a,{container:!0,spacing:1,children:[Object(P.jsxs)(G.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(P.jsx)(G.a,{item:!0,xs:2,children:Object(P.jsxs)("label",{children:["First name: ",Object(P.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(P.jsx)(G.a,{item:!0,xs:9,children:Object(P.jsx)(H.a,{className:t.field,placeholder:"First name",type:"text",name:"firstName"})}),Object(P.jsx)(G.a,{item:!0,xs:1,children:n.firstName&&a.firstName&&Object(P.jsx)("div",{children:n.firstName})})]}),Object(P.jsxs)(G.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(P.jsx)(G.a,{item:!0,xs:2,children:Object(P.jsxs)("label",{children:["Last name: ",Object(P.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(P.jsx)(G.a,{item:!0,xs:9,children:Object(P.jsx)(H.a,{className:t.field,placeholder:"Last name",type:"text",name:"lastName"})}),Object(P.jsx)(G.a,{item:!0,xs:1,children:n.lastName&&a.lastName&&Object(P.jsx)("div",{children:n.lastName})})]}),Object(P.jsxs)(G.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(P.jsx)(G.a,{item:!0,xs:2,children:Object(P.jsxs)("label",{children:["Address: ",Object(P.jsx)("b",{style:{color:"red"},children:"*"})," "]})}),Object(P.jsx)(G.a,{item:!0,xs:9,children:Object(P.jsx)(H.a,{className:t.field,placeholder:"Address",type:"text",name:"address"})}),Object(P.jsx)(G.a,{item:!0,xs:1,children:n.address&&a.address&&Object(P.jsx)("div",{children:n.address})})]})]}),Object(P.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(P.jsx)("button",{disabled:!r,className:t.button,style:{left:"0%"},type:"submit",children:" Submit "}),!r&&Object(P.jsx)(p.a,{variant:"subtitle1",className:t.logInText,children:" Please sign in first "})]})]})}})})},Xe=r(203),Ze=Object(Te.a)({box:{maxHeight:350},shoppingCartAndFormBox:{margin:25,marginLeft:-10,height:300,borderRadius:15},cart:{margin:25,borderRadius:15,height:300},container:{marginTop:15},deleteIcon:{position:"relative",top:-15},form:{borderWidth:1,marginTop:75,padding:10},empty:{position:"relative",top:"50%",left:"25%"}}),et=function(){var e=Ze(),t=Object(L.b)(),r=Object(L.c)((function(e){return e.shoppingCartReducer.cart})),n=Object(L.c)((function(e){return e.userReducer.user})),a=(null===n||void 0===n?void 0:n._id)||"",c=Object(L.c)((function(e){return e.shoppingCartReducer.cartId}));return console.log("shopping cart",r),Object(P.jsx)(Fe.a,{className:e.box,border:1,children:Object(P.jsxs)(G.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(P.jsx)(G.a,{item:!0,xs:6,children:Object(P.jsx)(Fe.a,{border:1,className:e.cart,children:0===r.length?Object(P.jsx)(p.a,{variant:"h5",className:e.empty,children:" Your Shopping Cart Is Empty "}):Object(P.jsxs)("div",{style:{maxHeight:300,overflow:"auto"},children:[r.map((function(r){if(r.quantity>0)return Object(P.jsx)(Je.a,{className:e.container,maxWidth:"sm",children:Object(P.jsx)(Xe.a,{product:r},r._id)},r._id);!function(e){n?ee.a.removeProductFromShoppingCart({cartId:c,userId:a,product:e}).then((function(){t(Object(Z.f)(e,c))})).catch((function(e){return console.log(e)})):t(Object(Z.f)(e,c))}(r)})),Object(P.jsxs)(p.a,{variant:"h5",style:{marginLeft:20},children:["Total price: ",r.reduce((function(e,t){return e+t.price*t.quantity}),0)]})]})})}),Object(P.jsx)(G.a,{item:!0,xs:6,children:Object(P.jsx)(Fe.a,{border:1,className:e.shoppingCartAndFormBox,children:Object(P.jsx)("div",{className:e.form,children:Object(P.jsx)($e,{})})})})]})})},tt=r(438),rt=function(e){var t=e.type,r=e.message;switch(t){case"success":return Object(P.jsxs)(tt.a,{elevation:6,variant:"filled",severity:"success",children:[" ",r," "]});case"error":return Object(P.jsxs)(tt.a,{elevation:6,variant:"filled",severity:"error",children:[" ",r," "]});default:return Object(P.jsxs)(tt.a,{elevation:6,variant:"filled",severity:"info",children:[" ",r," "]})}},nt=Object(l.a)({root:{width:"15%",position:"relative",marginBottom:15,left:15}}),at=function(e){var t=e.type,r=e.message,n=e.tts,a=void 0===n?5e3:n,c=nt(),i=Object(L.b)();return setTimeout((function(){return i(Object(F.a)())}),a),Object(P.jsx)("div",{className:c.root,children:Object(P.jsx)(rt,{type:t,message:r})})},ct=r(441),it=r(409),st=r(366),ot=r(433),dt=r(434),ut=r(435),lt=r(436),jt=r(437),bt=Object(l.a)(Object(ct.a)({container:{position:"relative"},appMenu:{width:"100%"},menuItem:{height:70,width:240},menuIcon:{color:"#3f51b5"}})),mt=function(){var e=bt(),t=Object(L.b)(),r=Object(L.c)((function(e){return e.filterReducer.tagFilter}));return console.log("tagi",r),Object(P.jsx)("div",{className:e.container,children:Object(P.jsx)(o.b,{to:"/",style:{textDecoration:"none",color:"rgb(0,0,0)"},children:Object(P.jsxs)(it.a,{className:e.appMenu,disablePadding:!0,children:[Object(P.jsxs)(st.a,{onClick:function(){return t(V())},divider:!0,button:!0,className:e.menuItem,children:[Object(P.jsx)(k.a,{className:e.menuIcon,children:Object(P.jsx)(ot.a,{})}),Object(P.jsx)(S.a,{primary:"All"})]}),Object(P.jsxs)(st.a,{onClick:function(){return t(V("Kirves"))},divider:!0,button:!0,className:e.menuItem,children:[Object(P.jsx)(k.a,{className:e.menuIcon,children:Object(P.jsx)(dt.a,{})}),Object(P.jsx)(S.a,{primary:"Kirves"})]}),Object(P.jsxs)(st.a,{onClick:function(){return t(V("Ruoka/Juoma"))},divider:!0,button:!0,className:e.menuItem,children:[Object(P.jsx)(k.a,{className:e.menuIcon,children:Object(P.jsx)(ut.a,{})}),Object(P.jsx)(S.a,{primary:"Ruoka/Juoma"})]}),Object(P.jsxs)(st.a,{onClick:function(){return t(V("Mokki Essential"))},divider:!0,button:!0,className:e.menuItem,children:[Object(P.jsx)(k.a,{className:e.menuIcon,children:Object(P.jsx)(lt.a,{})}),Object(P.jsx)(S.a,{primary:"Mokki Essential"})]}),Object(P.jsxs)(st.a,{onClick:function(){return t(V("muut"))},divider:!0,button:!0,className:e.menuItem,children:[Object(P.jsx)(k.a,{className:e.menuIcon,children:Object(P.jsx)(jt.a,{})}),Object(P.jsx)(S.a,{primary:"Muut"})]})]})})})},pt=function(){var e=Object(L.b)(),t=Object(L.c)((function(e){return e.userReducer.user})),r=Object(L.c)((function(e){return e.notificationReducer})),a=Object(L.c)((function(e){return e.shoppingCartReducer}));return Object(n.useEffect)((function(){e(Object(de.b)())}),[]),Object(n.useEffect)((function(){var t=window.localStorage.getItem("loggedUser");if(t){var r=Object(Ye.g)(Ye.c)(t);if(r.hasError)console.log("error at parsed user");else if(function(e){var t=new Date(e),r=new Date;return console.log("current:",r.getHours(),".",r.getMinutes(),"d:",t.getHours(),".",t.getMinutes()),r.getHours()-t.getHours()<1}(r.parsed.timestamp))e(Object(M.a)(r.parsed)),ee.a.getUsersShoppingCart(r.parsed._id).then((function(t){t?e(Object(Z.g)(t.id,t.products)):ee.a.createNewShoppingCart({products:a.cart,user:r.parsed._id,id:a.cartId}).then((function(t){e(Object(Z.c)(t.id))}))}));else ee.a.setShoppingCartActivity(a.cartId,!1),e(Object(M.a)()),e(Object(Z.b)()),window.localStorage.removeItem("loggedUser")}}),[]),Object(P.jsx)("div",{children:Object(P.jsxs)(o.a,{children:[Object(P.jsx)(Ne,{user:t}),Object(P.jsx)("br",{}),r.visible&&Object(P.jsx)("div",{children:Object(P.jsx)(at,{type:r.type,message:r.message})}),Object(P.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(P.jsx)(mt,{}),Object(P.jsx)(d.c,{children:Object(P.jsx)(d.a,{path:"/account",render:function(){return Object(P.jsx)(Re.a,{user:t})}})}),Object(P.jsx)(d.c,{children:Object(P.jsx)(d.a,{path:"/pastOrders",render:function(){return Object(P.jsx)(Qe,{})}})}),Object(P.jsx)(d.c,{children:Object(P.jsx)(d.a,{path:"/shoppingCart",render:function(){return Object(P.jsx)(et,{})}})}),Object(P.jsx)(d.c,{children:Object(P.jsx)(d.a,{path:"/product",render:function(){return Object(P.jsx)(Se.a,{})}})}),Object(P.jsx)(d.c,{children:Object(P.jsx)(d.a,{exact:!0,path:"/",render:function(){return Object(P.jsx)(ke,{})}})})]})]})})};i.a.render(Object(P.jsx)(s.a,{store:L.a,children:Object(P.jsx)(pt,{})}),document.getElementById("root"))},37:function(e,t,r){"use strict";r.d(t,"h",(function(){return n})),r.d(t,"e",(function(){return a})),r.d(t,"i",(function(){return c})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return s})),r.d(t,"f",(function(){return o})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return u})),r.d(t,"g",(function(){return l}));var n=function(e){return"SET_TAG"===e.type},a=function(e){return"error"===e||"info"===e||"success"===e},c=function(e){return!!e},i=function(e){return"INCREASE_QUANTITY"===e.type||"DECREASE_QUANTITY"===e.type||"REMOVE_PRODUCT_FROM_CART"===e.type},s=function(e){return"CREATE_NEW_SHOPPING_CART"===e.type},o=function(e){return"RETRIEVE_OLD_SHOPPING_CART"===e.type},d=function(e){return"CLEAR_SHOPPINGCART"===e.type},u=function(e){return"firstName"in e&&"lastName"in e&&"userName"in e&&"_id"in e&&"userType"in e&&"token"in e&&"timestamp"in e},l=function(e){return function(t){var r=JSON.parse(t);return e(r)?{parsed:r,hasError:!1}:{hasError:!0}}}},39:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(119),a=function(e){var t={type:n.a,data:e};return function(e){e(t)}}},42:function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"e",(function(){return c})),r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"f",(function(){return o}));var n="INCREASE_QUANTITY",a="DECREASE_QUANTITY",c="REMOVE_PRODUCT_FROM_CART",i="CLEAR_SHOPPINGCART",s="CREATE_NEW_SHOPPING_CART",o="RETRIEVE_OLD_SHOPPING_CART"},44:function(e,t,r){"use strict";var n=r(10),a=r.n(n),c=r(24),i=r(25),s=r.n(i),o="https://verkkis.herokuapp.com/api",d=function(){var e=Object(c.a)(a.a.mark((function e(t,r,n){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("".concat(o,"/login"),{username:t,password:r,platformInfo:n});case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post("".concat(o,"/users"),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.put("".concat(o,"/users/"),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(a.a.mark((function e(t,r){var n,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("image",t,t.name),c={headers:{"Content-Type":"multipart/form-data"}},console.log("modify avatar service",n),e.next=6,s.a.put("".concat(o,"/users/").concat(r,"/image"),n,c);case 6:return i=e.sent,e.abrupt("return",i.data);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("".concat(o,"/users/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(a.a.mark((function e(t,r,n){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.put("".concat(o,"/users/").concat(t),{productId:r,value:n});case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();t.a={signIn:d,createUser:u,modifyUser:l,getUsersCompletedShoppingcarts:b,addRatingForProduct:m,modifyAvatar:j}},45:function(e,t,r){"use strict";var n=r(129),a=Object(n.a)({field:{padding:5,borderColor:"#124eb0",position:"relative",marginBottom:10,width:"90%",maxWidth:700},button:{display:"inline-flex",alignItems:"center",position:"relative",padding:20,paddingRight:75,marginTop:10,left:"38%",transform:"translate(-50%, -$50%)",borderWidth:3,borderRadius:35,width:92,height:20,opacity:.95,backgroundColor:"#124eb0",fontSize:16,fontStyle:"bold",color:"white"},logInText:{position:"relative",marginLeft:20,marginTop:20}});t.a=a},6:function(e,t,r){"use strict";r.d(t,"b",(function(){return A})),r.d(t,"c",(function(){return P}));var n=r(204),a=r(40),c=r(99),i=r(7),s=r(73),o={products:[]},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.b:return Object(i.a)(Object(i.a)({},e),{},{products:t.data});case s.a:return Object(i.a)(Object(i.a)({},e),{},{products:e.products.concat(t.data)});case s.c:return Object(i.a)(Object(i.a)({},e),{},{products:e.products.filter((function(e){return e!==t.data}))})}return e},u=r(119),l={user:void 0},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.a:return Object(i.a)(Object(i.a)({},e),{},{user:t.data})}return e},b=r(82),m={message:"",type:"error",visible:!1},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.b:return Object(i.a)(Object(i.a)({},e),{},{message:t.data,type:t.notificationType,visible:!0});case b.a:return Object(i.a)(Object(i.a)({},e),{},{message:"",type:t.notificationType,visible:!1})}return e},h=r(42),O=r(37),f={cartId:"",cart:[]},x=function(e,t){var r=t.find((function(t){return t._id===e._id}));return r?(e.quantity=r.quantity+1,e):e},g=function(e,t){var r=t.find((function(t){return t._id===e._id}));return r?(e.quantity=r.quantity-1,e):e},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;if(Object(O.a)(t))switch(t.type){case h.d:if(!e.cart.some((function(e){return e._id===t.data._id})))return Object(i.a)(Object(i.a)({},e),{},{cartId:t.cartId,cart:e.cart.concat(t.data)});var r=x(t.data,e.cart);return Object(i.a)(Object(i.a)({},e),{},{cartId:t.cartId,cart:e.cart.map((function(e){return e._id===r._id?r:e}))});case h.c:var n=g(t.data,e.cart);return Object(i.a)(Object(i.a)({},e),{},{cartId:t.cartId,cart:e.cart.map((function(e){return e._id===n._id?n:e}))});case h.e:return Object(i.a)(Object(i.a)({},e),{},{cartId:t.cartId,cart:e.cart.filter((function(e){return e._id!==t.data._id}))})}if(Object(O.f)(t))return{cartId:t.cartId,cart:t.data};if(Object(O.d)(t))switch(console.log("new shopping cart reducerissa",t),t.type){case h.b:return Object(i.a)(Object(i.a)({},e),{},{cartId:t.cartId,cart:e.cart})}return Object(O.b)(t)?(console.log("clear cart reducerissa",t),Object(i.a)(Object(i.a)({},e),{},{cartId:"",cart:[]})):e},y={createUserModal:!1,logInModal:!1,addProductModal:!1,modifyUserInfoModal:!1,modifyProductModal:!1,modifyUserAvatarModal:!1},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.modal){case"AddProduct":return Object(i.a)(Object(i.a)({},e),{},{addProductModal:t.data});case"CreateUser":return Object(i.a)(Object(i.a)({},e),{},{createUserModal:t.data});case"LogIn":return Object(i.a)(Object(i.a)({},e),{},{logInModal:t.data});case"ModifyUser":return Object(i.a)(Object(i.a)({},e),{},{modifyUserInfoModal:t.data});case"ModifyProduct":return Object(i.a)(Object(i.a)({},e),{},{modifyProductModal:t.data});case"ModifyUserAvatar":return Object(i.a)(Object(i.a)({},e),{},{modifyUserAvatarModal:t.data});default:return e}},N=r(98),C={productFilter:"",tagFilter:void 0},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;if(Object(O.h)(t))return Object(i.a)(Object(i.a)({},e),{},{tagFilter:t.data});switch(t.type){case N.a:return Object(i.a)(Object(i.a)({},e),{},{productFilter:t.data})}return e},k=r(120),S={product:void 0},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k.a:return{product:t.data}}return e},T=Object(a.c)({productReducer:d,userReducer:j,notificationReducer:p,shoppingCartReducer:v,modalReducer:w,filterReducer:I,activeProductReducer:R}),_=Object(n.a)({reducer:T}),A=function(){return Object(c.b)()},P=c.c;t.a=_},68:function(e,t,r){"use strict";var n=r(10),a=r.n(n),c=r(24),i=r(25),s=r.n(i),o="https://verkkis.herokuapp.com/api/products",d=function(){var e=Object(c.a)(a.a.mark((function e(t,r){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("addproduct"),e.next=3,s.a.post("".concat(o),t);case 3:if(n=e.sent,!r||null===n.data){e.next=8;break}return c=u(n.data._id,r),console.log("Image request",c),e.abrupt("return",c);case 8:return e.abrupt("return",n.data);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(a.a.mark((function e(t,r){var n,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("image",r,r.name),c={headers:{"Content-Type":"multipart/form-data"}},e.next=5,s.a.put("".concat(o,"/").concat(t),n,c);case 5:return i=e.sent,console.log("modifyProductImage",i.data),e.abrupt("return",i.data);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(a.a.mark((function e(t,r){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("modify product",t),e.next=3,s.a.put("".concat(o),t);case 3:if(null===(n=e.sent).data||!r){e.next=8;break}return c=u(t._id,r),console.log("req",c),e.abrupt("return",c);case 8:return console.log("data",n.data),e.abrupt("return",n.data);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.delete("".concat(o,"/").concat(t._id));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.a={getAll:function(){return s.a.get("".concat(o)).then((function(e){return e.data}))},addProduct:d,deleteProduct:j,modifyProduct:l}},69:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return d})),r.d(t,"b",(function(){return u}));var n=r(10),a=r.n(n),c=r(24),i=r(73),s=r(68),o=function(e){var t={type:i.a,data:e};return function(e){e(t)}},d=function(e){var t={type:i.c,data:e};return function(e){e(t)}},u=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.getAll();case 2:r=e.sent,n={type:i.b,data:r},t(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},70:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),"data:image/jpeg;base64,"+window.btoa(t)}},73:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return c}));var n="ADD_PRODUCT",a="GET_PRODUCTS",c="REMOVE_PRODUCT"},80:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(120),a=function(e){var t={type:n.a,data:e};return console.log("setactiveproduct",t.data),function(e){e(t)}}},82:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a}));var n="SET_NOTIFICATION",a="HIDE_NOTIFICATION"},98:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var n="SET_FILTER",a="SET_TAG"}},[[363,1,2]]]);
//# sourceMappingURL=main.5a8afd9f.chunk.js.map